<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ps2sdk: iop/fs/http/src/ps2http.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="code.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ps2sdk
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">A collection of Open Source libraries used for developing applications on Sony&#39;s PlayStation 2Â® (PS2).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ps2http_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ps2http.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="irx_8h_source.html">irx.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="thbase_8h_source.html">thbase.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sysclib_8h_source.html">sysclib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ioman__mod_8h_source.html">ioman_mod.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sysmem_8h_source.html">sysmem.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="ps2ip_8h_source.html">ps2ip.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for ps2http.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="ps2http_8c__incl.svg" width="100%" height="552"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="ps2http_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structt__fioPrivData.html">t_fioPrivData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1461c203c56ca9d19ec712e687c6cf15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>(args...)&#160;&#160;&#160;do { } while(0)</td></tr>
<tr class="separator:a1461c203c56ca9d19ec712e687c6cf15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b4fa34a46403cfb2733dce6a414b530"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a6b4fa34a46403cfb2733dce6a414b530">parseContentLength</a> (char *mimeBuffer)</td></tr>
<tr class="separator:a6b4fa34a46403cfb2733dce6a414b530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c98ee7659553ed5f90582978f23436e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a2c98ee7659553ed5f90582978f23436e">isErrorHeader</a> (char *mimeBuffer)</td></tr>
<tr class="separator:a2c98ee7659553ed5f90582978f23436e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9389d5b8e147b0134d0b71defc854628"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a9389d5b8e147b0134d0b71defc854628">readLine</a> (int <a class="el" href="ps2ip_8h.html#aa8318fbee111c5bde5952c63e894c962">socket</a>, char *<a class="el" href="ahx__irx_8c.html#a2e259c96eeae9c2c3832d3dd54fd26a3">buffer</a>, int size)</td></tr>
<tr class="separator:a9389d5b8e147b0134d0b71defc854628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b261a32f6d4cac03182f9400f0bdd59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a3b261a32f6d4cac03182f9400f0bdd59">httpConnect</a> (struct <a class="el" href="structsockaddr__in.html">sockaddr_in</a> *<a class="el" href="ps2snd_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, char *hostAddr, const char *url, <a class="el" href="structt__fioPrivData.html">t_fioPrivData</a> *pHandle)</td></tr>
<tr class="separator:a3b261a32f6d4cac03182f9400f0bdd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafda629f4ec1d3d34307aaa5ba919cb4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#aafda629f4ec1d3d34307aaa5ba919cb4">strnchr</a> (char *str, char ch, int max)</td></tr>
<tr class="separator:aafda629f4ec1d3d34307aaa5ba919cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d53301900c46a9be3df42045dff53a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a15d53301900c46a9be3df42045dff53a">_ResolveHostname</a> (const char *hostname, struct <a class="el" href="structin__addr.html">in_addr</a> *ip)</td></tr>
<tr class="separator:a15d53301900c46a9be3df42045dff53a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1771f4976393a276fa9026586176e0b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#ab1771f4976393a276fa9026586176e0b">resolveAddress</a> (struct <a class="el" href="structsockaddr__in.html">sockaddr_in</a> *<a class="el" href="ps2snd_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, const char *url, char *hostAddr)</td></tr>
<tr class="separator:ab1771f4976393a276fa9026586176e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68cbdd3e884ae6be84a4d05ef2d93d6e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a> ()</td></tr>
<tr class="separator:a68cbdd3e884ae6be84a4d05ef2d93d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f5ef0308dbb9ff2674ae0b2923aa9d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a1f5ef0308dbb9ff2674ae0b2923aa9d7">httpInitialize</a> (<a class="el" href="structiop__io__device__t.html">iop_io_device_t</a> *<a class="el" href="usb__mass_8c.html#ad7b604544aff4d6d8945fcb17e533f5c">driver</a>)</td></tr>
<tr class="separator:a1f5ef0308dbb9ff2674ae0b2923aa9d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a48097d7a335da63612b181278c285"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#aa5a48097d7a335da63612b181278c285">httpOpen</a> (<a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *f, const char *name, int mode)</td></tr>
<tr class="separator:aa5a48097d7a335da63612b181278c285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5aa5de2bfda4198b412a35c1774f1b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#ab5aa5de2bfda4198b412a35c1774f1b1">httpRead</a> (<a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *f, void *<a class="el" href="ahx__irx_8c.html#a2e259c96eeae9c2c3832d3dd54fd26a3">buffer</a>, int size)</td></tr>
<tr class="separator:ab5aa5de2bfda4198b412a35c1774f1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f071fff13da835ba201d99addbbe65"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a41f071fff13da835ba201d99addbbe65">httpClose</a> (<a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *f)</td></tr>
<tr class="separator:a41f071fff13da835ba201d99addbbe65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d221f0601822833945aa42a664ca407"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a7d221f0601822833945aa42a664ca407">httpLseek</a> (<a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *f, int offset, int mode)</td></tr>
<tr class="separator:a7d221f0601822833945aa42a664ca407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b2340c8c6834681b325712348644132"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fakehost.html#ga3b2340c8c6834681b325712348644132">_start</a> (int argc, char **argv)</td></tr>
<tr class="separator:ga3b2340c8c6834681b325712348644132"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0355f6a4959309e412adb034e6bc4cc9"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a0355f6a4959309e412adb034e6bc4cc9">strTest</a> [] = &quot;GET /blah HTTP/1.0\n\n&quot;</td></tr>
<tr class="separator:a0355f6a4959309e412adb034e6bc4cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66f8b87321d5646498beafdd02d2201"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#ab66f8b87321d5646498beafdd02d2201">HTTPGET</a> [] = &quot;GET &quot;</td></tr>
<tr class="separator:ab66f8b87321d5646498beafdd02d2201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c366a167321786b922302336d265d59"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a6c366a167321786b922302336d265d59">HTTPHOST</a> [] = &quot;Host: &quot;</td></tr>
<tr class="separator:a6c366a167321786b922302336d265d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b75d7d60d044c7abec005561574052"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a13b75d7d60d044c7abec005561574052">HTTPGETEND</a> [] = &quot; HTTP/1.0\r\n&quot;</td></tr>
<tr class="separator:a13b75d7d60d044c7abec005561574052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa490ae7e95ebc5e999d7b64e222dd4e1"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#aa490ae7e95ebc5e999d7b64e222dd4e1">HTTPUSERAGENT</a> [] = &quot;User-Agent: PS2IP HTTP Client\r\n&quot;</td></tr>
<tr class="separator:aa490ae7e95ebc5e999d7b64e222dd4e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169c7780895c32aeb55b1da36b7505d8"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a> [] = &quot;\r\n&quot;</td></tr>
<tr class="separator:a169c7780895c32aeb55b1da36b7505d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a07c39c17b6e23f20c03f5f636ba16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiop__io__device__ops__t.html">iop_io_device_ops_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#ae6a07c39c17b6e23f20c03f5f636ba16">ps2httpOps</a></td></tr>
<tr class="separator:ae6a07c39c17b6e23f20c03f5f636ba16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad74339a3414946388b98247bb1e6a725"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiop__io__device__t.html">iop_io_device_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ps2http_8c.html#ad74339a3414946388b98247bb1e6a725">ps2httpDev</a></td></tr>
<tr class="separator:ad74339a3414946388b98247bb1e6a725"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1461c203c56ca9d19ec712e687c6cf15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1461c203c56ca9d19ec712e687c6cf15">&#9670;&nbsp;</a></span>DBG_printf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBG_printf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args...</td><td>)</td>
          <td>&#160;&#160;&#160;do { } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00047">47</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a15d53301900c46a9be3df42045dff53a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d53301900c46a9be3df42045dff53a">&#9670;&nbsp;</a></span>_ResolveHostname()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int _ResolveHostname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structin__addr.html">in_addr</a> *&#160;</td>
          <td class="paramname"><em>ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00241">241</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keyword">struct </span><a class="code" href="structhostent.html">hostent</a> *HostEntry;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keyword">struct </span><a class="code" href="structin__addr.html">in_addr</a> **addr_list;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span>((HostEntry = <a class="code" href="ps2ip_8h.html#a2b655e0d89e519d3b700bbe677d5de79">gethostbyname</a>(hostname)) == <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">for</span>(addr_list = (<span class="keyword">struct</span> <a class="code" href="structin__addr.html">in_addr</a> **) HostEntry-&gt;<a class="code" href="structhostent.html#a4ff8499f29c5111435d6ed4adccfb621">h_addr_list</a>; addr_list != <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; addr_list++) </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                ip-&gt;<a class="code" href="structin__addr.html#a342ded9e0c1271513ca580d1cdfed60b">s_addr</a> = (*addr_list)-&gt;s_addr;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="ttc" id="adefs_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="defs_8h_source.html#l00022">defs.h:22</a></div></div>
<div class="ttc" id="aps2ip_8h_html_a2b655e0d89e519d3b700bbe677d5de79"><div class="ttname"><a href="ps2ip_8h.html#a2b655e0d89e519d3b700bbe677d5de79">gethostbyname</a></div><div class="ttdeci">#define gethostbyname</div><div class="ttdef"><b>Definition:</b> <a href="ps2ip_8h_source.html#l00152">ps2ip.h:152</a></div></div>
<div class="ttc" id="astructhostent_html"><div class="ttname"><a href="structhostent.html">hostent</a></div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01702">tcpip.h:1702</a></div></div>
<div class="ttc" id="astructhostent_html_a4ff8499f29c5111435d6ed4adccfb621"><div class="ttname"><a href="structhostent.html#a4ff8499f29c5111435d6ed4adccfb621">hostent::h_addr_list</a></div><div class="ttdeci">char ** h_addr_list</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01708">tcpip.h:1708</a></div></div>
<div class="ttc" id="astructin__addr_html"><div class="ttname"><a href="structin__addr.html">in_addr</a></div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01277">tcpip.h:1277</a></div></div>
<div class="ttc" id="astructin__addr_html_a342ded9e0c1271513ca580d1cdfed60b"><div class="ttname"><a href="structin__addr.html#a342ded9e0c1271513ca580d1cdfed60b">in_addr::s_addr</a></div><div class="ttdeci">u32 s_addr</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01278">tcpip.h:1278</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ps2ip_8h_source.html#l00152">gethostbyname</a>, <a class="el" href="tcpip_8h_source.html#l01708">hostent::h_addr_list</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, and <a class="el" href="tcpip_8h_source.html#l01278">in_addr::s_addr</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00269">resolveAddress()</a>.</p>

</div>
</div>
<a id="a41f071fff13da835ba201d99addbbe65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f071fff13da835ba201d99addbbe65">&#9670;&nbsp;</a></span>httpClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpClose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close finds the correct handle and calls disconnect. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00465">465</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *privData = (<a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *)f-&gt;<a class="code" href="structiop__io__file__t.html#aa3572ec234e5b16e88a24225d085f696">privdata</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;#ifdef DEBUG</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;httpClose(-)\n&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="ps2ip_8h.html#afd0897a2e23d99a5dffcc976c7e5d72c">lwip_close</a>(privData-&gt;<a class="code" href="structt__fioPrivData.html#af7ddaee606b565f86129920521021f5f">sockFd</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory</a>(privData);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="ttc" id="aps2ip_8h_html_afd0897a2e23d99a5dffcc976c7e5d72c"><div class="ttname"><a href="ps2ip_8h.html#afd0897a2e23d99a5dffcc976c7e5d72c">lwip_close</a></div><div class="ttdeci">int lwip_close(int s)</div></div>
<div class="ttc" id="astdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div></div>
<div class="ttc" id="astructiop__io__file__t_html_aa3572ec234e5b16e88a24225d085f696"><div class="ttname"><a href="structiop__io__file__t.html#aa3572ec234e5b16e88a24225d085f696">iop_io_file_t::privdata</a></div><div class="ttdeci">void * privdata</div><div class="ttdef"><b>Definition:</b> <a href="ioman__mod_8h_source.html#l00059">ioman_mod.h:59</a></div></div>
<div class="ttc" id="astructt__fioPrivData_html"><div class="ttname"><a href="structt__fioPrivData.html">t_fioPrivData</a></div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00050">ps2http.c:51</a></div></div>
<div class="ttc" id="astructt__fioPrivData_html_af7ddaee606b565f86129920521021f5f"><div class="ttname"><a href="structt__fioPrivData.html#af7ddaee606b565f86129920521021f5f">t_fioPrivData::sockFd</a></div><div class="ttdeci">int sockFd</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00052">ps2http.c:52</a></div></div>
<div class="ttc" id="asysmem_8h_html_a56d8a63932e5443b00d174f3ef5a6c81"><div class="ttname"><a href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory</a></div><div class="ttdeci">int FreeSysMemory(void *ptr)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory()</a>, <a class="el" href="ps2ip_8h.html#afd0897a2e23d99a5dffcc976c7e5d72c">lwip_close()</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="ioman__mod_8h_source.html#l00059">iop_io_file_t::privdata</a>, and <a class="el" href="ps2http_8c_source.html#l00052">t_fioPrivData::sockFd</a>.</p>

</div>
</div>
<a id="a3b261a32f6d4cac03182f9400f0bdd59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b261a32f6d4cac03182f9400f0bdd59">&#9670;&nbsp;</a></span>httpConnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpConnect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__in.html">sockaddr_in</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>hostAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structt__fioPrivData.html">t_fioPrivData</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the main HTTP client connect work. Makes the connection and handles the protocol and reads the return headers. Needs to leave the stream at the start of the real data. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00152">152</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordtype">int</span> sockHandle;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordtype">int</span> peerHandle;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordtype">char</span> mimeBuffer[100];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>( <span class="stringliteral">&quot;create socket\n&quot;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span>((sockHandle = <a class="code" href="ps2ip_8h.html#aa8318fbee111c5bde5952c63e894c962">socket</a>( <a class="code" href="tcpip_8h.html#a3f5da0b5be27fe31ec7cc11bfa8d1a25">PF_INET</a>, <a class="code" href="tcpip_8h.html#a249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, <a class="code" href="tcpip_8h.html#a94f83c72c1e5e6ef453e47cf59885fb5">IPPROTO_TCP</a> )) &lt; 0)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>( <span class="stringliteral">&quot;HTTP: SOCKET FAILED\n&quot;</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>( <span class="stringliteral">&quot;connect\n&quot;</span> );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#adfd4ee688142ebda1142c1b0c7577e91">connect</a>( sockHandle, (<span class="keyword">struct</span> <a class="code" href="structsockaddr.html">sockaddr</a> *) <a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, <span class="keyword">sizeof</span>(*<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> ( rc &lt; 0 )</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>( <span class="stringliteral">&quot;HTTP: CONNECT FAILED %i\n&quot;</span>, sockHandle );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        peerHandle = sockHandle;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>( <span class="stringliteral">&quot;send\n&quot;</span> );</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// Needs more error checking here.....</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#ab66f8b87321d5646498beafdd02d2201">HTTPGET</a>,  <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#ab66f8b87321d5646498beafdd02d2201">HTTPGET</a> ) - 1, 0 );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, (<span class="keywordtype">void</span>*) url, <a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>( url ), 0 );</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#a13b75d7d60d044c7abec005561574052">HTTPGETEND</a>, <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#a13b75d7d60d044c7abec005561574052">HTTPGETEND</a> ) - 1, 0 );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#a6c366a167321786b922302336d265d59">HTTPHOST</a>,  <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#a6c366a167321786b922302336d265d59">HTTPHOST</a> ) - 1, 0 );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, hostAddr, <a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>( hostAddr ), 0 );</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a>, <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a> ) - 1, 0 ); <span class="comment">// &quot;\r\n&quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#aa490ae7e95ebc5e999d7b64e222dd4e1">HTTPUSERAGENT</a>, <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#aa490ae7e95ebc5e999d7b64e222dd4e1">HTTPUSERAGENT</a> ) - 1, 0 );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        rc = <a class="code" href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a>( peerHandle, <a class="code" href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a>, <span class="keyword">sizeof</span>( <a class="code" href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a> ) - 1, 0 );</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">// We now need to read the header information</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">while</span> ( 1 )</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <span class="comment">// read a line from the header information.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                rc = <a class="code" href="ps2http_8c.html#a9389d5b8e147b0134d0b71defc854628">readLine</a>( peerHandle, mimeBuffer, 100 );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>(<span class="stringliteral">&quot;&gt;&gt; %s&quot;</span>, mimeBuffer);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">if</span> ( rc &lt; 0 ) <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="comment">// End of headers is a blank line.  exit.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <span class="keywordflow">if</span> ( rc == 0 ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">if</span> ( (rc == 1) &amp;&amp; (mimeBuffer[0] == <span class="charliteral">&#39;\r&#39;</span>) ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="comment">// Convert mimeBuffer to upper case, so we can do string comps</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(mimeBuffer); i++)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        mimeBuffer[i] = <a class="code" href="sysclib_8h.html#adda03014c30b02d7b496fce96f37951b">toupper</a>(mimeBuffer[i]);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a>(mimeBuffer, <span class="stringliteral">&quot;HTTP/1.&quot;</span>)) <span class="comment">// First line of header, contains status code. Check for an error code</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        <span class="keywordflow">if</span>((rc = <a class="code" href="ps2http_8c.html#a2c98ee7659553ed5f90582978f23436e">isErrorHeader</a>(mimeBuffer))) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;HTTP: status code = %d!\n&quot;</span>, rc);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                <span class="keywordflow">return</span> -rc;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a>(mimeBuffer, <span class="stringliteral">&quot;CONTENT-LENGTH:&quot;</span>))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        pHandle-&gt;<a class="code" href="structt__fioPrivData.html#a4220d6eb9be84747d138ed8cbfdebbf5">fileSize</a> = <a class="code" href="ps2http_8c.html#a6b4fa34a46403cfb2733dce6a414b530">parseContentLength</a>(mimeBuffer);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                        <a class="code" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>(<span class="stringliteral">&quot;fileSize = %d\n&quot;</span>, pHandle-&gt;<a class="code" href="structt__fioPrivData.html#a4220d6eb9be84747d138ed8cbfdebbf5">fileSize</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// We&#39;ve sent the request, and read the headers.  SockHandle is</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">// now at the start of the main data read for a file io read.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> peerHandle;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="ttc" id="anprintf_8c_html_ae54c71aca8f24cab5b20f9044f5255c8"><div class="ttname"><a href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a></div><div class="ttdeci">static SifRpcServerData_t server</div><div class="ttdef"><b>Definition:</b> <a href="nprintf_8c_source.html#l00044">nprintf.c:44</a></div></div>
<div class="ttc" id="aps2http_8c_html_a13b75d7d60d044c7abec005561574052"><div class="ttname"><a href="ps2http_8c.html#a13b75d7d60d044c7abec005561574052">HTTPGETEND</a></div><div class="ttdeci">char HTTPGETEND[]</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00063">ps2http.c:63</a></div></div>
<div class="ttc" id="aps2http_8c_html_a1461c203c56ca9d19ec712e687c6cf15"><div class="ttname"><a href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a></div><div class="ttdeci">#define DBG_printf(args...)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00047">ps2http.c:47</a></div></div>
<div class="ttc" id="aps2http_8c_html_a169c7780895c32aeb55b1da36b7505d8"><div class="ttname"><a href="ps2http_8c.html#a169c7780895c32aeb55b1da36b7505d8">HTTPENDHEADER</a></div><div class="ttdeci">char HTTPENDHEADER[]</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00065">ps2http.c:65</a></div></div>
<div class="ttc" id="aps2http_8c_html_a2c98ee7659553ed5f90582978f23436e"><div class="ttname"><a href="ps2http_8c.html#a2c98ee7659553ed5f90582978f23436e">isErrorHeader</a></div><div class="ttdeci">int isErrorHeader(char *mimeBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00087">ps2http.c:87</a></div></div>
<div class="ttc" id="aps2http_8c_html_a6b4fa34a46403cfb2733dce6a414b530"><div class="ttname"><a href="ps2http_8c.html#a6b4fa34a46403cfb2733dce6a414b530">parseContentLength</a></div><div class="ttdeci">int parseContentLength(char *mimeBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00070">ps2http.c:70</a></div></div>
<div class="ttc" id="aps2http_8c_html_a6c366a167321786b922302336d265d59"><div class="ttname"><a href="ps2http_8c.html#a6c366a167321786b922302336d265d59">HTTPHOST</a></div><div class="ttdeci">char HTTPHOST[]</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00062">ps2http.c:62</a></div></div>
<div class="ttc" id="aps2http_8c_html_a9389d5b8e147b0134d0b71defc854628"><div class="ttname"><a href="ps2http_8c.html#a9389d5b8e147b0134d0b71defc854628">readLine</a></div><div class="ttdeci">int readLine(int socket, char *buffer, int size)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00118">ps2http.c:118</a></div></div>
<div class="ttc" id="aps2http_8c_html_aa490ae7e95ebc5e999d7b64e222dd4e1"><div class="ttname"><a href="ps2http_8c.html#aa490ae7e95ebc5e999d7b64e222dd4e1">HTTPUSERAGENT</a></div><div class="ttdeci">char HTTPUSERAGENT[]</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00064">ps2http.c:64</a></div></div>
<div class="ttc" id="aps2http_8c_html_ab66f8b87321d5646498beafdd02d2201"><div class="ttname"><a href="ps2http_8c.html#ab66f8b87321d5646498beafdd02d2201">HTTPGET</a></div><div class="ttdeci">char HTTPGET[]</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00061">ps2http.c:61</a></div></div>
<div class="ttc" id="aps2ip_8h_html_aa8318fbee111c5bde5952c63e894c962"><div class="ttname"><a href="ps2ip_8h.html#aa8318fbee111c5bde5952c63e894c962">socket</a></div><div class="ttdeci">#define socket</div><div class="ttdef"><b>Definition:</b> <a href="ps2ip_8h_source.html#l00148">ps2ip.h:148</a></div></div>
<div class="ttc" id="aps2ip_8h_html_adfd4ee688142ebda1142c1b0c7577e91"><div class="ttname"><a href="ps2ip_8h.html#adfd4ee688142ebda1142c1b0c7577e91">connect</a></div><div class="ttdeci">#define connect</div><div class="ttdef"><b>Definition:</b> <a href="ps2ip_8h_source.html#l00142">ps2ip.h:142</a></div></div>
<div class="ttc" id="aps2ip_8h_html_af9761b02a9cdd0bba649e4f48ce07eb1"><div class="ttname"><a href="ps2ip_8h.html#af9761b02a9cdd0bba649e4f48ce07eb1">send</a></div><div class="ttdeci">#define send</div><div class="ttdef"><b>Definition:</b> <a href="ps2ip_8h_source.html#l00146">ps2ip.h:146</a></div></div>
<div class="ttc" id="astructsockaddr_html"><div class="ttname"><a href="structsockaddr.html">sockaddr</a></div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01332">tcpip.h:1332</a></div></div>
<div class="ttc" id="astructt__fioPrivData_html_a4220d6eb9be84747d138ed8cbfdebbf5"><div class="ttname"><a href="structt__fioPrivData.html#a4220d6eb9be84747d138ed8cbfdebbf5">t_fioPrivData::fileSize</a></div><div class="ttdeci">int fileSize</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00053">ps2http.c:53</a></div></div>
<div class="ttc" id="asysclib_8h_html_a4a710d86541afc6b7dafddcdb4b1c94f"><div class="ttname"><a href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a></div><div class="ttdeci">char * strstr(const char *haystack, const char *needle)</div></div>
<div class="ttc" id="asysclib_8h_html_aa383452fe445bfae989358c9d7d96f4f"><div class="ttname"><a href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a></div><div class="ttdeci">size_t strlen(const char *s)</div></div>
<div class="ttc" id="asysclib_8h_html_adda03014c30b02d7b496fce96f37951b"><div class="ttname"><a href="sysclib_8h.html#adda03014c30b02d7b496fce96f37951b">toupper</a></div><div class="ttdeci">#define toupper(c)</div><div class="ttdef"><b>Definition:</b> <a href="sysclib_8h_source.html#l00035">sysclib.h:35</a></div></div>
<div class="ttc" id="atcpip_8h_html_a249394484f9410a2e3f8eba24657feb9"><div class="ttname"><a href="tcpip_8h.html#a249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a></div><div class="ttdeci">#define SOCK_STREAM</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01353">tcpip.h:1353</a></div></div>
<div class="ttc" id="atcpip_8h_html_a3f5da0b5be27fe31ec7cc11bfa8d1a25"><div class="ttname"><a href="tcpip_8h.html#a3f5da0b5be27fe31ec7cc11bfa8d1a25">PF_INET</a></div><div class="ttdeci">#define PF_INET</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01399">tcpip.h:1399</a></div></div>
<div class="ttc" id="atcpip_8h_html_a94f83c72c1e5e6ef453e47cf59885fb5"><div class="ttname"><a href="tcpip_8h.html#a94f83c72c1e5e6ef453e47cf59885fb5">IPPROTO_TCP</a></div><div class="ttdeci">#define IPPROTO_TCP</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01405">tcpip.h:1405</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ps2ip_8h_source.html#l00142">connect</a>, <a class="el" href="ps2http_8c_source.html#l00047">DBG_printf</a>, <a class="el" href="ps2http_8c_source.html#l00053">t_fioPrivData::fileSize</a>, <a class="el" href="ps2http_8c_source.html#l00065">HTTPENDHEADER</a>, <a class="el" href="ps2http_8c_source.html#l00061">HTTPGET</a>, <a class="el" href="ps2http_8c_source.html#l00063">HTTPGETEND</a>, <a class="el" href="ps2http_8c_source.html#l00062">HTTPHOST</a>, <a class="el" href="ps2http_8c_source.html#l00064">HTTPUSERAGENT</a>, <a class="el" href="tcpip_8h_source.html#l01405">IPPROTO_TCP</a>, <a class="el" href="ps2http_8c_source.html#l00087">isErrorHeader()</a>, <a class="el" href="ps2http_8c_source.html#l00070">parseContentLength()</a>, <a class="el" href="tcpip_8h_source.html#l01399">PF_INET</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="ps2http_8c_source.html#l00118">readLine()</a>, <a class="el" href="ps2ip_8h_source.html#l00146">send</a>, <a class="el" href="nprintf_8c_source.html#l00044">server</a>, <a class="el" href="tcpip_8h_source.html#l01353">SOCK_STREAM</a>, <a class="el" href="ps2ip_8h_source.html#l00148">socket</a>, <a class="el" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen()</a>, <a class="el" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr()</a>, and <a class="el" href="sysclib_8h_source.html#l00035">toupper</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00380">httpOpen()</a>.</p>

</div>
</div>
<a id="a68cbdd3e884ae6be84a4d05ef2d93d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68cbdd3e884ae6be84a4d05ef2d93d6e">&#9670;&nbsp;</a></span>httpDummy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpDummy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Any calls we don't implement calls dummy. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00358">358</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;PS2HTTP: dummy function called\n&quot;</span>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> -5;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>.</p>

</div>
</div>
<a id="a1f5ef0308dbb9ff2674ae0b2923aa9d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f5ef0308dbb9ff2674ae0b2923aa9d7">&#9670;&nbsp;</a></span>httpInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpInitialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiop__io__device__t.html">iop_io_device_t</a> *&#160;</td>
          <td class="paramname"><em>driver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00364">364</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;PS2HTTP: filesystem driver initialized\n&quot;</span>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>.</p>

</div>
</div>
<a id="a7d221f0601822833945aa42a664ca407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d221f0601822833945aa42a664ca407">&#9670;&nbsp;</a></span>httpLseek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpLseek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>lseek is only supported in order to get the size of a file. Allough the function does modify the filePos member, this does not have any effect on the read position of the file in the current implimentation. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00484">484</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *privData = (<a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *)f-&gt;<a class="code" href="structiop__io__file__t.html#aa3572ec234e5b16e88a24225d085f696">privdata</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;#ifdef DEBUG</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;httpLseek(-, %d, %d)\n&quot;</span>, (<span class="keywordtype">int</span>)offset, mode);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">switch</span>(mode)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>:</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        privData-&gt;<a class="code" href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">filePos</a> = offset;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>:</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        privData-&gt;<a class="code" href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">filePos</a> += offset;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        privData-&gt;<a class="code" href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">filePos</a> = privData-&gt;<a class="code" href="structt__fioPrivData.html#a4220d6eb9be84747d138ed8cbfdebbf5">fileSize</a> + offset;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">return</span> privData-&gt;<a class="code" href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">filePos</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="ttc" id="afcntl_8h_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="fcntl_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00015">fcntl.h:15</a></div></div>
<div class="ttc" id="afcntl_8h_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="fcntl_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00016">fcntl.h:16</a></div></div>
<div class="ttc" id="afcntl_8h_html_ad2a2e6c114780c3071efd24f16c7f7d8"><div class="ttname"><a href="fcntl_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a></div><div class="ttdeci">#define SEEK_END</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00017">fcntl.h:17</a></div></div>
<div class="ttc" id="astructt__fioPrivData_html_a277c8b92229ecd4fd947848a91f4adb5"><div class="ttname"><a href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">t_fioPrivData::filePos</a></div><div class="ttdeci">int filePos</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00054">ps2http.c:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ps2http_8c_source.html#l00054">t_fioPrivData::filePos</a>, <a class="el" href="ps2http_8c_source.html#l00053">t_fioPrivData::fileSize</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="ioman__mod_8h_source.html#l00059">iop_io_file_t::privdata</a>, <a class="el" href="fcntl_8h_source.html#l00016">SEEK_CUR</a>, <a class="el" href="fcntl_8h_source.html#l00017">SEEK_END</a>, and <a class="el" href="fcntl_8h_source.html#l00015">SEEK_SET</a>.</p>

</div>
</div>
<a id="aa5a48097d7a335da63612b181278c285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5a48097d7a335da63612b181278c285">&#9670;&nbsp;</a></span>httpOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open has the most work to do in the file driver. It must:</p>
<ol type="1">
<li>Find a free file Handle.</li>
<li>Check we have a valid IP address and URL.</li>
<li>Try and connect to the remote server.</li>
<li>Send a GET request to the server</li>
<li>Parse the GET response header from the server </li>
</ol>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00380">380</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordtype">int</span> peerHandle = 0;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keyword">struct </span><a class="code" href="structsockaddr__in.html">sockaddr_in</a> <a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *getName;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *privData;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">char</span> hostAddr[100];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;httpOpen(-, %s, %d)\n&quot;</span>, name, mode);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span>((privData = <a class="code" href="sysmem_8h.html#ae1199c5a0cdb3b0c5a1dda7470a9e307">AllocSysMemory</a>(<a class="code" href="sysmem_8h.html#a3b48714518106dbceacf228718483363">ALLOC_FIRST</a>, <span class="keyword">sizeof</span>(<a class="code" href="structt__fioPrivData.html">t_fioPrivData</a>), <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) == <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        f-&gt;<a class="code" href="structiop__io__file__t.html#aa3572ec234e5b16e88a24225d085f696">privdata</a> = privData;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        privData-&gt;<a class="code" href="structt__fioPrivData.html#a4220d6eb9be84747d138ed8cbfdebbf5">fileSize</a> = 0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        privData-&gt;<a class="code" href="structt__fioPrivData.html#a277c8b92229ecd4fd947848a91f4adb5">filePos</a> = 0;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="sysclib_8h.html#ab8dce9c192324f0fd191fd5b85c7bb60">memset</a>(&amp;<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="comment">// Check valid IP address and URL</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span>((getName = <a class="code" href="ps2http_8c.html#ab1771f4976393a276fa9026586176e0b">resolveAddress</a>( &amp;<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, name, hostAddr )) == <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <a class="code" href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory</a>(privData);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">return</span> -2;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">// Now we connect and initiate the transfer by sending a</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// request header to the server, and receiving the response header</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span>((peerHandle = <a class="code" href="ps2http_8c.html#a3b261a32f6d4cac03182f9400f0bdd59">httpConnect</a>( &amp;<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>, hostAddr, getName, privData )) &lt; 0)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;HTTP: failed to connect to &#39;%s&#39;!\n&quot;</span>, hostAddr);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <a class="code" href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory</a>(privData);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="keywordflow">return</span> peerHandle;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">// http connect returns valid socket.  Save in handle list.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        privData-&gt;<a class="code" href="structt__fioPrivData.html#af7ddaee606b565f86129920521021f5f">sockFd</a> = peerHandle;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">// return success.  We got it all ready. :)</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="ttc" id="aps2http_8c_html_a3b261a32f6d4cac03182f9400f0bdd59"><div class="ttname"><a href="ps2http_8c.html#a3b261a32f6d4cac03182f9400f0bdd59">httpConnect</a></div><div class="ttdeci">int httpConnect(struct sockaddr_in *server, char *hostAddr, const char *url, t_fioPrivData *pHandle)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00152">ps2http.c:152</a></div></div>
<div class="ttc" id="aps2http_8c_html_ab1771f4976393a276fa9026586176e0b"><div class="ttname"><a href="ps2http_8c.html#ab1771f4976393a276fa9026586176e0b">resolveAddress</a></div><div class="ttdeci">const char * resolveAddress(struct sockaddr_in *server, const char *url, char *hostAddr)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00269">ps2http.c:269</a></div></div>
<div class="ttc" id="astructsockaddr__in_html"><div class="ttname"><a href="structsockaddr__in.html">sockaddr_in</a></div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01311">tcpip.h:1311</a></div></div>
<div class="ttc" id="asysclib_8h_html_ab8dce9c192324f0fd191fd5b85c7bb60"><div class="ttname"><a href="sysclib_8h.html#ab8dce9c192324f0fd191fd5b85c7bb60">memset</a></div><div class="ttdeci">void * memset(void *ptr, int c, size_t size)</div></div>
<div class="ttc" id="asysmem_8h_html_a3b48714518106dbceacf228718483363"><div class="ttname"><a href="sysmem_8h.html#a3b48714518106dbceacf228718483363">ALLOC_FIRST</a></div><div class="ttdeci">#define ALLOC_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="sysmem_8h_source.html#l00024">sysmem.h:24</a></div></div>
<div class="ttc" id="asysmem_8h_html_ae1199c5a0cdb3b0c5a1dda7470a9e307"><div class="ttname"><a href="sysmem_8h.html#ae1199c5a0cdb3b0c5a1dda7470a9e307">AllocSysMemory</a></div><div class="ttdeci">void * AllocSysMemory(int mode, int size, void *ptr)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sysmem_8h_source.html#l00024">ALLOC_FIRST</a>, <a class="el" href="sysmem_8h.html#ae1199c5a0cdb3b0c5a1dda7470a9e307">AllocSysMemory()</a>, <a class="el" href="ps2http_8c_source.html#l00054">t_fioPrivData::filePos</a>, <a class="el" href="ps2http_8c_source.html#l00053">t_fioPrivData::fileSize</a>, <a class="el" href="sysmem_8h.html#a56d8a63932e5443b00d174f3ef5a6c81">FreeSysMemory()</a>, <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>, <a class="el" href="sysclib_8h.html#ab8dce9c192324f0fd191fd5b85c7bb60">memset()</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="ioman__mod_8h_source.html#l00059">iop_io_file_t::privdata</a>, <a class="el" href="ps2http_8c_source.html#l00269">resolveAddress()</a>, <a class="el" href="nprintf_8c_source.html#l00044">server</a>, and <a class="el" href="ps2http_8c_source.html#l00052">t_fioPrivData::sockFd</a>.</p>

</div>
</div>
<a id="ab5aa5de2bfda4198b412a35c1774f1b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5aa5de2bfda4198b412a35c1774f1b1">&#9670;&nbsp;</a></span>httpRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int httpRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiop__io__file__t.html">iop_io_file_t</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read is simple. It simply needs to find the socket no based on the file handle and call recv. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00429">429</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordtype">int</span> bytesRead = 0;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *privData = (<a class="code" href="structt__fioPrivData.html">t_fioPrivData</a> *)f-&gt;<a class="code" href="structiop__io__file__t.html#aa3572ec234e5b16e88a24225d085f696">privdata</a>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordtype">int</span> left = size;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordtype">int</span> totalRead = 0;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;#ifdef DEBUG</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;httpRead(-, 0x%X, %d)\n&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="sior_8c.html#a12a89c3c8fa5f42541ab342d3b88c82d">buffer</a>, size);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">// Read until: there is an error, we&#39;ve read &quot;size&quot; bytes or the remote</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">//             side has closed the connection.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                bytesRead = <a class="code" href="ps2ip_8h.html#af5c55c2a392615b0376df3644dc2e792">recv</a>( privData-&gt;<a class="code" href="structt__fioPrivData.html#af7ddaee606b565f86129920521021f5f">sockFd</a>, <a class="code" href="sior_8c.html#a12a89c3c8fa5f42541ab342d3b88c82d">buffer</a> + totalRead, left, 0 );</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">//              printf(&quot;bytesRead = %d\n&quot;, bytesRead);</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="keywordflow">if</span>(bytesRead &lt;= 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                left -= bytesRead;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                totalRead += bytesRead;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        } <span class="keywordflow">while</span>(left);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">return</span> totalRead;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="ttc" id="aps2ip_8h_html_af5c55c2a392615b0376df3644dc2e792"><div class="ttname"><a href="ps2ip_8h.html#af5c55c2a392615b0376df3644dc2e792">recv</a></div><div class="ttdeci">#define recv</div><div class="ttdef"><b>Definition:</b> <a href="ps2ip_8h_source.html#l00144">ps2ip.h:144</a></div></div>
<div class="ttc" id="asior_8c_html_a12a89c3c8fa5f42541ab342d3b88c82d"><div class="ttname"><a href="sior_8c.html#a12a89c3c8fa5f42541ab342d3b88c82d">buffer</a></div><div class="ttdeci">static union siorCommsData buffer</div><div class="ttdef"><b>Definition:</b> <a href="sior_8c_source.html#l00023">sior.c:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sior_8c_source.html#l00028">buffer</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="ioman__mod_8h_source.html#l00059">iop_io_file_t::privdata</a>, <a class="el" href="ps2ip_8h_source.html#l00144">recv</a>, and <a class="el" href="ps2http_8c_source.html#l00052">t_fioPrivData::sockFd</a>.</p>

</div>
</div>
<a id="a2c98ee7659553ed5f90582978f23436e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c98ee7659553ed5f90582978f23436e">&#9670;&nbsp;</a></span>isErrorHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int isErrorHeader </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mimeBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function will parse the initial response header line and return 0 for a "200 OK", or return the error code in the event of an error (such as 404 - not found) </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00087">87</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordtype">char</span> *line;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordtype">int</span> code;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        line = <a class="code" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a>(mimeBuffer, <span class="stringliteral">&quot;HTTP/1.&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        line += <a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(<span class="stringliteral">&quot;HTTP/1.&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// Advance past minor protocol version number</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        line++;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// Advance past any whitespace characters</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">while</span>((*line == <span class="charliteral">&#39; &#39;</span>) || (*line == <span class="charliteral">&#39;\t&#39;</span>)) line++;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// Terminate string after status code</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">for</span>(i = 0; ((line[i] != <span class="charliteral">&#39; &#39;</span>) &amp;&amp; (line[i] != <span class="charliteral">&#39;\t&#39;</span>)); i++);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        line[i] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        code = (int)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(line,<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span>( code == 200 )</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <span class="keywordflow">return</span> code;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="ttc" id="asysclib_8h_html_ae95e62b7cb290c47fc98c27a8c04b724"><div class="ttname"><a href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a></div><div class="ttdeci">long strtol(const char *s, char **endptr, int base)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen()</a>, <a class="el" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr()</a>, and <a class="el" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="a6b4fa34a46403cfb2733dce6a414b530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b4fa34a46403cfb2733dce6a414b530">&#9670;&nbsp;</a></span>parseContentLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int parseContentLength </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mimeBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function will parse the Content-Length header line and return the file size </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00070">70</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordtype">char</span> *line;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        line = <a class="code" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a>(mimeBuffer, <span class="stringliteral">&quot;CONTENT-LENGTH:&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        line += <a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(<span class="stringliteral">&quot;CONTENT-LENGTH:&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">// Advance past any whitepace characters</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">while</span>((*line == <span class="charliteral">&#39; &#39;</span>) || (*line == <span class="charliteral">&#39;\t&#39;</span>)) line++;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(line,<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen()</a>, <a class="el" href="sysclib_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr()</a>, and <a class="el" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="a9389d5b8e147b0134d0b71defc854628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9389d5b8e147b0134d0b71defc854628">&#9670;&nbsp;</a></span>readLine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readLine </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When a request has been sent, we can expect mime headers to be before the data. We need to read exactly to the end of the headers and no more data. This readline reads a single char at a time. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00118">118</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordtype">char</span> * ptr = <a class="code" href="sior_8c.html#a12a89c3c8fa5f42541ab342d3b88c82d">buffer</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">// Keep reading until we fill the buffer.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">while</span> ( count &lt; size )</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                rc = <a class="code" href="ps2ip_8h.html#af5c55c2a392615b0376df3644dc2e792">recv</a>( <a class="code" href="ps2ip_8h.html#aa8318fbee111c5bde5952c63e894c962">socket</a>, ptr, 1, 0 );</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <span class="keywordflow">if</span> ( rc &lt;= 0 ) <span class="keywordflow">return</span> rc;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">if</span> ( (*ptr == <span class="charliteral">&#39;\n&#39;</span>) ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="comment">// increment after check for cr.  Don&#39;t want to count the cr.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                count++;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                ptr++;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// Terminate string</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        *ptr = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment">// return how many bytes read.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sior_8c_source.html#l00028">buffer</a>, <a class="el" href="ps2ip_8h_source.html#l00144">recv</a>, and <a class="el" href="ps2ip_8h_source.html#l00148">socket</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="ab1771f4976393a276fa9026586176e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1771f4976393a276fa9026586176e0b">&#9670;&nbsp;</a></span>resolveAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* resolveAddress </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsockaddr__in.html">sockaddr_in</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>hostAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Before we can connect we need to parse the server address and optional port from the url provided. the format of "url" as passed to this function is "//192.168.0.1:8080/blah.elf" where "192.168.0.1" can be either an IP or a domain name and ":8080" is the optional port to connect to, default port is 80.</p>
<p>This function will return a filename string for use in GET requests, and fill the structure pointed to by *server with the correct values. </p>

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00269">269</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> w,x,y,z;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *char_ptr;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordtype">char</span> addr[128];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordtype">char</span> port[6] = <span class="stringliteral">&quot;80&quot;</span>; <span class="comment">// default port of 80(HTTP)</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordtype">int</span> i = 0, rv;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordtype">int</span> isDomain = 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// eg url= //192.168.0.1/fred.elf  (the http: is already stripped)</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">// NOTE: Need more error checking in parsing code</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">// URL must start with double forward slashes.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">while</span>(url[0] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                url++;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">for</span>(i = 0; ((url[i] != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (url[i] != <span class="charliteral">&#39;/&#39;</span>)) &amp;&amp; (i &lt; 127); i++)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">if</span>((((addr[i] = url[i]) &lt; <span class="charliteral">&#39;0&#39;</span>) || (url[i] &gt; <span class="charliteral">&#39;9&#39;</span>)) &amp;&amp; (url[i] != <span class="charliteral">&#39;.&#39;</span>)) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span>(url[i] == <span class="charliteral">&#39;:&#39;</span>) {<span class="comment">// allow specification of port in URL like http://www.server.net:8080/</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    <span class="keywordflow">for</span>(w = 0; ((w + i + 1) &lt; 127) &amp;&amp; (w &lt; 5) &amp;&amp; (url[w + i + 1] != <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (url[w + i + 1] != <span class="charliteral">&#39;\0&#39;</span>); w++)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        port[w] = url[w + i + 1];</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    port[w] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    <a class="code" href="ps2http_8c.html#a1461c203c56ca9d19ec712e687c6cf15">DBG_printf</a>(<span class="stringliteral">&quot;HTTP: using port %s for connection\n&quot;</span>, port);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">else</span> <span class="comment">// it&#39;s a domain name if a non-numeric char is contained in the &quot;server&quot; part of the URL.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    isDomain = 1;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    addr[i] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">// overwrite last char copied(should be &#39;/&#39;, &#39;\0&#39; or &#39;:&#39;) with a &#39;\0&#39;</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="sysclib_8h.html#a7a82515b5d377be04817715c5465b647">strcpy</a>(hostAddr, addr);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span>(isDomain) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="comment">// resolve the host name.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                rv = <a class="code" href="ps2http_8c.html#a15d53301900c46a9be3df42045dff53a">_ResolveHostname</a>(addr, &amp;<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>-&gt;sin_addr);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">if</span>(rv != 0) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;HTTP: failed to resolve domain &#39;%s&#39;\n&quot;</span>, addr);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="comment">// turn &#39;.&#39; characters in ip string into null characters</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">for</span>(i = 0, w = 0; i &lt; 16; i++)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        <span class="keywordflow">if</span>(addr[i] == <span class="charliteral">&#39;.&#39;</span>) { addr[i] = <span class="charliteral">&#39;\0&#39;</span>; w++; }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span>(w != 3) { <span class="comment">// w is used as a simple error check here</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;HTTP: invalid IP address &#39;%s&#39;\n&quot;</span>, hostAddr);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">return</span>(<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                i = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="comment">// Extract individual ip number octets from string</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                w = (int)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(&amp;addr[i],<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                i += (<a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(&amp;addr[i]) + 1);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                x = (int)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(&amp;addr[i],<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                i += (<a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(&amp;addr[i]) + 1);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                y = (int)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(&amp;addr[i],<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                i += (<a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(&amp;addr[i]) + 1);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                z = (int)<a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(&amp;addr[i],<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                i += (<a class="code" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen</a>(&amp;addr[i]) + 1);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                <a class="code" href="tcpip_8h.html#a58aee4166c466f9ac7035bf5cc9f9974">IP4_ADDR</a>( (<span class="keyword">struct</span> <a class="code" href="structip4__addr.html">ip4_addr</a> *)&amp;(<a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>-&gt;sin_addr) ,w,x,y,z );</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    i = (int) <a class="code" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol</a>(port, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 10); <span class="comment">// set the port</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>-&gt;sin_port = <a class="code" href="byteorder_8h.html#a858d7fefb3d9201473f83a70ca8ee799">htons</a>(i);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="nprintf_8c.html#ae54c71aca8f24cab5b20f9044f5255c8">server</a>-&gt;sin_family = <a class="code" href="tcpip_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#if 1</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        char_ptr = url;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">while</span>(*char_ptr != <span class="charliteral">&#39;/&#39;</span>) char_ptr++;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> char_ptr;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> url;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="ttc" id="abyteorder_8h_html_a858d7fefb3d9201473f83a70ca8ee799"><div class="ttname"><a href="byteorder_8h.html#a858d7fefb3d9201473f83a70ca8ee799">htons</a></div><div class="ttdeci">unsigned short htons(unsigned short x)</div><div class="ttdef"><b>Definition:</b> <a href="byteorder_8h_source.html#l00037">byteorder.h:37</a></div></div>
<div class="ttc" id="aps2http_8c_html_a15d53301900c46a9be3df42045dff53a"><div class="ttname"><a href="ps2http_8c.html#a15d53301900c46a9be3df42045dff53a">_ResolveHostname</a></div><div class="ttdeci">static int _ResolveHostname(const char *hostname, struct in_addr *ip)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00241">ps2http.c:241</a></div></div>
<div class="ttc" id="astructip4__addr_html"><div class="ttname"><a href="structip4__addr.html">ip4_addr</a></div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l00201">tcpip.h:201</a></div></div>
<div class="ttc" id="asysclib_8h_html_a7a82515b5d377be04817715c5465b647"><div class="ttname"><a href="sysclib_8h.html#a7a82515b5d377be04817715c5465b647">strcpy</a></div><div class="ttdeci">char * strcpy(char *dest, const char *src)</div></div>
<div class="ttc" id="atcpip_8h_html_a58aee4166c466f9ac7035bf5cc9f9974"><div class="ttname"><a href="tcpip_8h.html#a58aee4166c466f9ac7035bf5cc9f9974">IP4_ADDR</a></div><div class="ttdeci">#define IP4_ADDR(ipaddr, a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l00254">tcpip.h:254</a></div></div>
<div class="ttc" id="atcpip_8h_html_a9930604d0e32588eae76f43ca38e7826"><div class="ttname"><a href="tcpip_8h.html#a9930604d0e32588eae76f43ca38e7826">AF_INET</a></div><div class="ttdeci">#define AF_INET</div><div class="ttdef"><b>Definition:</b> <a href="tcpip_8h_source.html#l01393">tcpip.h:1393</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ps2http_8c_source.html#l00241">_ResolveHostname()</a>, <a class="el" href="tcpip_8h_source.html#l01393">AF_INET</a>, <a class="el" href="ps2http_8c_source.html#l00047">DBG_printf</a>, <a class="el" href="byteorder_8h_source.html#l00037">htons()</a>, <a class="el" href="tcpip_8h_source.html#l00254">IP4_ADDR</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf()</a>, <a class="el" href="nprintf_8c_source.html#l00044">server</a>, <a class="el" href="sysclib_8h.html#a7a82515b5d377be04817715c5465b647">strcpy()</a>, <a class="el" href="sysclib_8h.html#aa383452fe445bfae989358c9d7d96f4f">strlen()</a>, and <a class="el" href="sysclib_8h.html#ae95e62b7cb290c47fc98c27a8c04b724">strtol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00380">httpOpen()</a>.</p>

</div>
</div>
<a id="aafda629f4ec1d3d34307aaa5ba919cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafda629f4ec1d3d34307aaa5ba919cb4">&#9670;&nbsp;</a></span>strnchr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* strnchr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00231">231</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                           {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">for</span>(i = 0; (i &lt; max) &amp;&amp; (str[i] != <span class="charliteral">&#39;\0&#39;</span>); i++)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span>(str[i] == ch)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">return</span>(&amp;str[i]);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="defs_8h_source.html#l00022">NULL</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a169c7780895c32aeb55b1da36b7505d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a169c7780895c32aeb55b1da36b7505d8">&#9670;&nbsp;</a></span>HTTPENDHEADER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HTTPENDHEADER[] = &quot;\r\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00065">65</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="ab66f8b87321d5646498beafdd02d2201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab66f8b87321d5646498beafdd02d2201">&#9670;&nbsp;</a></span>HTTPGET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HTTPGET[] = &quot;GET &quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00061">61</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="a13b75d7d60d044c7abec005561574052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b75d7d60d044c7abec005561574052">&#9670;&nbsp;</a></span>HTTPGETEND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HTTPGETEND[] = &quot; HTTP/1.0\r\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00063">63</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="a6c366a167321786b922302336d265d59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c366a167321786b922302336d265d59">&#9670;&nbsp;</a></span>HTTPHOST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HTTPHOST[] = &quot;Host: &quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00062">62</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="aa490ae7e95ebc5e999d7b64e222dd4e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa490ae7e95ebc5e999d7b64e222dd4e1">&#9670;&nbsp;</a></span>HTTPUSERAGENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char HTTPUSERAGENT[] = &quot;User-Agent: PS2IP HTTP Client\r\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00064">64</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00152">httpConnect()</a>.</p>

</div>
</div>
<a id="ad74339a3414946388b98247bb1e6a725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad74339a3414946388b98247bb1e6a725">&#9670;&nbsp;</a></span>ps2httpDev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiop__io__device__t.html">iop_io_device_t</a> ps2httpDev</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        <span class="stringliteral">&quot;http&quot;</span>,</div>
<div class="line">        <a class="code" href="ioman_8h.html#a22b20053e5c3f370c609d54970cead59">IOP_DT_FS</a>,</div>
<div class="line">        1,</div>
<div class="line">        <span class="stringliteral">&quot;HTTP client file driver&quot;</span>,</div>
<div class="line">        &amp;<a class="code" href="ps2http_8c.html#ae6a07c39c17b6e23f20c03f5f636ba16">ps2httpOps</a></div>
<div class="line">}</div>
<div class="ttc" id="aioman_8h_html_a22b20053e5c3f370c609d54970cead59"><div class="ttname"><a href="ioman_8h.html#a22b20053e5c3f370c609d54970cead59">IOP_DT_FS</a></div><div class="ttdeci">#define IOP_DT_FS</div><div class="ttdef"><b>Definition:</b> <a href="ioman_8h_source.html#l00046">ioman.h:46</a></div></div>
<div class="ttc" id="aps2http_8c_html_ae6a07c39c17b6e23f20c03f5f636ba16"><div class="ttname"><a href="ps2http_8c.html#ae6a07c39c17b6e23f20c03f5f636ba16">ps2httpOps</a></div><div class="ttdeci">iop_io_device_ops_t ps2httpOps</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00514">ps2http.c:514</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00520">520</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ps2http_8c_source.html#l00532">_start()</a>.</p>

</div>
</div>
<a id="ae6a07c39c17b6e23f20c03f5f636ba16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a07c39c17b6e23f20c03f5f636ba16">&#9670;&nbsp;</a></span>ps2httpOps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiop__io__device__ops__t.html">iop_io_device_ops_t</a> ps2httpOps</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        <a class="code" href="ps2http_8c.html#a1f5ef0308dbb9ff2674ae0b2923aa9d7">httpInitialize</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#aa5a48097d7a335da63612b181278c285">httpOpen</a>, <a class="code" href="ps2http_8c.html#a41f071fff13da835ba201d99addbbe65">httpClose</a>, <a class="code" href="ps2http_8c.html#ab5aa5de2bfda4198b412a35c1774f1b1">httpRead</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a7d221f0601822833945aa42a664ca407">httpLseek</a>,</div>
<div class="line">        <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>, <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a>,</div>
<div class="line">        <a class="code" href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a></div>
<div class="line">}</div>
<div class="ttc" id="aps2http_8c_html_a1f5ef0308dbb9ff2674ae0b2923aa9d7"><div class="ttname"><a href="ps2http_8c.html#a1f5ef0308dbb9ff2674ae0b2923aa9d7">httpInitialize</a></div><div class="ttdeci">int httpInitialize(iop_io_device_t *driver)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00364">ps2http.c:364</a></div></div>
<div class="ttc" id="aps2http_8c_html_a41f071fff13da835ba201d99addbbe65"><div class="ttname"><a href="ps2http_8c.html#a41f071fff13da835ba201d99addbbe65">httpClose</a></div><div class="ttdeci">int httpClose(iop_io_file_t *f)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00465">ps2http.c:465</a></div></div>
<div class="ttc" id="aps2http_8c_html_a68cbdd3e884ae6be84a4d05ef2d93d6e"><div class="ttname"><a href="ps2http_8c.html#a68cbdd3e884ae6be84a4d05ef2d93d6e">httpDummy</a></div><div class="ttdeci">int httpDummy()</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00358">ps2http.c:358</a></div></div>
<div class="ttc" id="aps2http_8c_html_a7d221f0601822833945aa42a664ca407"><div class="ttname"><a href="ps2http_8c.html#a7d221f0601822833945aa42a664ca407">httpLseek</a></div><div class="ttdeci">int httpLseek(iop_io_file_t *f, int offset, int mode)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00484">ps2http.c:484</a></div></div>
<div class="ttc" id="aps2http_8c_html_aa5a48097d7a335da63612b181278c285"><div class="ttname"><a href="ps2http_8c.html#aa5a48097d7a335da63612b181278c285">httpOpen</a></div><div class="ttdeci">int httpOpen(iop_io_file_t *f, const char *name, int mode)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00380">ps2http.c:380</a></div></div>
<div class="ttc" id="aps2http_8c_html_ab5aa5de2bfda4198b412a35c1774f1b1"><div class="ttname"><a href="ps2http_8c.html#ab5aa5de2bfda4198b412a35c1774f1b1">httpRead</a></div><div class="ttdeci">int httpRead(iop_io_file_t *f, void *buffer, int size)</div><div class="ttdef"><b>Definition:</b> <a href="ps2http_8c_source.html#l00429">ps2http.c:429</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00514">514</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

</div>
</div>
<a id="a0355f6a4959309e412adb034e6bc4cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0355f6a4959309e412adb034e6bc4cc9">&#9670;&nbsp;</a></span>strTest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char strTest[] = &quot;GET /blah HTTP/1.0\n\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ps2http_8c_source.html#l00059">59</a> of file <a class="el" href="ps2http_8c_source.html">ps2http.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0981ace215aa2029f526b70c145b9fbe.html">iop</a></li><li class="navelem"><a class="el" href="dir_f24daea2522ffa8b6dc5fa9cdf5b8f5c.html">fs</a></li><li class="navelem"><a class="el" href="dir_bb1a65baea34b53b4bbf06e6d3ddfe57.html">http</a></li><li class="navelem"><a class="el" href="dir_dfd0648f7ccdaeb6e4c87cb596a9ba55.html">src</a></li><li class="navelem"><a class="el" href="ps2http_8c.html">ps2http.c</a></li>
    <li class="footer">Generated on Thu Feb 11 2021 11:42:43 for ps2sdk by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
