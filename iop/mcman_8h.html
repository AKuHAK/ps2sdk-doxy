<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ps2sdk: iop/memorycard/mcman/include/mcman.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="code.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ps2sdk
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">A collection of Open Source libraries used for developing applications on Sony&#39;s PlayStation 2Â® (PS2).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mcman_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mcman.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="irx_8h_source.html">irx.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="libmc-common_8h_source.html">libmc-common.h</a>&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for mcman.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="mcman_8h__incl.svg" width="307" height="276"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="mcman_8h__dep__incl.svg" width="100%" height="473"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="mcman_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsceMcTblGetDir.html">sceMcTblGetDir</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6d4c0d43fab5639ee77f10a662726100"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a6d4c0d43fab5639ee77f10a662726100">mcman_IMPORTS_start</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a3125c3c0bbbb9850d5933462ae1364c3">DECLARE_IMPORT_TABLE</a>(mcman, 1, 1)</td></tr>
<tr class="separator:a6d4c0d43fab5639ee77f10a662726100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf1c741a313e1e13b83c0efadb21671"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a7bf1c741a313e1e13b83c0efadb21671">mcman_IMPORTS_end</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a1c46e832a517d26f88b0218c5c7ba295">END_IMPORT_TABLE</a></td></tr>
<tr class="separator:a7bf1c741a313e1e13b83c0efadb21671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55325cd0af764f50537828b44c6e1503"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a55325cd0af764f50537828b44c6e1503">xmcman_IMPORTS_start</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a3125c3c0bbbb9850d5933462ae1364c3">DECLARE_IMPORT_TABLE</a>(mcman, 2, 3)</td></tr>
<tr class="separator:a55325cd0af764f50537828b44c6e1503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f69ecab33067b0cba056ea24aaf0ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a34f69ecab33067b0cba056ea24aaf0ea">xmcman_IMPORTS_end</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a1c46e832a517d26f88b0218c5c7ba295">END_IMPORT_TABLE</a></td></tr>
<tr class="separator:a34f69ecab33067b0cba056ea24aaf0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60618ffd0558b42053203f40ef2da5c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a60618ffd0558b42053203f40ef2da5c3">I_McDetectCard</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(5, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>)</td></tr>
<tr class="separator:a60618ffd0558b42053203f40ef2da5c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14722a93083f4f80283b43cd2541689c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a14722a93083f4f80283b43cd2541689c">I_McOpen</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(6, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a3ddc2ac519af376ab74a99c978025c88">McOpen</a>)</td></tr>
<tr class="separator:a14722a93083f4f80283b43cd2541689c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34f66258aee26396c3e576df7f580a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#af34f66258aee26396c3e576df7f580a3">I_McClose</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(7, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac9551ddafe815cd512ec9483b58a54f1">McClose</a>)</td></tr>
<tr class="separator:af34f66258aee26396c3e576df7f580a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364d5877f2f265b644caf6c3a28179f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a364d5877f2f265b644caf6c3a28179f3">I_McRead</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(8, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aab0f3e0acebe128863390bc1df6bfae5">McRead</a>)</td></tr>
<tr class="separator:a364d5877f2f265b644caf6c3a28179f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964b1ec0725487f550714fc886ab442d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a964b1ec0725487f550714fc886ab442d">I_McWrite</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(9, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a493d771509ef67c3fc09eb42b6b959d6">McWrite</a>)</td></tr>
<tr class="separator:a964b1ec0725487f550714fc886ab442d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89af5585cb3ef19a0843cc1932e86bc9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a89af5585cb3ef19a0843cc1932e86bc9">I_McSeek</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(10, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#afa72d82fc251f43fa87eba2b94efe37a">McSeek</a>)</td></tr>
<tr class="separator:a89af5585cb3ef19a0843cc1932e86bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8fafbe37c137f8508b0aa2ca5caf8e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ae8fafbe37c137f8508b0aa2ca5caf8e1">I_McFormat</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(11, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#afcc6922375a5ac15a09ff2eddef82fae">McFormat</a>)</td></tr>
<tr class="separator:ae8fafbe37c137f8508b0aa2ca5caf8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab45e325ba845b63ffdf0400273b99e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a4ab45e325ba845b63ffdf0400273b99e">I_McGetDir</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(12, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a3c74623f70c6dad0480e0bd7160a7403">McGetDir</a>)</td></tr>
<tr class="separator:a4ab45e325ba845b63ffdf0400273b99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c201ec14264433b131387a292a92e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ab5c201ec14264433b131387a292a92e0">I_McDelete</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(13, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#adddbac8c6a1eb9c0602ea732a736f1a9">McDelete</a>)</td></tr>
<tr class="separator:ab5c201ec14264433b131387a292a92e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659db287c79f3f04b39dfba48a527502"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a659db287c79f3f04b39dfba48a527502">I_McFlush</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(14, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aebd97fafa08ca6e3ea16097eb62c37cb">McFlush</a>)</td></tr>
<tr class="separator:a659db287c79f3f04b39dfba48a527502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250c980e4caf1fee2321c1640940c8f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a250c980e4caf1fee2321c1640940c8f5">I_McChDir</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(15, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ab4aa96a9f4940e621144d5eae9a2f867">McChDir</a>)</td></tr>
<tr class="separator:a250c980e4caf1fee2321c1640940c8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91562d26b723f32d4837ba21d3707d0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a91562d26b723f32d4837ba21d3707d0d">I_McSetFileInfo</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(16, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac81c65bf6589bfdb29fc6707a805972a">McSetFileInfo</a>)</td></tr>
<tr class="separator:a91562d26b723f32d4837ba21d3707d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fd43cd31008193188a503c767fb396"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#af4fd43cd31008193188a503c767fb396">I_McEraseBlock</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(17, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a38d8456724612cd60a2859f3ed08022e">McEraseBlock</a>)</td></tr>
<tr class="separator:af4fd43cd31008193188a503c767fb396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1499fe44a82c93f703a77101fd2c3344"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a1499fe44a82c93f703a77101fd2c3344">I_McReadPage</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(18, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ab6979316408085a90febcf40f3f6c8c1">McReadPage</a>)</td></tr>
<tr class="separator:a1499fe44a82c93f703a77101fd2c3344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c7afcb8a9ec1915b3cc3f191bb2e88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a27c7afcb8a9ec1915b3cc3f191bb2e88">I_McWritePage</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(19, <a class="el" href="mcsio2_8c.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a>)</td></tr>
<tr class="separator:a27c7afcb8a9ec1915b3cc3f191bb2e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93c4d47cabd3fca97f640c19ad0bf4a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a93c4d47cabd3fca97f640c19ad0bf4a5">I_McDataChecksum</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(20, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a0e5349e8abdecfe20a2d27655b328c3d">McDataChecksum</a>);</td></tr>
<tr class="separator:a93c4d47cabd3fca97f640c19ad0bf4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e52a243fc089b5648cb4f874fe2a8aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a2e52a243fc089b5648cb4f874fe2a8aa">I_McReadPS1PDACard</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(29,  <a class="el" href="mcsio2_8c.html#a8f0d8b436a3cdd239f34af978a1c5ecf">McReadPS1PDACard</a>)</td></tr>
<tr class="separator:a2e52a243fc089b5648cb4f874fe2a8aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a090828c00436af5f919b315a9d191132"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a090828c00436af5f919b315a9d191132">I_McWritePS1PDACard</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(30, <a class="el" href="mcsio2_8c.html#a94c12e85c579c5437e8a62166fbd2b39">McWritePS1PDACard</a>)</td></tr>
<tr class="separator:a090828c00436af5f919b315a9d191132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa409ec91f71f2f6cac6b82f79aef32c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aa409ec91f71f2f6cac6b82f79aef32c0">I_McUnformat</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(36, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac81321058fcccbe2a581ee2f7b934ba6">McUnformat</a>)</td></tr>
<tr class="separator:aa409ec91f71f2f6cac6b82f79aef32c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b6ee915b262e9b9d2fffce8a1cd4749"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a0b6ee915b262e9b9d2fffce8a1cd4749">I_McRetOnly</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(37, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a8add312666a48f43066792aea66e7529">McRetOnly</a>)</td></tr>
<tr class="separator:a0b6ee915b262e9b9d2fffce8a1cd4749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ed172580e46758add8edf061a2504b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a94ed172580e46758add8edf061a2504b">I_McGetFreeClusters</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(38, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac481176507790a4349ecb1445a7511bf">McGetFreeClusters</a>)</td></tr>
<tr class="separator:a94ed172580e46758add8edf061a2504b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a368980b0803ee42577c52064cb5cbd8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a368980b0803ee42577c52064cb5cbd8f">I_McGetMcType</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(39, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a49841abb49cde35763b70f94036327dd">McGetMcType</a>)</td></tr>
<tr class="separator:a368980b0803ee42577c52064cb5cbd8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a976c22981ef506a8880b548bac7b3d48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a976c22981ef506a8880b548bac7b3d48">I_McSetPS1CardFlag</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(40, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#af511671b444f7a9e3952c3afbaeb452b">McSetPS1CardFlag</a>)</td></tr>
<tr class="separator:a976c22981ef506a8880b548bac7b3d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75380d45a5f4655526129fca954c4fe6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a75380d45a5f4655526129fca954c4fe6">I_McEraseBlock2</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(17, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a9d999ad6f6e26c42af230ad957a4ac42">McEraseBlock2</a>)</td></tr>
<tr class="separator:a75380d45a5f4655526129fca954c4fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b665331fdd7032de7a4a59b67dad19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a06b665331fdd7032de7a4a59b67dad19">I_McDetectCard2</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(21, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a78a9559a1e904122f10e0ebbf5c25bf6">McDetectCard2</a>)</td></tr>
<tr class="separator:a06b665331fdd7032de7a4a59b67dad19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a641f2cbaf0e9ba1ab7e4bdbc7d92b5a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a641f2cbaf0e9ba1ab7e4bdbc7d92b5a9">I_McGetFormat</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(22, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a07468e93522d6cc4bd70f22955e58ab9">McGetFormat</a>)</td></tr>
<tr class="separator:a641f2cbaf0e9ba1ab7e4bdbc7d92b5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a334185974937b367476b192259df2f6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a334185974937b367476b192259df2f6b">I_McGetEntSpace</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(23, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a40e1aec371d6458d78f98fed3910b59e">McGetEntSpace</a>)</td></tr>
<tr class="separator:a334185974937b367476b192259df2f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae86d211908e31a0a4b35d9d113c8c171"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ae86d211908e31a0a4b35d9d113c8c171">I_McReplaceBadBlock</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(24, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae124de9bb48241943dd7a58fec72b549">McReplaceBadBlock</a>)</td></tr>
<tr class="separator:ae86d211908e31a0a4b35d9d113c8c171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb28b29b49007f6033fb5187ccd60e75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aeb28b29b49007f6033fb5187ccd60e75">I_McCloseAll</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(25, <a class="el" href="mcman-internal_8h.html#a3b38b87ff3eaeb9a798675197c9f6687">McCloseAll</a>)</td></tr>
<tr class="separator:aeb28b29b49007f6033fb5187ccd60e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245721dfd6040d78b76d1d1055c6c3b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a245721dfd6040d78b76d1d1055c6c3b9">I_McGetModuleInfo</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(42, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a653422f031ff025d6452fa89d6447027">McGetModuleInfo</a>)</td></tr>
<tr class="separator:a245721dfd6040d78b76d1d1055c6c3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320f1028d6bfc5d3915dd1c22b9a5166"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a320f1028d6bfc5d3915dd1c22b9a5166">I_McGetCardSpec</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(43,  <a class="el" href="mcsio2_8c.html#a69f5c8d3e0adb3fa2230bd7d8a0c37fe">McGetCardSpec</a>)</td></tr>
<tr class="separator:a320f1028d6bfc5d3915dd1c22b9a5166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a45fe17b8b97ca9901c1a046965089e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a9a45fe17b8b97ca9901c1a046965089e">I_McGetFATentry</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(44, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>)</td></tr>
<tr class="separator:a9a45fe17b8b97ca9901c1a046965089e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17916f08bf3ba122e3c5d93ce1d90f6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a17916f08bf3ba122e3c5d93ce1d90f6c">I_McCheckBlock</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(45, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#abaf3fcdb1c91e44f9fbe41bee3bee816">McCheckBlock</a>)</td></tr>
<tr class="separator:a17916f08bf3ba122e3c5d93ce1d90f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f00aebc5e7a9b94c48f1fda7da8f67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ac8f00aebc5e7a9b94c48f1fda7da8f67">I_McSetFATentry</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(46, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>)</td></tr>
<tr class="separator:ac8f00aebc5e7a9b94c48f1fda7da8f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0505ec56490e999fc67821416a9b69e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a0505ec56490e999fc67821416a9b69e4">I_McReadDirEntry</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(47, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>)</td></tr>
<tr class="separator:a0505ec56490e999fc67821416a9b69e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd05cc2652ddc60f614f77bb5fb63805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#afd05cc2652ddc60f614f77bb5fb63805">I_Mc1stCacheEntSetWrFlagOff</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(48, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>)</td></tr>
<tr class="separator:afd05cc2652ddc60f614f77bb5fb63805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e27460c6d669f0ec37689f6416c1e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#af2e27460c6d669f0ec37689f6416c1e3">I_McCreateDirentry</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(49, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#af1b9f8e348e8c8a9b03988c2642d26c6">McCreateDirentry</a>)</td></tr>
<tr class="separator:af2e27460c6d669f0ec37689f6416c1e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fdf4882300e28e84921135856166ef5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a3fdf4882300e28e84921135856166ef5">I_McReadCluster</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(50, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>)</td></tr>
<tr class="separator:a3fdf4882300e28e84921135856166ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc6cecbd65bcb3adc7acfb0a5380fdd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a3cc6cecbd65bcb3adc7acfb0a5380fdd">I_McFlushCache</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(51, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>)</td></tr>
<tr class="separator:a3cc6cecbd65bcb3adc7acfb0a5380fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2078d8f51da48c0596e87299347ea45b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a2078d8f51da48c0596e87299347ea45b">I_McSetDirEntryState</a>&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(52, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a8c036d7e95572e7310691d79b8a5c217">McSetDirEntryState</a>)</td></tr>
<tr class="separator:a2078d8f51da48c0596e87299347ea45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae0657a5d9d48dfabf05aa59a97613d3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a> (int port, int slot)</td></tr>
<tr class="separator:ae0657a5d9d48dfabf05aa59a97613d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457198cd95144a875ffdc966e3ddb396"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a457198cd95144a875ffdc966e3ddb396">McOpen</a> (int port, int slot, char *filename, int flags)</td></tr>
<tr class="separator:a457198cd95144a875ffdc966e3ddb396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9551ddafe815cd512ec9483b58a54f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ac9551ddafe815cd512ec9483b58a54f1">McClose</a> (int fd)</td></tr>
<tr class="separator:ac9551ddafe815cd512ec9483b58a54f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab0f3e0acebe128863390bc1df6bfae5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aab0f3e0acebe128863390bc1df6bfae5">McRead</a> (int fd, void *buf, int length)</td></tr>
<tr class="separator:aab0f3e0acebe128863390bc1df6bfae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a493d771509ef67c3fc09eb42b6b959d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a493d771509ef67c3fc09eb42b6b959d6">McWrite</a> (int fd, void *buf, int length)</td></tr>
<tr class="separator:a493d771509ef67c3fc09eb42b6b959d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa72d82fc251f43fa87eba2b94efe37a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#afa72d82fc251f43fa87eba2b94efe37a">McSeek</a> (int fd, int offset, int origin)</td></tr>
<tr class="separator:afa72d82fc251f43fa87eba2b94efe37a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc6922375a5ac15a09ff2eddef82fae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#afcc6922375a5ac15a09ff2eddef82fae">McFormat</a> (int port, int slot)</td></tr>
<tr class="separator:afcc6922375a5ac15a09ff2eddef82fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c74623f70c6dad0480e0bd7160a7403"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a3c74623f70c6dad0480e0bd7160a7403">McGetDir</a> (int port, int slot, char *dirname, int flags, int maxent, <a class="el" href="structsceMcTblGetDir.html">sceMcTblGetDir</a> *<a class="el" href="structinfo.html">info</a>)</td></tr>
<tr class="separator:a3c74623f70c6dad0480e0bd7160a7403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adddbac8c6a1eb9c0602ea732a736f1a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#adddbac8c6a1eb9c0602ea732a736f1a9">McDelete</a> (int port, int slot, char *filename, int flags)</td></tr>
<tr class="separator:adddbac8c6a1eb9c0602ea732a736f1a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd97fafa08ca6e3ea16097eb62c37cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aebd97fafa08ca6e3ea16097eb62c37cb">McFlush</a> (int fd)</td></tr>
<tr class="separator:aebd97fafa08ca6e3ea16097eb62c37cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4aa96a9f4940e621144d5eae9a2f867"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ab4aa96a9f4940e621144d5eae9a2f867">McChDir</a> (int port, int slot, char *newdir, char *currentdir)</td></tr>
<tr class="separator:ab4aa96a9f4940e621144d5eae9a2f867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81c65bf6589bfdb29fc6707a805972a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ac81c65bf6589bfdb29fc6707a805972a">McSetFileInfo</a> (int port, int slot, char *filename, <a class="el" href="structsceMcTblGetDir.html">sceMcTblGetDir</a> *<a class="el" href="structinfo.html">info</a>, int flags)</td></tr>
<tr class="separator:ac81c65bf6589bfdb29fc6707a805972a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d8456724612cd60a2859f3ed08022e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a38d8456724612cd60a2859f3ed08022e">McEraseBlock</a> (int port, int block, void **pagebuf, void *eccbuf)</td></tr>
<tr class="separator:a38d8456724612cd60a2859f3ed08022e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6979316408085a90febcf40f3f6c8c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ab6979316408085a90febcf40f3f6c8c1">McReadPage</a> (int port, int slot, int page, void *buf)</td></tr>
<tr class="separator:ab6979316408085a90febcf40f3f6c8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47716ae6ef31281e5e3fea6fa2f0f27"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a> (int port, int slot, int page, void *pagebuf, void *eccbuf)</td></tr>
<tr class="separator:aa47716ae6ef31281e5e3fea6fa2f0f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5349e8abdecfe20a2d27655b328c3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a0e5349e8abdecfe20a2d27655b328c3d">McDataChecksum</a> (void *buf, void *ecc)</td></tr>
<tr class="separator:a0e5349e8abdecfe20a2d27655b328c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f0d8b436a3cdd239f34af978a1c5ecf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a8f0d8b436a3cdd239f34af978a1c5ecf">McReadPS1PDACard</a> (int port, int slot, int page, void *buf)</td></tr>
<tr class="separator:a8f0d8b436a3cdd239f34af978a1c5ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c12e85c579c5437e8a62166fbd2b39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a94c12e85c579c5437e8a62166fbd2b39">McWritePS1PDACard</a> (int port, int slot, int page, void *buf)</td></tr>
<tr class="separator:a94c12e85c579c5437e8a62166fbd2b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81321058fcccbe2a581ee2f7b934ba6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ac81321058fcccbe2a581ee2f7b934ba6">McUnformat</a> (int port, int slot)</td></tr>
<tr class="separator:ac81321058fcccbe2a581ee2f7b934ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8add312666a48f43066792aea66e7529"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a8add312666a48f43066792aea66e7529">McRetOnly</a> (int fd)</td></tr>
<tr class="separator:a8add312666a48f43066792aea66e7529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac481176507790a4349ecb1445a7511bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ac481176507790a4349ecb1445a7511bf">McGetFreeClusters</a> (int port, int slot)</td></tr>
<tr class="separator:ac481176507790a4349ecb1445a7511bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49841abb49cde35763b70f94036327dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a49841abb49cde35763b70f94036327dd">McGetMcType</a> (int port, int slot)</td></tr>
<tr class="separator:a49841abb49cde35763b70f94036327dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af511671b444f7a9e3952c3afbaeb452b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#af511671b444f7a9e3952c3afbaeb452b">McSetPS1CardFlag</a> (int flag)</td></tr>
<tr class="separator:af511671b444f7a9e3952c3afbaeb452b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d999ad6f6e26c42af230ad957a4ac42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a9d999ad6f6e26c42af230ad957a4ac42">McEraseBlock2</a> (int port, int slot, int block, void **pagebuf, void *eccbuf)</td></tr>
<tr class="separator:a9d999ad6f6e26c42af230ad957a4ac42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a9559a1e904122f10e0ebbf5c25bf6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a78a9559a1e904122f10e0ebbf5c25bf6">McDetectCard2</a> (int port, int slot)</td></tr>
<tr class="separator:a78a9559a1e904122f10e0ebbf5c25bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07468e93522d6cc4bd70f22955e58ab9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a07468e93522d6cc4bd70f22955e58ab9">McGetFormat</a> (int port, int slot)</td></tr>
<tr class="separator:a07468e93522d6cc4bd70f22955e58ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e1aec371d6458d78f98fed3910b59e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a40e1aec371d6458d78f98fed3910b59e">McGetEntSpace</a> (int port, int slot, char *dirname)</td></tr>
<tr class="separator:a40e1aec371d6458d78f98fed3910b59e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae124de9bb48241943dd7a58fec72b549"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ae124de9bb48241943dd7a58fec72b549">McReplaceBadBlock</a> (void)</td></tr>
<tr class="separator:ae124de9bb48241943dd7a58fec72b549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b38b87ff3eaeb9a798675197c9f6687"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a3b38b87ff3eaeb9a798675197c9f6687">McCloseAll</a> (void)</td></tr>
<tr class="separator:a3b38b87ff3eaeb9a798675197c9f6687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653422f031ff025d6452fa89d6447027"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structirx__id.html">irx_id</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a653422f031ff025d6452fa89d6447027">McGetModuleInfo</a> (void)</td></tr>
<tr class="separator:a653422f031ff025d6452fa89d6447027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f5c8d3e0adb3fa2230bd7d8a0c37fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a69f5c8d3e0adb3fa2230bd7d8a0c37fe">McGetCardSpec</a> (int port, int slot, <a class="el" href="tamtypes_8h.html#a5ffa4f640862b25ba6d4f635b78bdbe1">s16</a> *pagesize, <a class="el" href="tamtypes_8h.html#a9e6c91d77e24643b888dbd1a1a590054">u16</a> *blocksize, int *cardsize, <a class="el" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *flags)</td></tr>
<tr class="separator:a69f5c8d3e0adb3fa2230bd7d8a0c37fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82da60cd38fc82c43c968d3a2783fbc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a> (int port, int slot, int fat_index, int *fat_entry)</td></tr>
<tr class="separator:ae82da60cd38fc82c43c968d3a2783fbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf3fcdb1c91e44f9fbe41bee3bee816"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#abaf3fcdb1c91e44f9fbe41bee3bee816">McCheckBlock</a> (int port, int slot, int block)</td></tr>
<tr class="separator:abaf3fcdb1c91e44f9fbe41bee3bee816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9ed6cbee4685e243590768ee13af29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a> (int port, int slot, int fat_index, int fat_entry)</td></tr>
<tr class="separator:a0c9ed6cbee4685e243590768ee13af29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53473e878971e2da32e3c57bc576fb5f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a> (int port, int slot, int cluster, int fsindex, <a class="el" href="structMcFsEntry.html">McFsEntry</a> **pfse)</td></tr>
<tr class="separator:a53473e878971e2da32e3c57bc576fb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f097135e77088aeb4dd556542c1cf4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a> (void)</td></tr>
<tr class="separator:a6f097135e77088aeb4dd556542c1cf4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b9f8e348e8c8a9b03988c2642d26c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#af1b9f8e348e8c8a9b03988c2642d26c6">McCreateDirentry</a> (int port, int slot, int parent_cluster, int num_entries, int cluster, <a class="el" href="structsceMcStDateTime.html">sceMcStDateTime</a> *ctime)</td></tr>
<tr class="separator:af1b9f8e348e8c8a9b03988c2642d26c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0e53f67c008297befbeefe1a4e4d57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a> (int port, int slot, int cluster, <a class="el" href="structMcCacheEntry.html">McCacheEntry</a> **pmce)</td></tr>
<tr class="separator:a4c0e53f67c008297befbeefe1a4e4d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74026cdd09cf20877d92bec06114650"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a> (int port, int slot)</td></tr>
<tr class="separator:aa74026cdd09cf20877d92bec06114650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c036d7e95572e7310691d79b8a5c217"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mcman_8h.html#a8c036d7e95572e7310691d79b8a5c217">McSetDirEntryState</a> (int port, int slot, int cluster, int fsindex, int flags)</td></tr>
<tr class="separator:a8c036d7e95572e7310691d79b8a5c217"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory card manager definitions </p>

<p class="definition">Definition in file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afd05cc2652ddc60f614f77bb5fb63805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd05cc2652ddc60f614f77bb5fb63805">&#9670;&nbsp;</a></span>I_Mc1stCacheEntSetWrFlagOff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_Mc1stCacheEntSetWrFlagOff&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(48, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00119">119</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a250c980e4caf1fee2321c1640940c8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250c980e4caf1fee2321c1640940c8f5">&#9670;&nbsp;</a></span>I_McChDir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McChDir&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(15, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ab4aa96a9f4940e621144d5eae9a2f867">McChDir</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00094">94</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a17916f08bf3ba122e3c5d93ce1d90f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17916f08bf3ba122e3c5d93ce1d90f6c">&#9670;&nbsp;</a></span>I_McCheckBlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McCheckBlock&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(45, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#abaf3fcdb1c91e44f9fbe41bee3bee816">McCheckBlock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00116">116</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="af34f66258aee26396c3e576df7f580a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af34f66258aee26396c3e576df7f580a3">&#9670;&nbsp;</a></span>I_McClose</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McClose&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(7, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac9551ddafe815cd512ec9483b58a54f1">McClose</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00086">86</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="aeb28b29b49007f6033fb5187ccd60e75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb28b29b49007f6033fb5187ccd60e75">&#9670;&nbsp;</a></span>I_McCloseAll</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McCloseAll&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(25, <a class="el" href="mcman-internal_8h.html#a3b38b87ff3eaeb9a798675197c9f6687">McCloseAll</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00112">112</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="af2e27460c6d669f0ec37689f6416c1e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e27460c6d669f0ec37689f6416c1e3">&#9670;&nbsp;</a></span>I_McCreateDirentry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McCreateDirentry&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(49, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#af1b9f8e348e8c8a9b03988c2642d26c6">McCreateDirentry</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00120">120</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a93c4d47cabd3fca97f640c19ad0bf4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93c4d47cabd3fca97f640c19ad0bf4a5">&#9670;&nbsp;</a></span>I_McDataChecksum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McDataChecksum&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(20, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a0e5349e8abdecfe20a2d27655b328c3d">McDataChecksum</a>);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00099">99</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="ab5c201ec14264433b131387a292a92e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c201ec14264433b131387a292a92e0">&#9670;&nbsp;</a></span>I_McDelete</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McDelete&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(13, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#adddbac8c6a1eb9c0602ea732a736f1a9">McDelete</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00092">92</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a60618ffd0558b42053203f40ef2da5c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60618ffd0558b42053203f40ef2da5c3">&#9670;&nbsp;</a></span>I_McDetectCard</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McDetectCard&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(5, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00084">84</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a06b665331fdd7032de7a4a59b67dad19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b665331fdd7032de7a4a59b67dad19">&#9670;&nbsp;</a></span>I_McDetectCard2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McDetectCard2&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(21, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a78a9559a1e904122f10e0ebbf5c25bf6">McDetectCard2</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00108">108</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="af4fd43cd31008193188a503c767fb396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4fd43cd31008193188a503c767fb396">&#9670;&nbsp;</a></span>I_McEraseBlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McEraseBlock&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(17, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a38d8456724612cd60a2859f3ed08022e">McEraseBlock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00096">96</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a75380d45a5f4655526129fca954c4fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75380d45a5f4655526129fca954c4fe6">&#9670;&nbsp;</a></span>I_McEraseBlock2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McEraseBlock2&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(17, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a9d999ad6f6e26c42af230ad957a4ac42">McEraseBlock2</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00107">107</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a659db287c79f3f04b39dfba48a527502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a659db287c79f3f04b39dfba48a527502">&#9670;&nbsp;</a></span>I_McFlush</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McFlush&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(14, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aebd97fafa08ca6e3ea16097eb62c37cb">McFlush</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00093">93</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a3cc6cecbd65bcb3adc7acfb0a5380fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc6cecbd65bcb3adc7acfb0a5380fdd">&#9670;&nbsp;</a></span>I_McFlushCache</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McFlushCache&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(51, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00122">122</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="ae8fafbe37c137f8508b0aa2ca5caf8e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8fafbe37c137f8508b0aa2ca5caf8e1">&#9670;&nbsp;</a></span>I_McFormat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McFormat&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(11, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#afcc6922375a5ac15a09ff2eddef82fae">McFormat</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00090">90</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a320f1028d6bfc5d3915dd1c22b9a5166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a320f1028d6bfc5d3915dd1c22b9a5166">&#9670;&nbsp;</a></span>I_McGetCardSpec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetCardSpec&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(43,  <a class="el" href="mcsio2_8c.html#a69f5c8d3e0adb3fa2230bd7d8a0c37fe">McGetCardSpec</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00114">114</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a4ab45e325ba845b63ffdf0400273b99e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ab45e325ba845b63ffdf0400273b99e">&#9670;&nbsp;</a></span>I_McGetDir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetDir&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(12, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a3c74623f70c6dad0480e0bd7160a7403">McGetDir</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00091">91</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a334185974937b367476b192259df2f6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334185974937b367476b192259df2f6b">&#9670;&nbsp;</a></span>I_McGetEntSpace</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetEntSpace&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(23, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a40e1aec371d6458d78f98fed3910b59e">McGetEntSpace</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00110">110</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a9a45fe17b8b97ca9901c1a046965089e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a45fe17b8b97ca9901c1a046965089e">&#9670;&nbsp;</a></span>I_McGetFATentry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetFATentry&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(44, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00115">115</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a641f2cbaf0e9ba1ab7e4bdbc7d92b5a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a641f2cbaf0e9ba1ab7e4bdbc7d92b5a9">&#9670;&nbsp;</a></span>I_McGetFormat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetFormat&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(22, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a07468e93522d6cc4bd70f22955e58ab9">McGetFormat</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00109">109</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a94ed172580e46758add8edf061a2504b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ed172580e46758add8edf061a2504b">&#9670;&nbsp;</a></span>I_McGetFreeClusters</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetFreeClusters&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(38, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac481176507790a4349ecb1445a7511bf">McGetFreeClusters</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00104">104</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a368980b0803ee42577c52064cb5cbd8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a368980b0803ee42577c52064cb5cbd8f">&#9670;&nbsp;</a></span>I_McGetMcType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetMcType&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(39, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a49841abb49cde35763b70f94036327dd">McGetMcType</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00105">105</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a245721dfd6040d78b76d1d1055c6c3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245721dfd6040d78b76d1d1055c6c3b9">&#9670;&nbsp;</a></span>I_McGetModuleInfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McGetModuleInfo&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(42, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a653422f031ff025d6452fa89d6447027">McGetModuleInfo</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00113">113</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a14722a93083f4f80283b43cd2541689c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14722a93083f4f80283b43cd2541689c">&#9670;&nbsp;</a></span>I_McOpen</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McOpen&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(6, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a3ddc2ac519af376ab74a99c978025c88">McOpen</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00085">85</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a364d5877f2f265b644caf6c3a28179f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a364d5877f2f265b644caf6c3a28179f3">&#9670;&nbsp;</a></span>I_McRead</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McRead&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(8, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#aab0f3e0acebe128863390bc1df6bfae5">McRead</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00087">87</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a3fdf4882300e28e84921135856166ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fdf4882300e28e84921135856166ef5">&#9670;&nbsp;</a></span>I_McReadCluster</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McReadCluster&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(50, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00121">121</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a0505ec56490e999fc67821416a9b69e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0505ec56490e999fc67821416a9b69e4">&#9670;&nbsp;</a></span>I_McReadDirEntry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McReadDirEntry&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(47, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00118">118</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a1499fe44a82c93f703a77101fd2c3344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1499fe44a82c93f703a77101fd2c3344">&#9670;&nbsp;</a></span>I_McReadPage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McReadPage&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(18, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ab6979316408085a90febcf40f3f6c8c1">McReadPage</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00097">97</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a2e52a243fc089b5648cb4f874fe2a8aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e52a243fc089b5648cb4f874fe2a8aa">&#9670;&nbsp;</a></span>I_McReadPS1PDACard</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McReadPS1PDACard&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(29,  <a class="el" href="mcsio2_8c.html#a8f0d8b436a3cdd239f34af978a1c5ecf">McReadPS1PDACard</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00100">100</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="ae86d211908e31a0a4b35d9d113c8c171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae86d211908e31a0a4b35d9d113c8c171">&#9670;&nbsp;</a></span>I_McReplaceBadBlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McReplaceBadBlock&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(24, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ae124de9bb48241943dd7a58fec72b549">McReplaceBadBlock</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00111">111</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a0b6ee915b262e9b9d2fffce8a1cd4749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b6ee915b262e9b9d2fffce8a1cd4749">&#9670;&nbsp;</a></span>I_McRetOnly</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McRetOnly&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(37, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a8add312666a48f43066792aea66e7529">McRetOnly</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00103">103</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a89af5585cb3ef19a0843cc1932e86bc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89af5585cb3ef19a0843cc1932e86bc9">&#9670;&nbsp;</a></span>I_McSeek</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McSeek&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(10, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#afa72d82fc251f43fa87eba2b94efe37a">McSeek</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00089">89</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a2078d8f51da48c0596e87299347ea45b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2078d8f51da48c0596e87299347ea45b">&#9670;&nbsp;</a></span>I_McSetDirEntryState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McSetDirEntryState&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(52, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a8c036d7e95572e7310691d79b8a5c217">McSetDirEntryState</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00123">123</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="ac8f00aebc5e7a9b94c48f1fda7da8f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f00aebc5e7a9b94c48f1fda7da8f67">&#9670;&nbsp;</a></span>I_McSetFATentry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McSetFATentry&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(46, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00117">117</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a91562d26b723f32d4837ba21d3707d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91562d26b723f32d4837ba21d3707d0d">&#9670;&nbsp;</a></span>I_McSetFileInfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McSetFileInfo&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(16, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac81c65bf6589bfdb29fc6707a805972a">McSetFileInfo</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00095">95</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a976c22981ef506a8880b548bac7b3d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a976c22981ef506a8880b548bac7b3d48">&#9670;&nbsp;</a></span>I_McSetPS1CardFlag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McSetPS1CardFlag&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(40, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#af511671b444f7a9e3952c3afbaeb452b">McSetPS1CardFlag</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00106">106</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="aa409ec91f71f2f6cac6b82f79aef32c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa409ec91f71f2f6cac6b82f79aef32c0">&#9670;&nbsp;</a></span>I_McUnformat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McUnformat&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(36, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#ac81321058fcccbe2a581ee2f7b934ba6">McUnformat</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00102">102</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a964b1ec0725487f550714fc886ab442d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964b1ec0725487f550714fc886ab442d">&#9670;&nbsp;</a></span>I_McWrite</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McWrite&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(9, <a class="el" href="memorycard_2mcman_2src_2main_8c.html#a493d771509ef67c3fc09eb42b6b959d6">McWrite</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00088">88</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a27c7afcb8a9ec1915b3cc3f191bb2e88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c7afcb8a9ec1915b3cc3f191bb2e88">&#9670;&nbsp;</a></span>I_McWritePage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McWritePage&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(19, <a class="el" href="mcsio2_8c.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00098">98</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a090828c00436af5f919b315a9d191132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a090828c00436af5f919b315a9d191132">&#9670;&nbsp;</a></span>I_McWritePS1PDACard</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I_McWritePS1PDACard&#160;&#160;&#160;<a class="el" href="irx_8h.html#a9007aa7b65485c6f07fa7e67d626c0d0">DECLARE_IMPORT</a>(30, <a class="el" href="mcsio2_8c.html#a94c12e85c579c5437e8a62166fbd2b39">McWritePS1PDACard</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00101">101</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a7bf1c741a313e1e13b83c0efadb21671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf1c741a313e1e13b83c0efadb21671">&#9670;&nbsp;</a></span>mcman_IMPORTS_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mcman_IMPORTS_end&#160;&#160;&#160;<a class="el" href="irx_8h.html#a1c46e832a517d26f88b0218c5c7ba295">END_IMPORT_TABLE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00079">79</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a6d4c0d43fab5639ee77f10a662726100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4c0d43fab5639ee77f10a662726100">&#9670;&nbsp;</a></span>mcman_IMPORTS_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mcman_IMPORTS_start&#160;&#160;&#160;<a class="el" href="irx_8h.html#a3125c3c0bbbb9850d5933462ae1364c3">DECLARE_IMPORT_TABLE</a>(mcman, 1, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00078">78</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a34f69ecab33067b0cba056ea24aaf0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f69ecab33067b0cba056ea24aaf0ea">&#9670;&nbsp;</a></span>xmcman_IMPORTS_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xmcman_IMPORTS_end&#160;&#160;&#160;<a class="el" href="irx_8h.html#a1c46e832a517d26f88b0218c5c7ba295">END_IMPORT_TABLE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00082">82</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<a id="a55325cd0af764f50537828b44c6e1503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55325cd0af764f50537828b44c6e1503">&#9670;&nbsp;</a></span>xmcman_IMPORTS_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xmcman_IMPORTS_start&#160;&#160;&#160;<a class="el" href="irx_8h.html#a3125c3c0bbbb9850d5933462ae1364c3">DECLARE_IMPORT_TABLE</a>(mcman, 2, 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcman_8h_source.html#l00081">81</a> of file <a class="el" href="mcman_8h_source.html">mcman.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6f097135e77088aeb4dd556542c1cf4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f097135e77088aeb4dd556542c1cf4c">&#9670;&nbsp;</a></span>Mc1stCacheEntSetWrFlagOff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Mc1stCacheEntSetWrFlagOff </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03271">3271</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;{</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce = (<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *)*<a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab6fba2bf79de33c0dcfafab77fc29883">pmcman_mccache</a>;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160; </div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> = -1;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;}</div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ab6fba2bf79de33c0dcfafab77fc29883"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ab6fba2bf79de33c0dcfafab77fc29883">pmcman_mccache</a></div><div class="ttdeci">static McCacheEntry ** pmcman_mccache</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00042">main.c:42</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html"><div class="ttname"><a href="structMcCacheEntry.html">McCacheEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00065">libmc-common.h:65</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_aff96d500fdd31b598b98b12cc0fc5f69"><div class="ttname"><a href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">McCacheEntry::wr_flag</a></div><div class="ttdeci">u8 wr_flag</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00069">libmc-common.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00042">pmcman_mccache</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00625">mcman_close2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00378">mcman_setinfo2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02177">McSetDirEntryState()</a>.</p>

</div>
</div>
<a id="ab4aa96a9f4940e621144d5eae9a2f867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4aa96a9f4940e621144d5eae9a2f867">&#9670;&nbsp;</a></span>McChDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McChDir </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>newdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>currentdir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01007">1007</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;{</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a04605d621b193088aead843c6ce24b6f">mcman_chdir</a>(port, slot, newdir, currentdir);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                currentdir[0] = 0;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                r = <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_a9d6f83eca57421bada8331386e4b90d4"><div class="ttname"><a href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a></div><div class="ttdeci">#define sceMcTypePS2</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00159">libmc-common.h:159</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_aed3a052eb49248a03c5c3b4869086914"><div class="ttname"><a href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a></div><div class="ttdeci">#define sceMcResSucceed</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00141">libmc-common.h:141</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a04605d621b193088aead843c6ce24b6f"><div class="ttname"><a href="mcman-internal_8h.html#a04605d621b193088aead843c6ce24b6f">mcman_chdir</a></div><div class="ttdeci">int mcman_chdir(int port, int slot, char *newdir, char *currentdir)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l01044">ps2mc_fio.c:1044</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a46e2957e4783a80e41b50446e082e3a9"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a></div><div class="ttdeci">MCDevInfo mcman_devinfos[4][MCMAN_MAXSLOT]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00056">main.c:56</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a7ac6618eac9091c2b6a59f23710d4877"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a></div><div class="ttdeci">void mcman_invhandles(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00450">main.c:450</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_acb89a59ea3e644ee7234b4fe1aa6bc73"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a></div><div class="ttdeci">int mcman_clearcache(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03188">main.c:3188</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ae0657a5d9d48dfabf05aa59a97613d3b"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a></div><div class="ttdeci">int McDetectCard(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00483">main.c:483</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01044">mcman_chdir()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

</div>
</div>
<a id="abaf3fcdb1c91e44f9fbe41bee3bee816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf3fcdb1c91e44f9fbe41bee3bee816">&#9670;&nbsp;</a></span>McCheckBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McCheckBlock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02324">2324</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;{</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, i, j, page, ecc_count, pageword_cnt, flag, erase_value;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p_page, *p_ecc;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160; </div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McCheckBlock port%d slot%d block 0x%x\n&quot;</span>, port, slot, block);</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <span class="comment">// sp50 = block;</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        page = block * mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; <span class="comment">//sp18</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        pageword_cnt = mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a> &gt;&gt; 2; <span class="comment">//s6</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        ecc_count = mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a> &lt; 0)</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                ecc_count += 127;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        ecc_count = ecc_count &gt;&gt; 7; <span class="comment">// s7</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        flag = 0; <span class="comment">// s4</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160; </div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">cardform</a> &gt; 0) {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] &lt;= 0)</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] == block)</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                }</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        flag = 16; <span class="comment">// s4</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a63707e16aa66bd970016f0a373b89a47">mcman_readpage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                        <span class="keywordflow">return</span> -45;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                <span class="keywordflow">if</span> ((mcdi-&gt;<a class="code" href="structMCDevInfo.html#abfd1f2e5ee9b8b16709bab1e2c895fd5">cardflags</a> &amp; <a class="code" href="mcman-internal_8h.html#ab59a87592b26819b84e35fdb643b8038">CF_USE_ECC</a>) != 0) {</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>[<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7a8b407da35ed7809b9170cbb42a256c">mcman_sparesize</a>(port, slot) - 1] != 0xff) {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                                p_page = <a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#aa77fec55c4a80d18ac195a0c2a9c002a">byte</a>; <span class="comment">//s1</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                                p_ecc = (<span class="keywordtype">void</span> *)<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>; <span class="comment">//s2</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                                <span class="keywordflow">for</span> (j = 0; j &lt; ecc_count; j++) {</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab31ccd1caaad117cb13a3ac2b680ac3d">mcman_correctdata</a>(p_page, p_ecc);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                                                flag = -1;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                        }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                                        p_ecc += 3;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                        p_page += 128;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                                }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                        }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        }</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160; </div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; pageword_cnt; j++)</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                <a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">word</a>[j] = 0x5a5aa5a5;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        for (j = 0; j &lt; 128; j++)</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a> + j) = 0x5a5aa5a5;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        r = <a class="code" href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a>(port, slot, block, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a>(port, slot);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                        <span class="keywordflow">return</span> -45;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                flag = -1;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                r = <a class="code" href="mcman_8h.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a>(port, slot);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                                <span class="keywordflow">return</span> -44;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                        flag = -1;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                        <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160; </div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a63707e16aa66bd970016f0a373b89a47">mcman_readpage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                        <span class="keywordflow">return</span> -45;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160; </div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; pageword_cnt; j++) {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">word</a>[j] != 0x5a5aa5a5) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                                flag = -1;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                        }</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 128; j++) {</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                        <span class="keywordflow">if</span> (*((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a> + j) != 0x5a5aa5a5) {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                                flag = -1;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                        }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; pageword_cnt; j++)</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                <a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">word</a>[j] = 0x05a55a5a;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        for (j = 0; j &lt; 128; j++)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a> + j) = 0x05a55a5a;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        r = <a class="code" href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a>(port, slot, block, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a>(port, slot);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                        <span class="keywordflow">return</span> -42;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                flag = -1;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        }</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                r = <a class="code" href="mcman_8h.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a>(port, slot);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                                <span class="keywordflow">return</span> -46;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                        flag = -1;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                        <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        }</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a63707e16aa66bd970016f0a373b89a47">mcman_readpage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                        <span class="keywordflow">return</span> -45;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160; </div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; pageword_cnt; j++) {</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">word</a>[j] != 0x05a55a5a) {</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                                flag = -1;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                        }</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                }</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160; </div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 128; j++) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                        <span class="keywordflow">if</span> (*((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a> + j) != 0x05a55a5a) {</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                                flag = -1;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                                <span class="keywordflow">goto</span> lbl_8764;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                        }</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160; </div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;lbl_8764:</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="keywordflow">if</span> (flag == 16) {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                <a class="code" href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a>(port, slot, block, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        erase_value = 0x00000000;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="keywordflow">if</span> ((mcdi-&gt;<a class="code" href="structMCDevInfo.html#abfd1f2e5ee9b8b16709bab1e2c895fd5">cardflags</a> &amp; <a class="code" href="mcman-internal_8h.html#af9084cab1a9095199c2cada901b8a007">CF_ERASE_ZEROES</a>) != 0)</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                erase_value = 0xffffffff;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; pageword_cnt; j++)</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                <a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>.<a class="code" href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">word</a>[j] = erase_value;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        for (j = 0; j &lt; 128; j++)</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a> + j) = erase_value;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">blocksize</a>; i++) {</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                r = <a class="code" href="mcman_8h.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a>(port, slot, page + i, &amp;<a class="code" href="unionmcman__pagebuf.html">mcman_pagebuf</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a>);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a>(port, slot);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                                <span class="keywordflow">return</span> -48;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                }</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;}</div>
<div class="ttc" id="acdfs__iop_8h_html_a7d7915a0f57c30931f76f4a981e64f6e"><div class="ttname"><a href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a></div><div class="ttdeci">#define DPRINTF(args...)</div><div class="ttdef"><b>Definition:</b> <a href="cdfs__iop_8h_source.html#l00007">cdfs_iop.h:7</a></div></div>
<div class="ttc" id="adefs_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="defs_8h_source.html#l00022">defs.h:22</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a2578c48ca98a8214fb94d4ed1313fe9f"><div class="ttname"><a href="mcman-internal_8h.html#a2578c48ca98a8214fb94d4ed1313fe9f">mcman_probePS2Card2</a></div><div class="ttdeci">int mcman_probePS2Card2(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00678">mcsio2.c:678</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a63707e16aa66bd970016f0a373b89a47"><div class="ttname"><a href="mcman-internal_8h.html#a63707e16aa66bd970016f0a373b89a47">mcman_readpage</a></div><div class="ttdeci">int mcman_readpage(int port, int slot, int page, void *buf, void *eccbuf)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00525">mcsio2.c:525</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a727d102cca44af81de35e279f4846f08"><div class="ttname"><a href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a></div><div class="ttdeci">int mcman_eraseblock(int port, int slot, int block, void **pagebuf, void *eccbuf)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00381">mcsio2.c:381</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_ab59a87592b26819b84e35fdb643b8038"><div class="ttname"><a href="mcman-internal_8h.html#ab59a87592b26819b84e35fdb643b8038">CF_USE_ECC</a></div><div class="ttdeci">#define CF_USE_ECC</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00048">mcman-internal.h:48</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_af9084cab1a9095199c2cada901b8a007"><div class="ttname"><a href="mcman-internal_8h.html#af9084cab1a9095199c2cada901b8a007">CF_ERASE_ZEROES</a></div><div class="ttdeci">#define CF_ERASE_ZEROES</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00050">mcman-internal.h:50</a></div></div>
<div class="ttc" id="amcman_8h_html_aa47716ae6ef31281e5e3fea6fa2f0f27"><div class="ttname"><a href="mcman_8h.html#aa47716ae6ef31281e5e3fea6fa2f0f27">McWritePage</a></div><div class="ttdeci">int McWritePage(int port, int slot, int page, void *pagebuf, void *eccbuf)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00454">mcsio2.c:454</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a2a1a476c440ee70c63aa5f537ac8a0ef"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a2a1a476c440ee70c63aa5f537ac8a0ef">mcman_eccdata</a></div><div class="ttdeci">u8 mcman_eccdata[512]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00058">main.c:58</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a7a8b407da35ed7809b9170cbb42a256c"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a7a8b407da35ed7809b9170cbb42a256c">mcman_sparesize</a></div><div class="ttdeci">int mcman_sparesize(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01290">main.c:1290</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ab31ccd1caaad117cb13a3ac2b680ac3d"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ab31ccd1caaad117cb13a3ac2b680ac3d">mcman_correctdata</a></div><div class="ttdeci">int mcman_correctdata(void *buf, void *ecc)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01243">main.c:1243</a></div></div>
<div class="ttc" id="astructMCDevInfo_html"><div class="ttname"><a href="structMCDevInfo.html">MCDevInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00184">mcman-internal.h:184</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a4f29dbc160f4d79199476e7c381ebe65"><div class="ttname"><a href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">MCDevInfo::pagesize</a></div><div class="ttdeci">s16 pagesize</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00187">mcman-internal.h:187</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a694bbfe1e40b2d55ee91486ab296b455"><div class="ttname"><a href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">MCDevInfo::bad_block_list</a></div><div class="ttdeci">int bad_block_list[32]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00199">mcman-internal.h:199</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a6cd6500884a375055843773df49e69ec"><div class="ttname"><a href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">MCDevInfo::cardform</a></div><div class="ttdeci">int cardform</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00206">mcman-internal.h:206</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_abfd1f2e5ee9b8b16709bab1e2c895fd5"><div class="ttname"><a href="structMCDevInfo.html#abfd1f2e5ee9b8b16709bab1e2c895fd5">MCDevInfo::cardflags</a></div><div class="ttdeci">u8 cardflags</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00201">mcman-internal.h:201</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_aed6155a53a8018703b97e8ce883a5727"><div class="ttname"><a href="structMCDevInfo.html#aed6155a53a8018703b97e8ce883a5727">MCDevInfo::blocksize</a></div><div class="ttdeci">u16 blocksize</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00189">mcman-internal.h:189</a></div></div>
<div class="ttc" id="atamtypes_8h_html_a2caf5cd7bcdbe1eefa727f44ffb10bac"><div class="ttname"><a href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a></div><div class="ttdeci">unsigned long u32</div><div class="ttdef"><b>Definition:</b> <a href="tamtypes_8h_source.html#l00044">tamtypes.h:44</a></div></div>
<div class="ttc" id="atamtypes_8h_html_aed742c436da53c1080638ce6ef7d13de"><div class="ttname"><a href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a></div><div class="ttdeci">unsigned char u8</div><div class="ttdef"><b>Definition:</b> <a href="tamtypes_8h_source.html#l00023">tamtypes.h:23</a></div></div>
<div class="ttc" id="aunionmcman__pagebuf_html"><div class="ttname"><a href="unionmcman__pagebuf.html">mcman_pagebuf</a></div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00216">mcman-internal.h:216</a></div></div>
<div class="ttc" id="aunionmcman__pagebuf_html_a47ca0da6c13649017828bf0fabb429eb"><div class="ttname"><a href="unionmcman__pagebuf.html#a47ca0da6c13649017828bf0fabb429eb">mcman_pagebuf::word</a></div><div class="ttdeci">u32 word[1056/sizeof(u32)]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00217">mcman-internal.h:217</a></div></div>
<div class="ttc" id="aunionmcman__pagebuf_html_aa77fec55c4a80d18ac195a0c2a9c002a"><div class="ttname"><a href="unionmcman__pagebuf.html#aa77fec55c4a80d18ac195a0c2a9c002a">mcman_pagebuf::byte</a></div><div class="ttdeci">u8 byte[1056/sizeof(u8)]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00218">mcman-internal.h:218</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00199">MCDevInfo::bad_block_list</a>, <a class="el" href="mcman-internal_8h_source.html#l00189">MCDevInfo::blocksize</a>, <a class="el" href="mcman-internal_8h_source.html#l00218">mcman_pagebuf::byte</a>, <a class="el" href="mcman-internal_8h_source.html#l00201">MCDevInfo::cardflags</a>, <a class="el" href="mcman-internal_8h_source.html#l00206">MCDevInfo::cardform</a>, <a class="el" href="mcman-internal_8h_source.html#l00050">CF_ERASE_ZEROES</a>, <a class="el" href="mcman-internal_8h_source.html#l00048">CF_USE_ECC</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01243">mcman_correctdata()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00058">mcman_eccdata</a>, <a class="el" href="mcsio2_8c_source.html#l00381">mcman_eraseblock()</a>, <a class="el" href="mcsio2_8c_source.html#l00678">mcman_probePS2Card2()</a>, <a class="el" href="mcsio2_8c_source.html#l00525">mcman_readpage()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01290">mcman_sparesize()</a>, <a class="el" href="mcsio2_8c_source.html#l00454">McWritePage()</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="mcman-internal_8h_source.html#l00187">MCDevInfo::pagesize</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="mcman-internal_8h_source.html#l00217">mcman_pagebuf::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>.</p>

</div>
</div>
<a id="ac9551ddafe815cd512ec9483b58a54f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9551ddafe815cd512ec9483b58a54f1">&#9670;&nbsp;</a></span>McClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McClose </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00653">653</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;{</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *fh;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        fh = (<a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd];</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a>)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9)     {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (fh-&gt;<a class="code" href="structMC__FHANDLE.html#a906ef9fc420d261a0ebaac16b1b7ab9c">unknown2</a> != 0) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#a906ef9fc420d261a0ebaac16b1b7ab9c">unknown2</a> = 0;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                mcdi = (<a class="code" href="structMCDevInfo.html">MCDevInfo</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>][fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>];</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                if (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a8e344d9e91b69404716cf10e2d71c955">mcman_close2</a>(fd);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a5f2be9b85e0a8cc6951d520ba3a4bb88">mcman_close1</a>(fd);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="keywordflow">if</span> (r &lt; -9)     {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9)     {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_ad1ac062182359bdef63f76c4c6f24322"><div class="ttname"><a href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a></div><div class="ttdeci">#define sceMcResDeniedPermit</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00146">libmc-common.h:146</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a5f2be9b85e0a8cc6951d520ba3a4bb88"><div class="ttname"><a href="mcman-internal_8h.html#a5f2be9b85e0a8cc6951d520ba3a4bb88">mcman_close1</a></div><div class="ttdeci">int mcman_close1(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00644">ps1mc_fio.c:644</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a8e344d9e91b69404716cf10e2d71c955"><div class="ttname"><a href="mcman-internal_8h.html#a8e344d9e91b69404716cf10e2d71c955">mcman_close2</a></div><div class="ttdeci">int mcman_close2(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00625">ps2mc_fio.c:625</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_ac8246c545b2f4defc9b0439a212abc32"><div class="ttname"><a href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a></div><div class="ttdeci">#define MAX_FDHANDLES</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00089">mcman-internal.h:89</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_aa74026cdd09cf20877d92bec06114650"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a></div><div class="ttdeci">int McFlushCache(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03311">main.c:3311</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_aad50f4e805d5515a50c0d09569551bee"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a></div><div class="ttdeci">MC_FHANDLE mcman_fdhandles[MAX_FDHANDLES]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00055">main.c:55</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_ab36560e2be64c4bd87b2eb27d686ab8b"><div class="ttname"><a href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">MCDevInfo::cardtype</a></div><div class="ttdeci">u8 cardtype</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00200">mcman-internal.h:200</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html"><div class="ttname"><a href="structMC__FHANDLE.html">MC_FHANDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00068">mcman-internal.h:68</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_a7040bbf79b76f74a552e09d9671253ea"><div class="ttname"><a href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">MC_FHANDLE::port</a></div><div class="ttdeci">u16 port</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00075">mcman-internal.h:75</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_a906ef9fc420d261a0ebaac16b1b7ab9c"><div class="ttname"><a href="structMC__FHANDLE.html#a906ef9fc420d261a0ebaac16b1b7ab9c">MC_FHANDLE::unknown2</a></div><div class="ttdeci">u8 unknown2</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00074">mcman-internal.h:74</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_ace18f4cd5a26d5aac905fd245a624a95"><div class="ttname"><a href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">MC_FHANDLE::slot</a></div><div class="ttdeci">u16 slot</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00076">mcman-internal.h:76</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_af077edced7fc87ecd7ed3fb0e54322a0"><div class="ttname"><a href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">MC_FHANDLE::status</a></div><div class="ttdeci">u8 status</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00069">mcman-internal.h:69</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03311">McFlushCache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00644">mcman_close1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00625">mcman_close2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="mcman-internal_8h_source.html#l00075">MC_FHANDLE::port</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>, <a class="el" href="mcman-internal_8h_source.html#l00076">MC_FHANDLE::slot</a>, <a class="el" href="mcman-internal_8h_source.html#l00069">MC_FHANDLE::status</a>, and <a class="el" href="mcman-internal_8h_source.html#l00074">MC_FHANDLE::unknown2</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00239">mc_close()</a>, <a class="el" href="mcdev_8c_source.html#l00375">mc_dclose()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00463">McCloseAll()</a>.</p>

</div>
</div>
<a id="a3b38b87ff3eaeb9a798675197c9f6687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b38b87ff3eaeb9a798675197c9f6687">&#9670;&nbsp;</a></span>McCloseAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McCloseAll </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00463">463</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> fd = 0, rv = 0;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd].<a class="code" href="IEEE1394__bd_2src_2sbp2__driver_8c.html#ae05ca492ff4accc0e319f6cf3084c5e9">status</a>) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        <span class="keyword">register</span> <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        rc = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ac9551ddafe815cd512ec9483b58a54f1">McClose</a>(fd);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        <span class="keywordflow">if</span> (rc &lt; rv)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                rv = rc;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                fd++;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        } <span class="keywordflow">while</span> (fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="ttc" id="aIEEE1394__bd_2src_2sbp2__driver_8c_html_ae05ca492ff4accc0e319f6cf3084c5e9"><div class="ttname"><a href="IEEE1394__bd_2src_2sbp2__driver_8c.html#ae05ca492ff4accc0e319f6cf3084c5e9">status</a></div><div class="ttdeci">struct sbp2_status status</div><div class="ttdef"><b>Definition:</b> <a href="IEEE1394__bd_2src_2sbp2__driver_8c_source.html#l00662">sbp2_driver.c:42</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ac9551ddafe815cd512ec9483b58a54f1"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ac9551ddafe815cd512ec9483b58a54f1">McClose</a></div><div class="ttdeci">int McClose(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00653">main.c:653</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00653">McClose()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, and <a class="el" href="IEEE1394__bd_2src_2sbp2__driver_8c_source.html#l00042">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00211">mc_deinit()</a>, and <a class="el" href="mcdev_8c_source.html#l00189">mcman_initdev()</a>.</p>

</div>
</div>
<a id="af1b9f8e348e8c8a9b03988c2642d26c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b9f8e348e8c8a9b03988c2642d26c6">&#9670;&nbsp;</a></span>McCreateDirentry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McCreateDirentry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parent_cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsceMcStDateTime.html">sceMcStDateTime</a> *&#160;</td>
          <td class="paramname"><em>ctime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01485">1485</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;{</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <a class="code" href="structMcFsEntry.html">McFsEntry</a> *mfe, *mfe_next, *pfse;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McCreateDirentry port%d slot%d parent_cluster %x num_entries %d cluster %x\n&quot;</span>, port, slot, parent_cluster, num_entries, cluster);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port, slot, mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a> + cluster, &amp;mce);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a253bbc9d432aaf1368472ee8f8f15708">mcman_wmemset</a>(mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>, <a class="code" href="mcman-internal_8h.html#a543221fa72ee630c5d492c6831b13357">MCMAN_CLUSTERSIZE</a>, 0);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        mfe = (<a class="code" href="structMcFsEntry.html">McFsEntry</a>*)mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        mfe_next = (<a class="code" href="structMcFsEntry.html">McFsEntry</a>*)(mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a> + <span class="keyword">sizeof</span> (<a class="code" href="structMcFsEntry.html">McFsEntry</a>));</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160; </div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> = <a class="code" href="libmc-common_8h.html#a09f5d1d02aa6cbed515da1b1b7e79322">sceMcFileAttrReadable</a> | <a class="code" href="libmc-common_8h.html#a278efa7e6a2d336a3c13aa6161fc95e8">sceMcFileAttrWriteable</a> | <a class="code" href="libmc-common_8h.html#a40f89f0faf662e41a95a16b9fbcf1f24">sceMcFileAttrExecutable</a> \</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                          | <a class="code" href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a> | <a class="code" href="libmc-common_8h.html#acb0e48c1e7becbcf273f6af9c6df9f98">sceMcFile0400</a> | <a class="code" href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a>; <span class="comment">// 0x8427</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keywordflow">if</span> (ctime == <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae6527774c98f08c0bda14c6312ae8219">mcman_getmcrtime</a>(&amp;mfe-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a> = *ctime;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a0f226306bfc64ddd986bea9a5907ef47">modified</a> = mfe-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a> = 0;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a> = num_entries;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = parent_cluster;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[0] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">if</span> ((parent_cluster == 0) &amp;&amp; (num_entries == 0)) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                <span class="comment">// entry is root directory</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                mfe_next-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a> = mfe-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a> = 2;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                mfe++;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> = <a class="code" href="libmc-common_8h.html#a278efa7e6a2d336a3c13aa6161fc95e8">sceMcFileAttrWriteable</a> | <a class="code" href="libmc-common_8h.html#a40f89f0faf662e41a95a16b9fbcf1f24">sceMcFileAttrExecutable</a> | <a class="code" href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a> \</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                                  | <a class="code" href="libmc-common_8h.html#acb0e48c1e7becbcf273f6af9c6df9f98">sceMcFile0400</a> | <a class="code" href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a> | <a class="code" href="libmc-common_8h.html#a219eb5b8733a0209d67bf2ee159b17ba">sceMcFileAttrHidden</a>; <span class="comment">// 0xa426</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a> = 0;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = 0;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                <span class="comment">// entry is normal &quot;.&quot; / &quot;..&quot;</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(port, slot, parent_cluster, 0, &amp;pfse);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                mfe_next-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a> = pfse-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a>;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                mfe++;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> = <a class="code" href="libmc-common_8h.html#a09f5d1d02aa6cbed515da1b1b7e79322">sceMcFileAttrReadable</a> | <a class="code" href="libmc-common_8h.html#a278efa7e6a2d336a3c13aa6161fc95e8">sceMcFileAttrWriteable</a> | <a class="code" href="libmc-common_8h.html#a40f89f0faf662e41a95a16b9fbcf1f24">sceMcFileAttrExecutable</a> \</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                  | <a class="code" href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a> | <a class="code" href="libmc-common_8h.html#acb0e48c1e7becbcf273f6af9c6df9f98">sceMcFile0400</a> | <a class="code" href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a>; <span class="comment">// 0x8427</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a> = pfse-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                mfe-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = pfse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a0f226306bfc64ddd986bea9a5907ef47">modified</a> = mfe-&gt;<a class="code" href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">created</a>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a> = 0;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[0] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[1] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        mfe-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[2] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> = 1;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_a09f5d1d02aa6cbed515da1b1b7e79322"><div class="ttname"><a href="libmc-common_8h.html#a09f5d1d02aa6cbed515da1b1b7e79322">sceMcFileAttrReadable</a></div><div class="ttdeci">#define sceMcFileAttrReadable</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00181">libmc-common.h:181</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a219eb5b8733a0209d67bf2ee159b17ba"><div class="ttname"><a href="libmc-common_8h.html#a219eb5b8733a0209d67bf2ee159b17ba">sceMcFileAttrHidden</a></div><div class="ttdeci">#define sceMcFileAttrHidden</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00193">libmc-common.h:193</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a278efa7e6a2d336a3c13aa6161fc95e8"><div class="ttname"><a href="libmc-common_8h.html#a278efa7e6a2d336a3c13aa6161fc95e8">sceMcFileAttrWriteable</a></div><div class="ttdeci">#define sceMcFileAttrWriteable</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00182">libmc-common.h:182</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a40f89f0faf662e41a95a16b9fbcf1f24"><div class="ttname"><a href="libmc-common_8h.html#a40f89f0faf662e41a95a16b9fbcf1f24">sceMcFileAttrExecutable</a></div><div class="ttdeci">#define sceMcFileAttrExecutable</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00183">libmc-common.h:183</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a62aa532259074cefcf1494257bf553b3"><div class="ttname"><a href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a></div><div class="ttdeci">#define sceMcFileAttrExists</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00194">libmc-common.h:194</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_ab2c610a58e38dc855a9c38547f51afc1"><div class="ttname"><a href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a></div><div class="ttdeci">#define sceMcFileAttrSubdir</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00186">libmc-common.h:186</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_acb0e48c1e7becbcf273f6af9c6df9f98"><div class="ttname"><a href="libmc-common_8h.html#acb0e48c1e7becbcf273f6af9c6df9f98">sceMcFile0400</a></div><div class="ttdeci">#define sceMcFile0400</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00190">libmc-common.h:190</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a543221fa72ee630c5d492c6831b13357"><div class="ttname"><a href="mcman-internal_8h.html#a543221fa72ee630c5d492c6831b13357">MCMAN_CLUSTERSIZE</a></div><div class="ttdeci">#define MCMAN_CLUSTERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00053">mcman-internal.h:53</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a253bbc9d432aaf1368472ee8f8f15708"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a253bbc9d432aaf1368472ee8f8f15708">mcman_wmemset</a></div><div class="ttdeci">void mcman_wmemset(void *buf, int size, int value)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00344">main.c:344</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a4c0e53f67c008297befbeefe1a4e4d57"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a></div><div class="ttdeci">int McReadCluster(int port, int slot, int cluster, McCacheEntry **pmce)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03648">main.c:3648</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a53473e878971e2da32e3c57bc576fb5f"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a></div><div class="ttdeci">int McReadDirEntry(int port, int slot, int cluster, int fsindex, McFsEntry **pfse)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03704">main.c:3704</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ae6527774c98f08c0bda14c6312ae8219"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ae6527774c98f08c0bda14c6312ae8219">mcman_getmcrtime</a></div><div class="ttdeci">int mcman_getmcrtime(sceMcStDateTime *time)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01107">main.c:1107</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a587e6e44f6a2259d17a2e676036762cb"><div class="ttname"><a href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">MCDevInfo::alloc_offset</a></div><div class="ttdeci">u32 alloc_offset</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00192">mcman-internal.h:192</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_a93e3bba0de65676eece3c0684bf04617"><div class="ttname"><a href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">McCacheEntry::cl_data</a></div><div class="ttdeci">u8 * cl_data</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00067">libmc-common.h:67</a></div></div>
<div class="ttc" id="astructMcFsEntry_html"><div class="ttname"><a href="structMcFsEntry.html">McFsEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00051">libmc-common.h:51</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a0f226306bfc64ddd986bea9a5907ef47"><div class="ttname"><a href="structMcFsEntry.html#a0f226306bfc64ddd986bea9a5907ef47">McFsEntry::modified</a></div><div class="ttdeci">sceMcStDateTime modified</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00058">libmc-common.h:58</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a188a0a9fc802db9a05d5e2e9dbceb219"><div class="ttname"><a href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">McFsEntry::length</a></div><div class="ttdeci">u32 length</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00054">libmc-common.h:54</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a34aff481f85ef76ba596f60351b1ff5d"><div class="ttname"><a href="structMcFsEntry.html#a34aff481f85ef76ba596f60351b1ff5d">McFsEntry::created</a></div><div class="ttdeci">sceMcStDateTime created</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00055">libmc-common.h:55</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a3932d456852eadfafc708edad1c361d5"><div class="ttname"><a href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">McFsEntry::name</a></div><div class="ttdeci">char name[32]</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00061">libmc-common.h:61</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a407efa6f9e586bc247b3eb588cac95c3"><div class="ttname"><a href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">McFsEntry::dir_entry</a></div><div class="ttdeci">u32 dir_entry</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00057">libmc-common.h:57</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_a48c9c8582bc60130ad1345fb00b878e5"><div class="ttname"><a href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">McFsEntry::mode</a></div><div class="ttdeci">u16 mode</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00052">libmc-common.h:52</a></div></div>
<div class="ttc" id="astructMcFsEntry_html_aac4dcbe84c15089971b52f445865eff3"><div class="ttname"><a href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">McFsEntry::cluster</a></div><div class="ttdeci">u32 cluster</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00056">libmc-common.h:56</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00192">MCDevInfo::alloc_offset</a>, <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="libmc-common_8h_source.html#l00056">McFsEntry::cluster</a>, <a class="el" href="libmc-common_8h_source.html#l00055">McFsEntry::created</a>, <a class="el" href="libmc-common_8h_source.html#l00057">McFsEntry::dir_entry</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="libmc-common_8h_source.html#l00054">McFsEntry::length</a>, <a class="el" href="mcman-internal_8h_source.html#l00053">MCMAN_CLUSTERSIZE</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01107">mcman_getmcrtime()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00344">mcman_wmemset()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">McReadDirEntry()</a>, <a class="el" href="libmc-common_8h_source.html#l00052">McFsEntry::mode</a>, <a class="el" href="libmc-common_8h_source.html#l00058">McFsEntry::modified</a>, <a class="el" href="libmc-common_8h_source.html#l00061">McFsEntry::name</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="libmc-common_8h_source.html#l00190">sceMcFile0400</a>, <a class="el" href="libmc-common_8h_source.html#l00183">sceMcFileAttrExecutable</a>, <a class="el" href="libmc-common_8h_source.html#l00194">sceMcFileAttrExists</a>, <a class="el" href="libmc-common_8h_source.html#l00193">sceMcFileAttrHidden</a>, <a class="el" href="libmc-common_8h_source.html#l00181">sceMcFileAttrReadable</a>, <a class="el" href="libmc-common_8h_source.html#l00186">sceMcFileAttrSubdir</a>, <a class="el" href="libmc-common_8h_source.html#l00182">sceMcFileAttrWriteable</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00040">mcman_format2()</a>, and <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>.</p>

</div>
</div>
<a id="a0e5349e8abdecfe20a2d27655b328c3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5349e8abdecfe20a2d27655b328c3d">&#9670;&nbsp;</a></span>McDataChecksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void McDataChecksum </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ecc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01210">1210</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keyword">register</span> <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p, *p_ecc;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> i, <a class="code" href="as__reg__compat_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, <a class="code" href="as__reg__compat_8h.html#a2ef3c16c90bcffd5105806b0180c9a96">a3</a>, v, <a class="code" href="as__reg__compat_8h.html#a30084bbf7aceeb26e3e6c2dbc88cfa33">t0</a>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        p = buf;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        i = 0;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <a class="code" href="as__reg__compat_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> = 0;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="as__reg__compat_8h.html#a2ef3c16c90bcffd5105806b0180c9a96">a3</a> = 0;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <a class="code" href="as__reg__compat_8h.html#a30084bbf7aceeb26e3e6c2dbc88cfa33">t0</a> = 0;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                v = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4720454bf60dad5d51a1861eddecf469">mcman_xortable</a>[*p++];</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <a class="code" href="as__reg__compat_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> ^= v;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                <span class="keywordflow">if</span> (v &amp; 0x80) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                        <a class="code" href="as__reg__compat_8h.html#a2ef3c16c90bcffd5105806b0180c9a96">a3</a> ^= ~i;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                        <a class="code" href="as__reg__compat_8h.html#a30084bbf7aceeb26e3e6c2dbc88cfa33">t0</a> ^= i;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        } <span class="keywordflow">while</span> (++i &lt; 0x80);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        p_ecc = ecc;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        p_ecc[0] = ~<a class="code" href="as__reg__compat_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a> &amp; 0x77;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        p_ecc[1] = ~<a class="code" href="as__reg__compat_8h.html#a2ef3c16c90bcffd5105806b0180c9a96">a3</a> &amp; 0x7F;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        p_ecc[2] = ~<a class="code" href="as__reg__compat_8h.html#a30084bbf7aceeb26e3e6c2dbc88cfa33">t0</a> &amp; 0x7F;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;}</div>
<div class="ttc" id="aas__reg__compat_8h_html_a2ef3c16c90bcffd5105806b0180c9a96"><div class="ttname"><a href="as__reg__compat_8h.html#a2ef3c16c90bcffd5105806b0180c9a96">a3</a></div><div class="ttdeci">#define a3</div><div class="ttdef"><b>Definition:</b> <a href="as__reg__compat_8h_source.html#l00040">as_reg_compat.h:40</a></div></div>
<div class="ttc" id="aas__reg__compat_8h_html_a30084bbf7aceeb26e3e6c2dbc88cfa33"><div class="ttname"><a href="as__reg__compat_8h.html#a30084bbf7aceeb26e3e6c2dbc88cfa33">t0</a></div><div class="ttdeci">#define t0</div><div class="ttdef"><b>Definition:</b> <a href="as__reg__compat_8h_source.html#l00047">as_reg_compat.h:47</a></div></div>
<div class="ttc" id="aas__reg__compat_8h_html_aa3fd046b2956875cf908d73a51a96b42"><div class="ttname"><a href="as__reg__compat_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a></div><div class="ttdeci">#define a2</div><div class="ttdef"><b>Definition:</b> <a href="as__reg__compat_8h_source.html#l00039">as_reg_compat.h:39</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a4720454bf60dad5d51a1861eddecf469"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a4720454bf60dad5d51a1861eddecf469">mcman_xortable</a></div><div class="ttdeci">static const u8 mcman_xortable[256]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00064">main.c:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="as__reg__compat_8h_source.html#l00039">a2</a>, <a class="el" href="as__reg__compat_8h_source.html#l00040">a3</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00064">mcman_xortable</a>, <a class="el" href="as__reg__compat_8h_source.html#l00047">t0</a>, and <a class="el" href="irx_8h_source.html#l00025">irx_id::v</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01243">mcman_correctdata()</a>, <a class="el" href="mcsio2_8c_source.html#l00381">mcman_eraseblock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>.</p>

</div>
</div>
<a id="adddbac8c6a1eb9c0602ea732a736f1a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adddbac8c6a1eb9c0602ea732a736f1a9">&#9670;&nbsp;</a></span>McDelete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McDelete </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01031">1031</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;{</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#aef21cf2398dec61735448ac59cdd33a2">mcman_delete2</a>(port, slot, filename, flags);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a47b75437008a627732f2bd175077e688">mcman_delete1</a>(port, slot, filename, flags);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a47b75437008a627732f2bd175077e688"><div class="ttname"><a href="mcman-internal_8h.html#a47b75437008a627732f2bd175077e688">mcman_delete1</a></div><div class="ttdeci">int mcman_delete1(int port, int slot, char *filename, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00625">ps1mc_fio.c:625</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_aef21cf2398dec61735448ac59cdd33a2"><div class="ttname"><a href="mcman-internal_8h.html#aef21cf2398dec61735448ac59cdd33a2">mcman_delete2</a></div><div class="ttdeci">int mcman_delete2(int port, int slot, char *filename, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l01281">ps2mc_fio.c:1281</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00625">mcman_delete1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01281">mcman_delete2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00304">mc_remove()</a>, and <a class="el" href="mcdev_8c_source.html#l00338">mc_rmdir()</a>.</p>

</div>
</div>
<a id="ae0657a5d9d48dfabf05aa59a97613d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0657a5d9d48dfabf05aa59a97613d3b">&#9670;&nbsp;</a></span>McDetectCard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McDetectCard </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">483</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a33a381a61e870605b7ddffc1528cebfb">mc_detectcard</a>(port, slot);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a33a381a61e870605b7ddffc1528cebfb"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a33a381a61e870605b7ddffc1528cebfb">mc_detectcard</a></div><div class="ttdeci">int(* mc_detectcard)(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00061">main.c:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00061">mc_detectcard</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01007">McChDir()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00653">McClose()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01031">McDelete()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00707">McFlush()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01053">McFormat()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00897">McGetDir()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00876">McGetEntSpace()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00919">mcman_dread()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00955">mcman_getstat()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00628">McOpen()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00804">McRead()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00767">McSeek()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00977">McSetFileInfo()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01079">McUnformat()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00840">McWrite()</a>.</p>

</div>
</div>
<a id="a78a9559a1e904122f10e0ebbf5c25bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a9559a1e904122f10e0ebbf5c25bf6">&#9670;&nbsp;</a></span>McDetectCard2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McDetectCard2 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00558">558</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McDetectCard2 port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        mcdi = (<a class="code" href="structMCDevInfo.html">MCDevInfo</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">if</span> ((mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a26e25d364e528fc9fe42db5fe125adf8">sceMcTypeNoCard</a>) || (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a411198d6a9a77994451709867fb41fe7">mcman_probePS2Card</a>(port, slot);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#ae7751b23ad4e59ece9c5871b28f7d1cf">mcman_probePS1Card</a>(port, slot);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                        <span class="keywordflow">if</span> (!(r &lt; -9)) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="mcman-internal_8h.html#a06fbe5e927dbfbc28bd1286263a87371">mcman_probePDACard</a>(port, slot)) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#adda9eeb9cd481e2b542356146ac5bda0">sceMcTypePS1</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                        <span class="keywordflow">return</span> (!<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a>) ? <a class="code" href="libmc-common_8h.html#a1a3d83bd78b65b0ac7c096b5fc78bd53">sceMcResDeniedPS1Permit</a> : r;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#a4c254788f070431b7df5121c2b6bbd06">sceMcTypePDA</a>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#ae7751b23ad4e59ece9c5871b28f7d1cf">mcman_probePS1Card</a>(port, slot);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">if</span> (r) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        <span class="keywordflow">if</span> ((r &lt; -9) || (r &gt;= 0)) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                r = <a class="code" href="mcman-internal_8h.html#a411198d6a9a77994451709867fb41fe7">mcman_probePS2Card</a>(port, slot);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                <span class="keywordflow">if</span> (!(r &lt; -9)) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                        }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="mcman-internal_8h.html#a06fbe5e927dbfbc28bd1286263a87371">mcman_probePDACard</a>(port, slot)) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#adda9eeb9cd481e2b542356146ac5bda0">sceMcTypePS1</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                        <span class="keywordflow">return</span> (!<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a>) ? <a class="code" href="libmc-common_8h.html#a1a3d83bd78b65b0ac7c096b5fc78bd53">sceMcResDeniedPS1Permit</a> : r;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = <a class="code" href="libmc-common_8h.html#a4c254788f070431b7df5121c2b6bbd06">sceMcTypePDA</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a>)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#adda9eeb9cd481e2b542356146ac5bda0">sceMcTypePS1</a>)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#a1a3d83bd78b65b0ac7c096b5fc78bd53">sceMcResDeniedPS1Permit</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> = 0;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        mcdi-&gt;<a class="code" href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">cardform</a> = 0;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_a1a3d83bd78b65b0ac7c096b5fc78bd53"><div class="ttname"><a href="libmc-common_8h.html#a1a3d83bd78b65b0ac7c096b5fc78bd53">sceMcResDeniedPS1Permit</a></div><div class="ttdeci">#define sceMcResDeniedPS1Permit</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00153">libmc-common.h:153</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a26e25d364e528fc9fe42db5fe125adf8"><div class="ttname"><a href="libmc-common_8h.html#a26e25d364e528fc9fe42db5fe125adf8">sceMcTypeNoCard</a></div><div class="ttdeci">#define sceMcTypeNoCard</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00157">libmc-common.h:157</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_a4c254788f070431b7df5121c2b6bbd06"><div class="ttname"><a href="libmc-common_8h.html#a4c254788f070431b7df5121c2b6bbd06">sceMcTypePDA</a></div><div class="ttdeci">#define sceMcTypePDA</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00160">libmc-common.h:160</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_adda9eeb9cd481e2b542356146ac5bda0"><div class="ttname"><a href="libmc-common_8h.html#adda9eeb9cd481e2b542356146ac5bda0">sceMcTypePS1</a></div><div class="ttdeci">#define sceMcTypePS1</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00158">libmc-common.h:158</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a06fbe5e927dbfbc28bd1286263a87371"><div class="ttname"><a href="mcman-internal_8h.html#a06fbe5e927dbfbc28bd1286263a87371">mcman_probePDACard</a></div><div class="ttdeci">int mcman_probePDACard(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00964">mcsio2.c:964</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a411198d6a9a77994451709867fb41fe7"><div class="ttname"><a href="mcman-internal_8h.html#a411198d6a9a77994451709867fb41fe7">mcman_probePS2Card</a></div><div class="ttdeci">int mcman_probePS2Card(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00730">mcsio2.c:730</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_ae7751b23ad4e59ece9c5871b28f7d1cf"><div class="ttname"><a href="mcman-internal_8h.html#ae7751b23ad4e59ece9c5871b28f7d1cf">mcman_probePS1Card</a></div><div class="ttdeci">int mcman_probePS1Card(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00893">mcsio2.c:893</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a1426604b58c346e00ce403a9ebd83a71"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a></div><div class="ttdeci">int PS1CardFlag</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00029">main.c:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00206">MCDevInfo::cardform</a>, <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="mcsio2_8c_source.html#l00964">mcman_probePDACard()</a>, <a class="el" href="mcsio2_8c_source.html#l00893">mcman_probePS1Card()</a>, <a class="el" href="mcsio2_8c_source.html#l00730">mcman_probePS2Card()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00029">PS1CardFlag</a>, <a class="el" href="libmc-common_8h_source.html#l00153">sceMcResDeniedPS1Permit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="libmc-common_8h_source.html#l00157">sceMcTypeNoCard</a>, <a class="el" href="libmc-common_8h_source.html#l00160">sceMcTypePDA</a>, <a class="el" href="libmc-common_8h_source.html#l00158">sceMcTypePS1</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="mcdev_8c_source.html#l00417">mc_chstat()</a>, <a class="el" href="mcdev_8c_source.html#l00355">mc_dopen()</a>, <a class="el" href="mcdev_8c_source.html#l00287">mc_format()</a>, <a class="el" href="mcdev_8c_source.html#l00399">mc_getstat()</a>, <a class="el" href="mcdev_8c_source.html#l00321">mc_mkdir()</a>, <a class="el" href="mcdev_8c_source.html#l00220">mc_open()</a>, <a class="el" href="mcdev_8c_source.html#l00304">mc_remove()</a>, and <a class="el" href="mcdev_8c_source.html#l00338">mc_rmdir()</a>.</p>

</div>
</div>
<a id="a38d8456724612cd60a2859f3ed08022e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d8456724612cd60a2859f3ed08022e">&#9670;&nbsp;</a></span>McEraseBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McEraseBlock </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pagebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>eccbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01147">1147</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a>(port, 0, block, (<span class="keywordtype">void</span> **)pagebuf, eccbuf);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcsio2_8c_source.html#l00381">mcman_eraseblock()</a>.</p>

</div>
</div>
<a id="a9d999ad6f6e26c42af230ad957a4ac42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d999ad6f6e26c42af230ad957a4ac42">&#9670;&nbsp;</a></span>McEraseBlock2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McEraseBlock2 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pagebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>eccbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01153">1153</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;{</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mcman-internal_8h.html#a727d102cca44af81de35e279f4846f08">mcman_eraseblock</a>(port, slot, block, (<span class="keywordtype">void</span> **)pagebuf, eccbuf);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcsio2_8c_source.html#l00381">mcman_eraseblock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>.</p>

</div>
</div>
<a id="aebd97fafa08ca6e3ea16097eb62c37cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd97fafa08ca6e3ea16097eb62c37cb">&#9670;&nbsp;</a></span>McFlush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McFlush </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00707">707</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *fh;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>))</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        fh = (<a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd];</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">if</span> (fh-&gt;<a class="code" href="structMC__FHANDLE.html#a906ef9fc420d261a0ebaac16b1b7ab9c">unknown2</a> != 0) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#a906ef9fc420d261a0ebaac16b1b7ab9c">unknown2</a> = 0;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                mcdi = (<a class="code" href="structMCDevInfo.html">MCDevInfo</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>][fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>];</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                if (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a8e344d9e91b69404716cf10e2d71c955">mcman_close2</a>(fd);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                        r = <a class="code" href="mcman-internal_8h.html#a5f2be9b85e0a8cc6951d520ba3a4bb88">mcman_close1</a>(fd);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keywordflow">if</span> (r &lt; -9)     {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                        fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03311">McFlushCache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00644">mcman_close1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00625">mcman_close2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="mcman-internal_8h_source.html#l00075">MC_FHANDLE::port</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>, <a class="el" href="mcman-internal_8h_source.html#l00076">MC_FHANDLE::slot</a>, <a class="el" href="mcman-internal_8h_source.html#l00069">MC_FHANDLE::status</a>, and <a class="el" href="mcman-internal_8h_source.html#l00074">MC_FHANDLE::unknown2</a>.</p>

</div>
</div>
<a id="aa74026cdd09cf20877d92bec06114650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa74026cdd09cf20877d92bec06114650">&#9670;&nbsp;</a></span>McFlushCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McFlushCache </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03311">3311</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;{</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> i, r;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> **pmce = (<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> **)<a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab6fba2bf79de33c0dcfafab77fc29883">pmcman_mccache</a>;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McFlushCache port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160; </div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;        i = <a class="code" href="mcman-internal_8h.html#ad79dc8e822271523cf8880e7e0d7b46c">MAX_CACHEENTRY</a> - 1;</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160; </div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;        <span class="keywordflow">if</span> (i &gt;= 0) {</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;                        mce = (<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *)pmce[i];</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                        <span class="keywordflow">if</span> ((mce-&gt;<a class="code" href="structMcCacheEntry.html#a0c47d59b51566ce06b145ef81cfd9d0e">mc_port</a> == port) &amp;&amp; (mce-&gt;<a class="code" href="structMcCacheEntry.html#abd24357cc0ab189e0a640c28f64e58ea">mc_slot</a> == slot) &amp;&amp; (mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> != 0)) {</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a98c9ee65572848d14f8dc93ab2e00964">mcman_flushcacheentry</a>((<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *)mce);</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                                        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                        }</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;                        i--;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                } <span class="keywordflow">while</span> (i &gt;= 0);</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;        }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_ad79dc8e822271523cf8880e7e0d7b46c"><div class="ttname"><a href="mcman-internal_8h.html#ad79dc8e822271523cf8880e7e0d7b46c">MAX_CACHEENTRY</a></div><div class="ttdeci">#define MAX_CACHEENTRY</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00060">mcman-internal.h:60</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a98c9ee65572848d14f8dc93ab2e00964"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a98c9ee65572848d14f8dc93ab2e00964">mcman_flushcacheentry</a></div><div class="ttdeci">int mcman_flushcacheentry(McCacheEntry *mce)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03339">main.c:3339</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_a0c47d59b51566ce06b145ef81cfd9d0e"><div class="ttname"><a href="structMcCacheEntry.html#a0c47d59b51566ce06b145ef81cfd9d0e">McCacheEntry::mc_port</a></div><div class="ttdeci">u8 mc_port</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00070">libmc-common.h:70</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_abd24357cc0ab189e0a640c28f64e58ea"><div class="ttname"><a href="structMcCacheEntry.html#abd24357cc0ab189e0a640c28f64e58ea">McCacheEntry::mc_slot</a></div><div class="ttdeci">u16 mc_slot</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00068">libmc-common.h:68</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="mcman-internal_8h_source.html#l00060">MAX_CACHEENTRY</a>, <a class="el" href="libmc-common_8h_source.html#l00070">McCacheEntry::mc_port</a>, <a class="el" href="libmc-common_8h_source.html#l00068">McCacheEntry::mc_slot</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00042">pmcman_mccache</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00653">McClose()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00707">McFlush()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02593">mcman_clearPS1direntry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l04292">mcman_clearsuperblock()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00644">mcman_close1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01281">mcman_delete2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01606">mcman_fatWseek()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02751">mcman_fatWseekPS1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00040">mcman_format2()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00086">mcman_open1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00450">mcman_setinfo1()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00288">mcman_write1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00547">mcman_write2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00977">McSetFileInfo()</a>.</p>

</div>
</div>
<a id="afcc6922375a5ac15a09ff2eddef82fae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc6922375a5ac15a09ff2eddef82fae">&#9670;&nbsp;</a></span>McFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McFormat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01053">1053</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;{</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordflow">if</span> (r &lt; -2)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a66674c46d3d32f0089dc116d262b8c01">mcman_format2</a>(port, slot);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#acb427b1ff7244504c5aee2900da4c995">mcman_format1</a>(port, slot);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a66674c46d3d32f0089dc116d262b8c01"><div class="ttname"><a href="mcman-internal_8h.html#a66674c46d3d32f0089dc116d262b8c01">mcman_format2</a></div><div class="ttdeci">int mcman_format2(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00040">ps2mc_fio.c:40</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_acb427b1ff7244504c5aee2900da4c995"><div class="ttname"><a href="mcman-internal_8h.html#acb427b1ff7244504c5aee2900da4c995">mcman_format1</a></div><div class="ttdeci">int mcman_format1(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00025">ps1mc_fio.c:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00025">mcman_format1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00040">mcman_format2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00287">mc_format()</a>.</p>

</div>
</div>
<a id="a69f5c8d3e0adb3fa2230bd7d8a0c37fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f5c8d3e0adb3fa2230bd7d8a0c37fe">&#9670;&nbsp;</a></span>McGetCardSpec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetCardSpec </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tamtypes_8h.html#a5ffa4f640862b25ba6d4f635b78bdbe1">s16</a> *&#160;</td>
          <td class="paramname"><em>pagesize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tamtypes_8h.html#a9e6c91d77e24643b888dbd1a1a590054">u16</a> *&#160;</td>
          <td class="paramname"><em>blocksize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cardsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcsio2_8c_source.html#l00598">598</a> of file <a class="el" href="mcsio2_8c_source.html">mcsio2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> retries, r;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p = <a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>.<a class="code" href="structsio2__transfer__data__t.html#a78be895b3d175e9f0256562ac6a705ba">out_dma</a>.<a class="code" href="struct__sio2__dma__arg.html#a02542ae6653ded736fa0d1522ffb0ad9">addr</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetCardSpec sio2cmd port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xffffffff, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0x07, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xfffffffe, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        retries = 0;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <a class="code" href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a>(port, slot, &amp;<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>.<a class="code" href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">stat6c</a> &amp; 0xF000) == 0x1000) &amp;&amp; (p[12] == 0x5a)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                        <span class="comment">// checking EDC</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#adbd9ca7b6ffeeee053571bea361093b5">mcman_calcEDC</a>(&amp;p[3], 8) &amp; 0xFF;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        <span class="keywordflow">if</span> (r == p[11])</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        } <span class="keywordflow">while</span> (++retries &lt; 5);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> (retries &gt;= 5)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#a65f9c244e7d44baacdb229d076ee874e">sceMcResChangedCard</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        *pagesize = (p[4] &lt;&lt; 8) + p[3];</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        *blocksize = (p[6] &lt;&lt; 8) + p[5];</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        *cardsize = (p[8] &lt;&lt; 8) + p[7] + (p[9] &lt;&lt; 16) + (p[10] &lt;&lt; 24);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        *flags = p[2];</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetCardSpec sio2cmd pagesize=%d blocksize=%u cardsize=%d flags%x\n&quot;</span>, *pagesize, *blocksize, *cardsize, *flags);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_a65f9c244e7d44baacdb229d076ee874e"><div class="ttname"><a href="libmc-common_8h.html#a65f9c244e7d44baacdb229d076ee874e">sceMcResChangedCard</a></div><div class="ttdeci">#define sceMcResChangedCard</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00142">libmc-common.h:142</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a194c0ca5cb0baff41abb8fad923d0f39"><div class="ttname"><a href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a></div><div class="ttdeci">void sio2packet_add(int port, int slot, int cmd, u8 *buf)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00073">mcsio2.c:73</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a8416eb63879f0e1429d730a897a84f4d"><div class="ttname"><a href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a></div><div class="ttdeci">int(* mcman_sio2transfer)(int port, int slot, sio2_transfer_data_t *sio2data)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00060">main.c:60</a></div></div>
<div class="ttc" id="amcsio2_8c_html_ab0940f6286076af7e25cc270c9aa51ae"><div class="ttname"><a href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a></div><div class="ttdeci">static sio2_transfer_data_t mcman_sio2packet</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00018">mcsio2.c:18</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_adbd9ca7b6ffeeee053571bea361093b5"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#adbd9ca7b6ffeeee053571bea361093b5">mcman_calcEDC</a></div><div class="ttdeci">int mcman_calcEDC(void *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00357">main.c:357</a></div></div>
<div class="ttc" id="astruct__sio2__dma__arg_html_a02542ae6653ded736fa0d1522ffb0ad9"><div class="ttname"><a href="struct__sio2__dma__arg.html#a02542ae6653ded736fa0d1522ffb0ad9">_sio2_dma_arg::addr</a></div><div class="ttdeci">void * addr</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00023">sio2man.h:23</a></div></div>
<div class="ttc" id="astructsio2__transfer__data__t_html_a78be895b3d175e9f0256562ac6a705ba"><div class="ttname"><a href="structsio2__transfer__data__t.html#a78be895b3d175e9f0256562ac6a705ba">sio2_transfer_data_t::out_dma</a></div><div class="ttdeci">struct _sio2_dma_arg out_dma</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00043">sio2man.h:46</a></div></div>
<div class="ttc" id="astructsio2__transfer__data__t_html_acda7b765f14f63333758db5fea5cb768"><div class="ttname"><a href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">sio2_transfer_data_t::stat6c</a></div><div class="ttdeci">u32 stat6c</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00029">sio2man.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sio2man_8h_source.html#l00023">_sio2_dma_arg::addr</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00357">mcman_calcEDC()</a>, <a class="el" href="mcsio2_8c_source.html#l00018">mcman_sio2packet</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00060">mcman_sio2transfer</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="sio2man_8h_source.html#l00046">sio2_transfer_data_t::out_dma</a>, <a class="el" href="libmc-common_8h_source.html#l00142">sceMcResChangedCard</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="mcsio2_8c_source.html#l00073">sio2packet_add()</a>, and <a class="el" href="sio2man_8h_source.html#l00029">sio2_transfer_data_t::stat6c</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01296">mcman_setdevspec()</a>.</p>

</div>
</div>
<a id="a3c74623f70c6dad0480e0bd7160a7403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c74623f70c6dad0480e0bd7160a7403">&#9670;&nbsp;</a></span>McGetDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetDir </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsceMcTblGetDir.html">sceMcTblGetDir</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00897">897</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;{</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a6aeb9a3371c2ddc6cdf340ed595dcc9d">mcman_getdir2</a>(port, slot, dirname, flags &amp; 0xFFFF, maxent, <a class="code" href="structinfo.html">info</a>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a1936c9ae04a3bd469db132a74895e79e">mcman_getdir1</a>(port, slot, dirname, flags &amp; 0xFFFF, maxent, <a class="code" href="structinfo.html">info</a>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a1936c9ae04a3bd469db132a74895e79e"><div class="ttname"><a href="mcman-internal_8h.html#a1936c9ae04a3bd469db132a74895e79e">mcman_getdir1</a></div><div class="ttdeci">int mcman_getdir1(int port, int slot, char *dirname, int flags, int maxent, sceMcTblGetDir *info)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00547">ps1mc_fio.c:547</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a6aeb9a3371c2ddc6cdf340ed595dcc9d"><div class="ttname"><a href="mcman-internal_8h.html#a6aeb9a3371c2ddc6cdf340ed595dcc9d">mcman_getdir2</a></div><div class="ttdeci">int mcman_getdir2(int port, int slot, char *dirname, int flags, int maxent, sceMcTblGetDir *info)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l01141">ps2mc_fio.c:1141</a></div></div>
<div class="ttc" id="astructinfo_html"><div class="ttname"><a href="structinfo.html">info</a></div><div class="ttdef"><b>Definition:</b> <a href="xprintf_8c_source.html#l00078">xprintf.c:78</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00547">mcman_getdir1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01141">mcman_getdir2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

</div>
</div>
<a id="a40e1aec371d6458d78f98fed3910b59e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e1aec371d6458d78f98fed3910b59e">&#9670;&nbsp;</a></span>McGetEntSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetEntSpace </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dirname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00876">876</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;{</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a3bd1373d3d2db353d18508c7d3df34e0">mcman_getentspace</a>(port, slot, dirname);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a3bd1373d3d2db353d18508c7d3df34e0"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a3bd1373d3d2db353d18508c7d3df34e0">mcman_getentspace</a></div><div class="ttdeci">int mcman_getentspace(int port, int slot, char *dirname)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01731">main.c:1731</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01731">mcman_getentspace()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>.</p>

</div>
</div>
<a id="ae82da60cd38fc82c43c968d3a2783fbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae82da60cd38fc82c43c968d3a2783fbc">&#9670;&nbsp;</a></span>McGetFATentry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetFATentry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fat_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fat_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03831">3831</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;{</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, ifc_index, indirect_index, indirect_offset, fat_offset;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160; </div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        indirect_index = fat_index / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;        fat_offset = fat_index % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160; </div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;        ifc_index = indirect_index / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;        indirect_offset = indirect_index % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160; </div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port, slot, mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[ifc_index], &amp;mce);</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                <span class="keywordflow">return</span> -78;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160; </div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        <a class="code" href="structMcFatCluster.html">McFatCluster</a> *fc = (<a class="code" href="structMcFatCluster.html">McFatCluster</a> *)mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>;</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160; </div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port, slot, fc-&gt;<a class="code" href="structMcFatCluster.html#aa57c6965624bde94d5f943d11b72d1ca">entry</a>[indirect_offset], &amp;mce);</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                <span class="keywordflow">return</span> -79;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160; </div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;        fc = (<a class="code" href="structMcFatCluster.html">McFatCluster</a> *)mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160; </div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        *fat_entry = fc-&gt;<a class="code" href="structMcFatCluster.html#aa57c6965624bde94d5f943d11b72d1ca">entry</a>[fat_offset];</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;}</div>
<div class="ttc" id="astructMCDevInfo_html_a843bdfd0351615d64205fc7c04cf9827"><div class="ttname"><a href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">MCDevInfo::ifc_list</a></div><div class="ttdeci">u32 ifc_list[32]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00198">mcman-internal.h:198</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_ad1f3a3595a90ff3b47f35d9cabb40afc"><div class="ttname"><a href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">MCDevInfo::FATentries_per_cluster</a></div><div class="ttdeci">u32 FATentries_per_cluster</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00204">mcman-internal.h:204</a></div></div>
<div class="ttc" id="astructMcFatCluster_html"><div class="ttname"><a href="structMcFatCluster.html">McFatCluster</a></div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00056">mcman-internal.h:56</a></div></div>
<div class="ttc" id="astructMcFatCluster_html_aa57c6965624bde94d5f943d11b72d1ca"><div class="ttname"><a href="structMcFatCluster.html#aa57c6965624bde94d5f943d11b72d1ca">McFatCluster::entry</a></div><div class="ttdeci">int entry[MCMAN_CLUSTERFATENTRIES]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00057">mcman-internal.h:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="mcman-internal_8h_source.html#l00057">McFatCluster::entry</a>, <a class="el" href="mcman-internal_8h_source.html#l00204">MCDevInfo::FATentries_per_cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00198">MCDevInfo::ifc_list</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>, and <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01559">mcman_fatRseek()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01606">mcman_fatWseek()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">McReadDirEntry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02177">McSetDirEntryState()</a>.</p>

</div>
</div>
<a id="a07468e93522d6cc4bd70f22955e58ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07468e93522d6cc4bd70f22955e58ab9">&#9670;&nbsp;</a></span>McGetFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetFormat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00273">273</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetFormat port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].<a class="code" href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">cardform</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00206">MCDevInfo::cardform</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="mcsio2_8c_source.html#l00730">mcman_probePS2Card()</a>, and <a class="el" href="mcsio2_8c_source.html#l00678">mcman_probePS2Card2()</a>.</p>

</div>
</div>
<a id="ac481176507790a4349ecb1445a7511bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac481176507790a4349ecb1445a7511bf">&#9670;&nbsp;</a></span>McGetFreeClusters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetFreeClusters </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00309">309</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, mcfree;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetFreeClusters port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        mcfree = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">cardform</a>)     {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">switch</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a>) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                mcfree = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#abd3e5459838cef8ec5932ef95762ea30">mcman_findfree2</a>(port, slot, 0);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="libmc-common_8h.html#adda9eeb9cd481e2b542356146ac5bda0">sceMcTypePS1</a>:</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="libmc-common_8h.html#a4c254788f070431b7df5121c2b6bbd06">sceMcTypePDA</a>:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                mcfree = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7863745776cd0fe68298e95205c796c3">mcman_findfree1</a>(port, slot, 0);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="libmc-common_8h.html#a26e25d364e528fc9fe42db5fe125adf8">sceMcTypeNoCard</a>:</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                mcfree = 0;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">if</span> (mcfree == <a class="code" href="libmc-common_8h.html#ad67a30a8c4dab1e7e96f0cc29ada5e0f">sceMcResFullDevice</a>)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                        mcfree = 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                r = mcfree;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_ad67a30a8c4dab1e7e96f0cc29ada5e0f"><div class="ttname"><a href="libmc-common_8h.html#ad67a30a8c4dab1e7e96f0cc29ada5e0f">sceMcResFullDevice</a></div><div class="ttdeci">#define sceMcResFullDevice</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00144">libmc-common.h:144</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a7863745776cd0fe68298e95205c796c3"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a7863745776cd0fe68298e95205c796c3">mcman_findfree1</a></div><div class="ttdeci">int mcman_findfree1(int port, int slot, int reserve)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l02681">main.c:2681</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_abd3e5459838cef8ec5932ef95762ea30"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#abd3e5459838cef8ec5932ef95762ea30">mcman_findfree2</a></div><div class="ttdeci">int mcman_findfree2(int port, int slot, int reserve)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01675">main.c:1675</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00206">MCDevInfo::cardform</a>, <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02681">mcman_findfree1()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01675">mcman_findfree2()</a>, <a class="el" href="libmc-common_8h_source.html#l00144">sceMcResFullDevice</a>, <a class="el" href="libmc-common_8h_source.html#l00157">sceMcTypeNoCard</a>, <a class="el" href="libmc-common_8h_source.html#l00160">sceMcTypePDA</a>, <a class="el" href="libmc-common_8h_source.html#l00158">sceMcTypePS1</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

</div>
</div>
<a id="a49841abb49cde35763b70f94036327dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49841abb49cde35763b70f94036327dd">&#9670;&nbsp;</a></span>McGetMcType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McGetMcType </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00282">282</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetMcType port%d slot%d\n&quot;</span>, port, slot);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>.</p>

</div>
</div>
<a id="a653422f031ff025d6452fa89d6447027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653422f031ff025d6452fa89d6447027">&#9670;&nbsp;</a></span>McGetModuleInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structirx__id.html">irx_id</a>* McGetModuleInfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00291">291</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McGetModuleInfo\n&quot;</span>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="padMiscFuncs_8c.html#aa0b6c78cfa948afd76385927bde7bccb">_irx_id</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="ttc" id="apadMiscFuncs_8c_html_aa0b6c78cfa948afd76385927bde7bccb"><div class="ttname"><a href="padMiscFuncs_8c.html#aa0b6c78cfa948afd76385927bde7bccb">_irx_id</a></div><div class="ttdeci">struct irx_id _irx_id</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="padMiscFuncs_8c.html#aa0b6c78cfa948afd76385927bde7bccb">_irx_id</a>, and <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>.</p>

</div>
</div>
<a id="a457198cd95144a875ffdc966e3ddb396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457198cd95144a875ffdc966e3ddb396">&#9670;&nbsp;</a></span>McOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McOpen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00628">628</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a>)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                flag &amp;= 0xFFFFDFFF; <span class="comment">// disables FRCOM flag OR what is it</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a9d57d55401b9ec2e7d8a48e98ad68f66">mcman_open2</a>(port, slot, filename, flag);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a07f03ec1045d7f7c437f376b93aba665">mcman_open1</a>(port, slot, filename, flag);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9)     {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a07f03ec1045d7f7c437f376b93aba665"><div class="ttname"><a href="mcman-internal_8h.html#a07f03ec1045d7f7c437f376b93aba665">mcman_open1</a></div><div class="ttdeci">int mcman_open1(int port, int slot, char *filename, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00086">ps1mc_fio.c:86</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_a9d57d55401b9ec2e7d8a48e98ad68f66"><div class="ttname"><a href="mcman-internal_8h.html#a9d57d55401b9ec2e7d8a48e98ad68f66">mcman_open2</a></div><div class="ttdeci">int mcman_open2(int port, int slot, char *filename, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00668">ps2mc_fio.c:668</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00086">mcman_open1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00029">PS1CardFlag</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00355">mc_dopen()</a>, <a class="el" href="mcdev_8c_source.html#l00321">mc_mkdir()</a>, and <a class="el" href="mcdev_8c_source.html#l00220">mc_open()</a>.</p>

</div>
</div>
<a id="aab0f3e0acebe128863390bc1df6bfae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab0f3e0acebe128863390bc1df6bfae5">&#9670;&nbsp;</a></span>McRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McRead </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00804">804</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *fh;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>))</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        fh = (<a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd];</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a>)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#a95712c5bbc32f80d2c5b3420b5cd00b0">rdflag</a>)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>][fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>].<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#acdd4b7a4ab1a8693f10b212a7d059a46">mcman_read2</a>(fd, buf, length);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a8ef45aecb2ae96625295af8fbbdfa989">mcman_read1</a>(fd, buf, length);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a8ef45aecb2ae96625295af8fbbdfa989"><div class="ttname"><a href="mcman-internal_8h.html#a8ef45aecb2ae96625295af8fbbdfa989">mcman_read1</a></div><div class="ttdeci">int mcman_read1(int fd, void *buffer, int nbyte)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00239">ps1mc_fio.c:239</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_acdd4b7a4ab1a8693f10b212a7d059a46"><div class="ttname"><a href="mcman-internal_8h.html#acdd4b7a4ab1a8693f10b212a7d059a46">mcman_read2</a></div><div class="ttdeci">int mcman_read2(int fd, void *buffer, int nbyte)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00494">ps2mc_fio.c:494</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_a95712c5bbc32f80d2c5b3420b5cd00b0"><div class="ttname"><a href="structMC__FHANDLE.html#a95712c5bbc32f80d2c5b3420b5cd00b0">MC_FHANDLE::rdflag</a></div><div class="ttdeci">u8 rdflag</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00071">mcman-internal.h:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00239">mcman_read1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00494">mcman_read2()</a>, <a class="el" href="mcman-internal_8h_source.html#l00075">MC_FHANDLE::port</a>, <a class="el" href="mcman-internal_8h_source.html#l00071">MC_FHANDLE::rdflag</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>, <a class="el" href="mcman-internal_8h_source.html#l00076">MC_FHANDLE::slot</a>, and <a class="el" href="mcman-internal_8h_source.html#l00069">MC_FHANDLE::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00263">mc_read()</a>.</p>

</div>
</div>
<a id="a4c0e53f67c008297befbeefe1a4e4d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0e53f67c008297befbeefe1a4e4d57">&#9670;&nbsp;</a></span>McReadCluster()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McReadCluster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMcCacheEntry.html">McCacheEntry</a> **&#160;</td>
          <td class="paramname"><em>pmce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">3648</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;{</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, i, block, block_offset;</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160; </div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> &gt; 0) {</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;                block = cluster / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;                block_offset = cluster % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160; </div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;                <span class="keywordflow">if</span> ((block == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) &amp;&amp; (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a> == port) &amp;&amp; (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a> == slot)) {</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                        cluster = (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a084c1c5585f4aa7ca38c3352a8a3b93d">backup_block1</a> * mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>) + block_offset;</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;                }</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> &gt; 0) {</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;                                <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>; i++) {</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;                                        <span class="keywordflow">if</span> ((<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] != 0) &amp;&amp; (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] == cluster)) {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;                                                block_offset = i % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;                                                cluster = (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a084c1c5585f4aa7ca38c3352a8a3b93d">backup_block1</a> * mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>) + block_offset;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                                        }</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                                }</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                        }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;                }</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        }</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        mce = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ac903dcc150fc2ff4f0c60147ab0176f3">mcman_getcacheentry</a>(port, slot, cluster);</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        <span class="keywordflow">if</span> (mce == <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;                mce = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab6fba2bf79de33c0dcfafab77fc29883">pmcman_mccache</a>[<a class="code" href="mcman-internal_8h.html#ad79dc8e822271523cf8880e7e0d7b46c">MAX_CACHEENTRY</a> - 1];</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;                <span class="keywordflow">if</span> (mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> != 0) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a98c9ee65572848d14f8dc93ab2e00964">mcman_flushcacheentry</a>((<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *)mce);</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;                                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;                }</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160; </div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;                mce-&gt;<a class="code" href="structMcCacheEntry.html#a0c47d59b51566ce06b145ef81cfd9d0e">mc_port</a> = port;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;                mce-&gt;<a class="code" href="structMcCacheEntry.html#abd24357cc0ab189e0a640c28f64e58ea">mc_slot</a> = slot;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;                mce-&gt;<a class="code" href="structMcCacheEntry.html#a9254d8d2b9715e85914e7895676094ac">cluster</a> = cluster;</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;                mce-&gt;<a class="code" href="structMcCacheEntry.html#a33c881c29ccbcffb2b1c6a250110d216">rd_flag</a> = 0;</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;                <span class="comment">//s3 = (cluster * mcdi-&gt;pages_per_cluster);</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160; </div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#af3baa13d4284ff771c1241a80cfcff56">pages_per_cluster</a>; i++) {</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab6979316408085a90febcf40f3f6c8c1">McReadPage</a>(port, slot, (cluster * mcdi-&gt;<a class="code" href="structMCDevInfo.html#af3baa13d4284ff771c1241a80cfcff56">pages_per_cluster</a>) + i, \</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;                                        (<span class="keywordtype">void</span> *)(mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a> + (i * mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a>)));</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;                                <span class="keywordflow">return</span> -21;</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160; </div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;                }</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;        }</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a3fa13e6039d1f0ccb8458e507bdc7944">mcman_addcacheentry</a>(mce);</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;        *pmce = (<a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *)mce;</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;}</div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a3fa13e6039d1f0ccb8458e507bdc7944"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a3fa13e6039d1f0ccb8458e507bdc7944">mcman_addcacheentry</a></div><div class="ttdeci">void mcman_addcacheentry(McCacheEntry *mce)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03285">main.c:3285</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ab1c0cdabfedb74f28839f7133e5c0d36"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a></div><div class="ttdeci">static int mcman_badblock_slot</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00048">main.c:48</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ab6979316408085a90febcf40f3f6c8c1"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ab6979316408085a90febcf40f3f6c8c1">McReadPage</a></div><div class="ttdeci">int McReadPage(int port, int slot, int page, void *buf)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l01159">main.c:1159</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ac903dcc150fc2ff4f0c60147ab0176f3"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ac903dcc150fc2ff4f0c60147ab0176f3">mcman_getcacheentry</a></div><div class="ttdeci">McCacheEntry * mcman_getcacheentry(int port, int slot, int cluster)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03233">main.c:3233</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_aeadf6d9379104c53b8d61ac0ecdc3255"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a></div><div class="ttdeci">static int mcman_replacementcluster[16]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00050">main.c:50</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_af623778fa7a50b4f118606a73bbfeaba"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a></div><div class="ttdeci">static int mcman_badblock_port</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00047">main.c:47</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_af6d91c3475d2301aa683d03f8997e494"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a></div><div class="ttdeci">static int mcman_badblock</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00049">main.c:49</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a084c1c5585f4aa7ca38c3352a8a3b93d"><div class="ttname"><a href="structMCDevInfo.html#a084c1c5585f4aa7ca38c3352a8a3b93d">MCDevInfo::backup_block1</a></div><div class="ttdeci">u32 backup_block1</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00195">mcman-internal.h:195</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_ad1b50b42349f8174e70a98bf3b6e53ad"><div class="ttname"><a href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">MCDevInfo::clusters_per_block</a></div><div class="ttdeci">u32 clusters_per_block</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00205">mcman-internal.h:205</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_af3baa13d4284ff771c1241a80cfcff56"><div class="ttname"><a href="structMCDevInfo.html#af3baa13d4284ff771c1241a80cfcff56">MCDevInfo::pages_per_cluster</a></div><div class="ttdeci">u16 pages_per_cluster</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00188">mcman-internal.h:188</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_a33c881c29ccbcffb2b1c6a250110d216"><div class="ttname"><a href="structMcCacheEntry.html#a33c881c29ccbcffb2b1c6a250110d216">McCacheEntry::rd_flag</a></div><div class="ttdeci">u8 rd_flag</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00071">libmc-common.h:71</a></div></div>
<div class="ttc" id="astructMcCacheEntry_html_a9254d8d2b9715e85914e7895676094ac"><div class="ttname"><a href="structMcCacheEntry.html#a9254d8d2b9715e85914e7895676094ac">McCacheEntry::cluster</a></div><div class="ttdeci">int cluster</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00066">libmc-common.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00195">MCDevInfo::backup_block1</a>, <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="libmc-common_8h_source.html#l00066">McCacheEntry::cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00205">MCDevInfo::clusters_per_block</a>, <a class="el" href="mcman-internal_8h_source.html#l00060">MAX_CACHEENTRY</a>, <a class="el" href="libmc-common_8h_source.html#l00070">McCacheEntry::mc_port</a>, <a class="el" href="libmc-common_8h_source.html#l00068">McCacheEntry::mc_slot</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03285">mcman_addcacheentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00049">mcman_badblock</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00047">mcman_badblock_port</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00048">mcman_badblock_slot</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03233">mcman_getcacheentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00050">mcman_replacementcluster</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01159">McReadPage()</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="mcman-internal_8h_source.html#l00188">MCDevInfo::pages_per_cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00187">MCDevInfo::pagesize</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00042">pmcman_mccache</a>, <a class="el" href="libmc-common_8h_source.html#l00071">McCacheEntry::rd_flag</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01485">McCreateDirentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03831">McGetFATentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02249">mcman_checkBackupBlocks()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l04292">mcman_clearsuperblock()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01675">mcman_findfree2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00040">mcman_format2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00494">mcman_read2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00547">mcman_write2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">McReadDirEntry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03798">McSetFATentry()</a>.</p>

</div>
</div>
<a id="a53473e878971e2da32e3c57bc576fb5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53473e878971e2da32e3c57bc576fb5f">&#9670;&nbsp;</a></span>McReadDirEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McReadDirEntry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fsindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMcFsEntry.html">McFsEntry</a> **&#160;</td>
          <td class="paramname"><em>pfse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">3704</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;{</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, i;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> maxent, <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>, clust;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMcFatCache.html">McFatCache</a> *fci = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a503266ce3da0c0af7478991b5952ee1f">mcman_fatcache</a>[port][slot];</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160; </div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McReadDirEntry port%d slot%d cluster %d fsindex %d\n&quot;</span>, port, slot, cluster, fsindex);</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160; </div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        maxent = 0x402 / (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">cluster_size</a> &gt;&gt; 9); <span class="comment">//a1</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = fsindex / (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">cluster_size</a> &gt;&gt; 9);<span class="comment">//s2</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160; </div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        clust = cluster;</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        i = 0; <span class="comment">// s0</span></div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        <span class="keywordflow">if</span> ((cluster == 0) &amp;&amp; (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> != 0)) {</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt; maxent) {</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;                        i = <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                        <span class="keywordflow">if</span> ((fci-&gt;<a class="code" href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">entry</a>[<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>]) &gt;= 0 )</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;                                clust = fci-&gt;<a class="code" href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">entry</a>[<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>];</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                }</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                i = 0;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &gt; 0) {</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                                <span class="keywordflow">if</span> (i &gt;= maxent)</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                                <span class="keywordflow">if</span> (fci-&gt;<a class="code" href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">entry</a>[i] &lt; 0)</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;                                clust = fci-&gt;<a class="code" href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">entry</a>[i];</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>);</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;                }</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;                i--;</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        }</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160; </div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;        <span class="keywordflow">if</span> (i &lt; <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>) {</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>(port, slot, clust, &amp;clust);</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;                                <span class="keywordflow">return</span> -70;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;                        <span class="keywordflow">if</span> (clust == 0xffffffff)</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aeffadc31004bcc7a85c3338514045a95">sceMcResNoEntry</a>;</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;                        clust &amp;= 0x7fffffff;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160; </div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;                        i++;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;                        <span class="keywordflow">if</span> (cluster == 0) {</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;                                <span class="keywordflow">if</span> (i &lt; maxent)</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;                                        fci-&gt;<a class="code" href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">entry</a>[i] = clust;</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;                        }</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;                } <span class="keywordflow">while</span> (i &lt; <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>);</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        }</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160; </div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port ,slot, mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a> + clust, &amp;mce);</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;                <span class="keywordflow">return</span> -71;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160; </div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;        *pfse = (<a class="code" href="structMcFsEntry.html">McFsEntry</a> *)(mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a> + ((fsindex % (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">cluster_size</a> &gt;&gt; 9)) &lt;&lt; 9));</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160; </div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_aeffadc31004bcc7a85c3338514045a95"><div class="ttname"><a href="libmc-common_8h.html#aeffadc31004bcc7a85c3338514045a95">sceMcResNoEntry</a></div><div class="ttdeci">#define sceMcResNoEntry</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00145">libmc-common.h:145</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a503266ce3da0c0af7478991b5952ee1f"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a503266ce3da0c0af7478991b5952ee1f">mcman_fatcache</a></div><div class="ttdeci">static McFatCache mcman_fatcache[2][MCMAN_MAXSLOT]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00052">main.c:52</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_ae82da60cd38fc82c43c968d3a2783fbc"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a></div><div class="ttdeci">int McGetFATentry(int port, int slot, int fat_index, int *fat_entry)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03831">main.c:3831</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a411eb8a259d622f0c8239e16abe1f6f6"><div class="ttname"><a href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">MCDevInfo::cluster_size</a></div><div class="ttdeci">u32 cluster_size</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00203">mcman-internal.h:203</a></div></div>
<div class="ttc" id="astructMcFatCache_html"><div class="ttname"><a href="structMcFatCache.html">McFatCache</a></div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00062">mcman-internal.h:62</a></div></div>
<div class="ttc" id="astructMcFatCache_html_ad24c90b7178bb40ffb7b2c0e26a2b4ee"><div class="ttname"><a href="structMcFatCache.html#ad24c90b7178bb40ffb7b2c0e26a2b4ee">McFatCache::entry</a></div><div class="ttdeci">int entry[1+(MCMAN_CLUSTERFATENTRIES *2)]</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00063">mcman-internal.h:63</a></div></div>
<div class="ttc" id="asysclib_8h_html_a1d3748ca570dcb09a2fb28e8015107dd"><div class="ttname"><a href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a></div><div class="ttdeci">char * index(const char *s, int c)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00192">MCDevInfo::alloc_offset</a>, <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="mcman-internal_8h_source.html#l00203">MCDevInfo::cluster_size</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="mcman-internal_8h_source.html#l00063">McFatCache::entry</a>, <a class="el" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03831">McGetFATentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00052">mcman_fatcache</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>, <a class="el" href="libmc-common_8h_source.html#l00145">sceMcResNoEntry</a>, and <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01485">McCreateDirentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01777">mcman_cachedirentry()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01044">mcman_chdir()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00625">mcman_close2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01281">mcman_delete2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00276">mcman_dread2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01141">mcman_getdir2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01895">mcman_getdirinfo()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01731">mcman_getentspace()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01323">mcman_setdevinfos()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00378">mcman_setinfo2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02177">McSetDirEntryState()</a>.</p>

</div>
</div>
<a id="ab6979316408085a90febcf40f3f6c8c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6979316408085a90febcf40f3f6c8c1">&#9670;&nbsp;</a></span>McReadPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McReadPage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01159">1159</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;{</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>, ecres, retries, count, erase_byte;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> eccbuf[32];</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *pdata, *peccb;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        count = (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a> + 127) &gt;&gt; 7;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        erase_byte = (mcdi-&gt;<a class="code" href="structMCDevInfo.html#abfd1f2e5ee9b8b16709bab1e2c895fd5">cardflags</a> &amp; <a class="code" href="mcman-internal_8h.html#af9084cab1a9095199c2cada901b8a007">CF_ERASE_ZEROES</a>) ? 0x0 : 0xFF;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        retries = 0;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        ecres = <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="mcman-internal_8h.html#a63707e16aa66bd970016f0a373b89a47">mcman_readpage</a>(port, slot, page, buf, eccbuf)) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#abfd1f2e5ee9b8b16709bab1e2c895fd5">cardflags</a> &amp; <a class="code" href="mcman-internal_8h.html#ab59a87592b26819b84e35fdb643b8038">CF_USE_ECC</a>) { <span class="comment">// checking ECC from spare data block</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                <span class="comment">// check for erased page (last byte of spare data set to 0xFF or 0x0)/</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                        <span class="keywordflow">if</span> (eccbuf[<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7a8b407da35ed7809b9170cbb42a256c">mcman_sparesize</a>(port, slot) - 1] == erase_byte)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = 0;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                        <span class="keywordflow">if</span> (count &gt; 0) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                                peccb = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)eccbuf;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                                pdata = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)buf;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab31ccd1caaad117cb13a3ac2b680ac3d">mcman_correctdata</a>(pdata, peccb);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                                        <span class="keywordflow">if</span> (r &lt; ecres)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                                                ecres = r;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                                        peccb += 3;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                                        pdata += 128;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                                        } <span class="keywordflow">while</span> (++<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt; count);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                                }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                <span class="keywordflow">if</span> (ecres == <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                <span class="keywordflow">if</span> ((retries == 4) &amp;&amp; (!(ecres &lt; <a class="code" href="libmc-common_8h.html#ac897ef18b31829dbf79db1cf2be00151">sceMcResNoFormat</a>)))</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                        }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        } <span class="keywordflow">while</span> (++retries &lt; 5);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">if</span> (retries &lt; 5)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <span class="keywordflow">return</span> (ecres != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) ? <a class="code" href="libmc-common_8h.html#ac897ef18b31829dbf79db1cf2be00151">sceMcResNoFormat</a> : <a class="code" href="libmc-common_8h.html#a65f9c244e7d44baacdb229d076ee874e">sceMcResChangedCard</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;}</div>
<div class="ttc" id="alibmc-common_8h_html_ac897ef18b31829dbf79db1cf2be00151"><div class="ttname"><a href="libmc-common_8h.html#ac897ef18b31829dbf79db1cf2be00151">sceMcResNoFormat</a></div><div class="ttdeci">#define sceMcResNoFormat</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00143">libmc-common.h:143</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00201">MCDevInfo::cardflags</a>, <a class="el" href="mcman-internal_8h_source.html#l00050">CF_ERASE_ZEROES</a>, <a class="el" href="mcman-internal_8h_source.html#l00048">CF_USE_ECC</a>, <a class="el" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01243">mcman_correctdata()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="mcsio2_8c_source.html#l00525">mcman_readpage()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01290">mcman_sparesize()</a>, <a class="el" href="mcman-internal_8h_source.html#l00187">MCDevInfo::pagesize</a>, <a class="el" href="libmc-common_8h_source.html#l00142">sceMcResChangedCard</a>, <a class="el" href="libmc-common_8h_source.html#l00143">sceMcResNoFormat</a>, and <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02249">mcman_checkBackupBlocks()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01418">mcman_reportBadBlocks()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01323">mcman_setdevinfos()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01343">mcman_unformat2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02056">mcman_writecluster()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>.</p>

</div>
</div>
<a id="a8f0d8b436a3cdd239f34af978a1c5ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f0d8b436a3cdd239f34af978a1c5ecf">&#9670;&nbsp;</a></span>McReadPS1PDACard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McReadPS1PDACard </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcsio2_8c_source.html#l01062">1062</a> of file <a class="el" href="mcsio2_8c_source.html">mcsio2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> i, retries;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="comment">//DPRINTF(&quot;mcman: McReadPS1PDACard port%d slot%d page %x\n&quot;, port, slot, page);</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[0] = 0;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[0] = (((port &amp; 1) + 2) &amp; 3) | 0x02308c40;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#a5bc0f31e88a01ab064c200a83122bed2">in_size</a> = 140;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#a4823ba2ef20968e96c0221bb52f567ba">out_size</a> = 140;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[1] = 0;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] == page)</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                        page += 36;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[0] = 0x81;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[1] = 0x52;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[4] = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>)(page &gt;&gt; 8);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[5] = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>)page;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        retries = 0;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a> = (<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)(<a class="code" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter</a>(<a class="code" href="mcsio2_8c.html#a9284667b2d59e637757cd891422048f2">timer_ID</a>) - <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a>);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                <a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> hi, lo;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c867a1628d8bddc8872df0229fdd8eb">long_multiply</a>(<a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a>, 0x3e0f83e1, &amp;hi, &amp;lo);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)((hi &gt;&gt; 3) &lt; <a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a>))</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                        <a class="code" href="thbase_8h.html#a9e662b5867cf57e38015ced97ae413b6">DelayThread</a>(<a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a> - (hi &gt;&gt; 3));</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <a class="code" href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a>(port, slot, &amp;<a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a> = <a class="code" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter</a>(<a class="code" href="mcsio2_8c.html#a9284667b2d59e637757cd891422048f2">timer_ID</a>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a> = 10000;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">stat6c</a> &amp; 0xf000) == 0x1000) \</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                                &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[2] == 0x5a) \</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                                        &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[3] == 0x5d) \</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                                                &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[4] == 0x00) \</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                                        &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[6] == 0x5c) \</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                                                &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[7] == 0x5d) \</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                                                                        &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[139] == 0x47)) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[138] == (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#adbd9ca7b6ffeeee053571bea361093b5">mcman_calcEDC</a>(&amp;<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[8], 130) &amp; 0xff))</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        } <span class="keywordflow">while</span> (++retries &lt; 5);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">if</span> (retries &gt;= 5)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aeffadc31004bcc7a85c3338514045a95">sceMcResNoEntry</a>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        p = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)buf;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 128; i++)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                p[i] = <a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[10 + i];</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[1] != 0) &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[1] != 8))</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div>
<div class="ttc" id="amcsio2_8c_html_a0ee7c244a0605c9a5381e08b50906566"><div class="ttname"><a href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a></div><div class="ttdeci">u8 mcman_sio2outbufs_PS1PDA[0x90]</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00024">mcsio2.c:24</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a1593c57164d4f5e8dbcc305ec833ca8a"><div class="ttname"><a href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a></div><div class="ttdeci">static sio2_transfer_data_t mcman_sio2packet_PS1PDA</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00022">mcsio2.c:22</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a46e2957e4783a80e41b50446e082e3a9"><div class="ttname"><a href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a></div><div class="ttdeci">MCDevInfo mcman_devinfos[4][MCMAN_MAXSLOT]</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00056">main.c:56</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a7abe6e4b55c6bf8a517bc0e11c5069a9"><div class="ttname"><a href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a></div><div class="ttdeci">static u32 mcman_timercount</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00026">mcsio2.c:26</a></div></div>
<div class="ttc" id="amcsio2_8c_html_a9284667b2d59e637757cd891422048f2"><div class="ttname"><a href="mcsio2_8c.html#a9284667b2d59e637757cd891422048f2">timer_ID</a></div><div class="ttdeci">int timer_ID</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00028">main.c:28</a></div></div>
<div class="ttc" id="amcsio2_8c_html_abdca8b1e09d3fc84c519d3ab63400b14"><div class="ttname"><a href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a></div><div class="ttdeci">static u8 mcman_sio2inbufs_PS1PDA[0x90]</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00023">mcsio2.c:23</a></div></div>
<div class="ttc" id="amcsio2_8c_html_aee80af0901364e6f0bb9570a0a5402f0"><div class="ttname"><a href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a></div><div class="ttdeci">static int mcman_timerthick</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00027">mcsio2.c:27</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a0c867a1628d8bddc8872df0229fdd8eb"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a0c867a1628d8bddc8872df0229fdd8eb">long_multiply</a></div><div class="ttdeci">void long_multiply(u32 v1, u32 v2, u32 *HI, u32 *LO)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l00100">main.c:100</a></div></div>
<div class="ttc" id="astructsio2__transfer__data__t_html_a4823ba2ef20968e96c0221bb52f567ba"><div class="ttname"><a href="structsio2__transfer__data__t.html#a4823ba2ef20968e96c0221bb52f567ba">sio2_transfer_data_t::out_size</a></div><div class="ttdeci">u32 out_size</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00041">sio2man.h:41</a></div></div>
<div class="ttc" id="astructsio2__transfer__data__t_html_a5bc0f31e88a01ab064c200a83122bed2"><div class="ttname"><a href="structsio2__transfer__data__t.html#a5bc0f31e88a01ab064c200a83122bed2">sio2_transfer_data_t::in_size</a></div><div class="ttdeci">u32 in_size</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00040">sio2man.h:40</a></div></div>
<div class="ttc" id="astructsio2__transfer__data__t_html_abc0733154ad27cecb0323b5b54922d1b"><div class="ttname"><a href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">sio2_transfer_data_t::regdata</a></div><div class="ttdeci">u32 regdata[16]</div><div class="ttdef"><b>Definition:</b> <a href="sio2man_8h_source.html#l00036">sio2man.h:36</a></div></div>
<div class="ttc" id="athbase_8h_html_a9e662b5867cf57e38015ced97ae413b6"><div class="ttname"><a href="thbase_8h.html#a9e662b5867cf57e38015ced97ae413b6">DelayThread</a></div><div class="ttdeci">int DelayThread(int usec)</div></div>
<div class="ttc" id="atimrman_8h_html_a58d678065dc69807e0ee2c1f4bc2e6a8"><div class="ttname"><a href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter</a></div><div class="ttdeci">u32 GetTimerCounter(int timid)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00199">MCDevInfo::bad_block_list</a>, <a class="el" href="thbase_8h.html#a9e662b5867cf57e38015ced97ae413b6">DelayThread()</a>, <a class="el" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter()</a>, <a class="el" href="sio2man_8h_source.html#l00040">sio2_transfer_data_t::in_size</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00100">long_multiply()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00357">mcman_calcEDC()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="mcsio2_8c_source.html#l00023">mcman_sio2inbufs_PS1PDA</a>, <a class="el" href="mcsio2_8c_source.html#l00024">mcman_sio2outbufs_PS1PDA</a>, <a class="el" href="mcsio2_8c_source.html#l00022">mcman_sio2packet_PS1PDA</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00060">mcman_sio2transfer</a>, <a class="el" href="mcsio2_8c_source.html#l00026">mcman_timercount</a>, <a class="el" href="mcsio2_8c_source.html#l00027">mcman_timerthick</a>, <a class="el" href="sio2man_8h_source.html#l00041">sio2_transfer_data_t::out_size</a>, <a class="el" href="sio2man_8h_source.html#l00036">sio2_transfer_data_t::regdata</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00145">sceMcResNoEntry</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="sio2man_8h_source.html#l00029">sio2_transfer_data_t::stat6c</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00028">timer_ID</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02937">mcman_PS1pagetest()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03861">mcman_readclusterPS1()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02500">mcman_setPS1devinfos()</a>.</p>

</div>
</div>
<a id="ae124de9bb48241943dd7a58fec72b549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae124de9bb48241943dd7a58fec72b549">&#9670;&nbsp;</a></span>McReplaceBadBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McReplaceBadBlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">3986</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;{</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, i, curentry, clust, <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>, offset, numifc, fat_length, temp, length;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> value, value2, cluster, index2, offset2, <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a>;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>][<a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>];</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;        <span class="keywordtype">int</span> fat_entry[16];</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;        <span class="keywordtype">int</span> fat_entry2;</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;        <a class="code" href="structMcFsEntry.html">McFsEntry</a> *fse;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160; </div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McReplaceBadBlock mcman_badblock_port%d mcman_badblock_slot%d mcman_badblock %x\n&quot;</span>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>);</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160; </div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> == 0)</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160; </div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> &gt;= 0) {</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160; </div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt;16; i++) {</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;                        <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] == -1)</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;                }</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;                <span class="keywordflow">if</span> (i &gt;= 16)</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160; </div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a76fa6c1c62543eb36f68c17484180a74">alloc_end</a> &gt;= (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4951713a428fee9f2a66bb43c6208089">max_allocatable_clusters</a> + 8)) {</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#a4951713a428fee9f2a66bb43c6208089">max_allocatable_clusters</a> += 8;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>;</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                }</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160; </div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                fat_length = (((mcdi-&gt;<a class="code" href="structMCDevInfo.html#a3c0db088c28381cc1787e77316395207">clusters_per_card</a> &lt;&lt; 2) - 1) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">cluster_size</a>) + 1;</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                numifc = (((fat_length &lt;&lt; 2) - 1) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#a411eb8a259d622f0c8239e16abe1f6f6">cluster_size</a>) + 1;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160; </div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;                <span class="keywordflow">if</span> (numifc &gt; 32) {</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                        numifc = 32;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;                        fat_length = mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a> &lt;&lt; 5;</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                }</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160; </div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;                i = 0; <span class="comment">//sp5c</span></div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;                value = ~(-1 &lt;&lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>);</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                        clust = (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> * mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>) + i;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                        <span class="keywordflow">if</span> (clust &lt; mcdi-&gt;alloc_offset) {</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                                fat_entry[i] = 0;</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;                        }</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;                        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;                                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, clust - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>, &amp;fat_entry[i]);</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;                                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160; </div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;                                <span class="keywordflow">if</span> (((fat_entry[i] &amp; 0x80000000) == 0) || ((fat_entry[i] &lt; -1) &amp;&amp; (fat_entry[i] &gt;= -9)))</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;                                        value &amp;= ~(1 &lt;&lt; i);</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;                        }</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;                } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160; </div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a> &gt; 0) {</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;                        i = 0;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;                                <span class="keywordflow">if</span> ((value &amp; (1 &lt;&lt; i)) != 0) {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#abd3e5459838cef8ec5932ef95762ea30">mcman_findfree2</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, 1);</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                                        <span class="keywordflow">if</span> (r &lt; 0) {</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                                                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] = r;</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                                                <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                                        }</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                                        r += mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>;</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] = r;</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;                                }</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;                }</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160; </div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a> &gt; 0) {</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;                        i = 0;</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;                                <span class="keywordflow">if</span> ((value &amp; (1 &lt;&lt; i)) != 0) {</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;                                        <span class="keywordflow">if</span> (fat_entry[i] != 0) {</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;                                                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = ((fat_entry[i] &amp; 0x7fffffff) + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;                                                offset = ((fat_entry[i] &amp; 0x7fffffff) + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;                                                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                                                        fat_entry[i] = (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset] - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) | 0x80000000;</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;                                                }</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;                                        }</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                                }</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;                }</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160; </div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a> &gt; 0) {</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                        i = 0;</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                                <span class="keywordflow">if</span> ((<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] != 0) &amp;&amp; (fat_entry[i] != 0)) {</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>, fat_entry[i]);</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;                                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;                                                <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;                                }</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;                }</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160; </div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; numifc; i++) {</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[i] / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;                        offset = mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[i] % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160; </div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                                value &amp;= ~(1 &lt;&lt; offset);</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                                mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[i] = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i];</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                        }</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                }</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160; </div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;                <span class="keywordflow">if</span> (value == 0)</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                        <span class="keywordflow">goto</span> lbl_e030;</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160; </div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; fat_length; i++) {</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = i / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;                        offset = i % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;                        <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;                                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>], &amp;mce);</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;                                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;                                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;                        }</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                        offset = i % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;                        index2 = *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>[offset]) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                        offset2 = *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>[offset]) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160; </div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                        <span class="keywordflow">if</span> (index2 == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;                                value &amp;= ~(1 &lt;&lt; offset2);</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;                                *((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> *)&amp;mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>[offset]) = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset2];</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;                                mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> = 1;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;                        }</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;                }</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160; </div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160; </div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                <span class="keywordflow">if</span> (value == 0)</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                        <span class="keywordflow">goto</span> lbl_e030;</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160; </div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                value2 = value;</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160; </div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; mcdi-&gt;<a class="code" href="structMCDevInfo.html#a76fa6c1c62543eb36f68c17484180a74">alloc_end</a>; i++) {</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, i, &amp;fat_entry2);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;                                <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160; </div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = (<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)(((fat_entry2 &amp; 0x7fffffff) + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>);</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;                        offset = (<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)(((fat_entry2 &amp; 0x7fffffff) + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>);</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160; </div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;                                value &amp;= ~(1 &lt;&lt; offset);</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;                                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, i, (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset] - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) | 0x80000000);</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;                                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;                                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;                        }</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;                }</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160; </div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;                <span class="keywordflow">if</span> (value2 != value)</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160; </div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, 0, 0, &amp;fse);</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160; </div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                curentry = 2;</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a> = 0;</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                length = fse-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a>;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160; </div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;lbl_dd8c:</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;                <span class="keywordflow">if</span> (curentry &gt;= length)</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;                        <span class="keywordflow">goto</span> lbl_ded0;</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160; </div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a>, curentry, &amp;fse);</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160; </div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                cluster = fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a>;</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                offset = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160; </div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;                temp = fse-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a>;</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160; </div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;                        fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset] - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>;</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>();</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;                }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160; </div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;                <span class="keywordflow">if</span> ((fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> &amp; <a class="code" href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a>) == 0) {</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                        curentry++;</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                }</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160; </div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, cluster, 0, &amp;fse);</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160; </div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;                <span class="keywordflow">if</span> ((fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> &amp; <a class="code" href="libmc-common_8h.html#ab2c610a58e38dc855a9c38547f51afc1">sceMcFileAttrSubdir</a>) == 0) {</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                        curentry++;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                }</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;                <span class="keywordflow">if</span> (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> != 0) {</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;                        curentry++;</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;                }</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160; </div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;                <span class="keywordflow">if</span> (fse-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a> != curentry) {</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;                        curentry++;</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;                }</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160; </div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;                curentry++;</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160; </div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a20f61ccd139bc66f11fc83ff9d66d4cf">strcmp</a>(fse-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>, <span class="stringliteral">&quot;.&quot;</span>))</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160; </div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;                <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a> = cluster;</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                curentry = 2;</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;                length = temp;</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;                <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160; </div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;lbl_ded0:</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a>, 1, &amp;fse);</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;                offset = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160; </div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;                        fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset] - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>;</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>();</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;                }</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a>, fse-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a>, &amp;fse);</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160; </div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;                length = fse-&gt;<a class="code" href="structMcFsEntry.html#a188a0a9fc802db9a05d5e2e9dbceb219">length</a>;</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160; </div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a>, 0, &amp;fse);</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;                <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;                        <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160; </div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;                <a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a> = fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a>;</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;                offset = (fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> + mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>;</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;                curentry = fse-&gt;<a class="code" href="structMcFsEntry.html#a407efa6f9e586bc247b3eb588cac95c3">dir_entry</a> + 1;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160; </div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> == <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a>) {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                        fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a> = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[offset] - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>();</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;                }</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160; </div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a> != 0)</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160; </div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;                <span class="keywordflow">if</span> (curentry != 1)</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;                        <span class="keywordflow">goto</span> lbl_dd8c;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160; </div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;lbl_e030:</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a> &gt; 0) {</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;                        i = 0;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;                                clust = (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> * mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>) + i;</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;                                <span class="keywordflow">if</span> (clust &gt;= mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>) {</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, clust - mcdi-&gt;<a class="code" href="structMCDevInfo.html#a587e6e44f6a2259d17a2e676036762cb">alloc_offset</a>, 0xfffffffd);</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;                                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;                                                <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;                                }</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;                }</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160; </div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160; </div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> = 0;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160; </div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a> &gt; 0) {</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;                        i = 0;</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;                        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i] != 0) {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;                                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>, (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a084c1c5585f4aa7ca38c3352a8a3b93d">backup_block1</a> * mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1b50b42349f8174e70a98bf3b6e53ad">clusters_per_block</a>) + i, &amp;mce);</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;                                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;                                                <span class="keywordflow">goto</span> lbl_e168;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160; </div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;                                        mce-&gt;<a class="code" href="structMcCacheEntry.html#a9254d8d2b9715e85914e7895676094ac">cluster</a> = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aeadf6d9379104c53b8d61ac0ecdc3255">mcman_replacementcluster</a>[i];</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;                                        mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> = 1;</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;                                }</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;                        } <span class="keywordflow">while</span> (++i &lt; mcdi-&gt;clusters_per_block);</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;                }</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160; </div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;        }</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> = 0;</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;        }</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160; </div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a41c0ec75cd22026fc5927db6f6083ee9">mcman_clearsuperblock</a>(<a class="code" href="memorycard_2mcman_2src_2main_8c.html#af623778fa7a50b4f118606a73bbfeaba">mcman_badblock_port</a>, <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ab1c0cdabfedb74f28839f7133e5c0d36">mcman_badblock_slot</a>);</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160; </div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;lbl_e168:</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#af6d91c3475d2301aa683d03f8997e494">mcman_badblock</a> = 0;</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ac0b46013fb0840bb16178bd917331e16">sceMcResFailReplace</a>;</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;}</div>
<div class="ttc" id="aas__reg__compat_8h_html_a20531fe98982898fb1f3f997b54995ec"><div class="ttname"><a href="as__reg__compat_8h.html#a20531fe98982898fb1f3f997b54995ec">s3</a></div><div class="ttdeci">#define s3</div><div class="ttdef"><b>Definition:</b> <a href="as__reg__compat_8h_source.html#l00075">as_reg_compat.h:75</a></div></div>
<div class="ttc" id="alibmc-common_8h_html_ac0b46013fb0840bb16178bd917331e16"><div class="ttname"><a href="libmc-common_8h.html#ac0b46013fb0840bb16178bd917331e16">sceMcResFailReplace</a></div><div class="ttdeci">#define sceMcResFailReplace</div><div class="ttdef"><b>Definition:</b> <a href="libmc-common_8h_source.html#l00149">libmc-common.h:149</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a0c9ed6cbee4685e243590768ee13af29"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a></div><div class="ttdeci">int McSetFATentry(int port, int slot, int fat_index, int fat_entry)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03798">main.c:3798</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a41c0ec75cd22026fc5927db6f6083ee9"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a41c0ec75cd22026fc5927db6f6083ee9">mcman_clearsuperblock</a></div><div class="ttdeci">int mcman_clearsuperblock(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l04292">main.c:4292</a></div></div>
<div class="ttc" id="amemorycard_2mcman_2src_2main_8c_html_a6f097135e77088aeb4dd556542c1cf4c"><div class="ttname"><a href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a></div><div class="ttdeci">void Mc1stCacheEntSetWrFlagOff(void)</div><div class="ttdef"><b>Definition:</b> <a href="memorycard_2mcman_2src_2main_8c_source.html#l03271">main.c:3271</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a3c0db088c28381cc1787e77316395207"><div class="ttname"><a href="structMCDevInfo.html#a3c0db088c28381cc1787e77316395207">MCDevInfo::clusters_per_card</a></div><div class="ttdeci">u32 clusters_per_card</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00191">mcman-internal.h:191</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a4951713a428fee9f2a66bb43c6208089"><div class="ttname"><a href="structMCDevInfo.html#a4951713a428fee9f2a66bb43c6208089">MCDevInfo::max_allocatable_clusters</a></div><div class="ttdeci">u32 max_allocatable_clusters</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00210">mcman-internal.h:210</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a76fa6c1c62543eb36f68c17484180a74"><div class="ttname"><a href="structMCDevInfo.html#a76fa6c1c62543eb36f68c17484180a74">MCDevInfo::alloc_end</a></div><div class="ttdeci">u32 alloc_end</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00193">mcman-internal.h:193</a></div></div>
<div class="ttc" id="asysclib_8h_html_a20f61ccd139bc66f11fc83ff9d66d4cf"><div class="ttname"><a href="sysclib_8h.html#a20f61ccd139bc66f11fc83ff9d66d4cf">strcmp</a></div><div class="ttdeci">int strcmp(const char *p, const char *q)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00193">MCDevInfo::alloc_end</a>, <a class="el" href="mcman-internal_8h_source.html#l00192">MCDevInfo::alloc_offset</a>, <a class="el" href="mcman-internal_8h_source.html#l00195">MCDevInfo::backup_block1</a>, <a class="el" href="mcman-internal_8h_source.html#l00199">MCDevInfo::bad_block_list</a>, <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="libmc-common_8h_source.html#l00056">McFsEntry::cluster</a>, <a class="el" href="libmc-common_8h_source.html#l00066">McCacheEntry::cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00203">MCDevInfo::cluster_size</a>, <a class="el" href="mcman-internal_8h_source.html#l00205">MCDevInfo::clusters_per_block</a>, <a class="el" href="mcman-internal_8h_source.html#l00191">MCDevInfo::clusters_per_card</a>, <a class="el" href="libmc-common_8h_source.html#l00057">McFsEntry::dir_entry</a>, <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="mcman-internal_8h_source.html#l00204">MCDevInfo::FATentries_per_cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00198">MCDevInfo::ifc_list</a>, <a class="el" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index()</a>, <a class="el" href="libmc-common_8h_source.html#l00054">McFsEntry::length</a>, <a class="el" href="mcman-internal_8h_source.html#l00210">MCDevInfo::max_allocatable_clusters</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03271">Mc1stCacheEntSetWrFlagOff()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03311">McFlushCache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03831">McGetFATentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00049">mcman_badblock</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00047">mcman_badblock_port</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00048">mcman_badblock_slot</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l04292">mcman_clearsuperblock()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01675">mcman_findfree2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00050">mcman_replacementcluster</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">McReadDirEntry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03798">McSetFATentry()</a>, <a class="el" href="libmc-common_8h_source.html#l00052">McFsEntry::mode</a>, <a class="el" href="libmc-common_8h_source.html#l00061">McFsEntry::name</a>, <a class="el" href="as__reg__compat_8h_source.html#l00075">s3</a>, <a class="el" href="libmc-common_8h_source.html#l00186">sceMcFileAttrSubdir</a>, <a class="el" href="libmc-common_8h_source.html#l00149">sceMcResFailReplace</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="sysclib_8h.html#a20f61ccd139bc66f11fc83ff9d66d4cf">strcmp()</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>.</p>

</div>
</div>
<a id="a8add312666a48f43066792aea66e7529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8add312666a48f43066792aea66e7529">&#9670;&nbsp;</a></span>McRetOnly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McRetOnly </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03179">3179</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;{</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McRetOnly param %x\n&quot;</span>, fd);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, and <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>.</p>

</div>
</div>
<a id="afa72d82fc251f43fa87eba2b94efe37a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa72d82fc251f43fa87eba2b94efe37a">&#9670;&nbsp;</a></span>McSeek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McSeek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>origin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00767">767</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;{</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *fh;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McSeek fd %d offset %d origin %d\n&quot;</span>, fd, offset, origin);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>))</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        fh = (<a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd];</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a>)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">switch</span> (origin) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>:</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                        r = fh-&gt;<a class="code" href="structMC__FHANDLE.html#a286d149855a5a83c7bda622ace379b53">position</a> + offset;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>:</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                        r = offset;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="fcntl_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>:</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                        r = fh-&gt;<a class="code" href="structMC__FHANDLE.html#a9fd9ba076c500a1e4c72914c8ccc82df">filesize</a> + offset;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">return</span> fh-&gt;<a class="code" href="structMC__FHANDLE.html#a286d149855a5a83c7bda622ace379b53">position</a> = (r &lt; 0) ? 0 : r;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="ttc" id="afcntl_8h_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="fcntl_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00015">fcntl.h:15</a></div></div>
<div class="ttc" id="afcntl_8h_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="fcntl_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00016">fcntl.h:16</a></div></div>
<div class="ttc" id="afcntl_8h_html_ad2a2e6c114780c3071efd24f16c7f7d8"><div class="ttname"><a href="fcntl_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a></div><div class="ttdeci">#define SEEK_END</div><div class="ttdef"><b>Definition:</b> <a href="fcntl_8h_source.html#l00017">fcntl.h:17</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_a286d149855a5a83c7bda622ace379b53"><div class="ttname"><a href="structMC__FHANDLE.html#a286d149855a5a83c7bda622ace379b53">MC_FHANDLE::position</a></div><div class="ttdeci">u32 position</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00078">mcman-internal.h:78</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_a9fd9ba076c500a1e4c72914c8ccc82df"><div class="ttname"><a href="structMC__FHANDLE.html#a9fd9ba076c500a1e4c72914c8ccc82df">MC_FHANDLE::filesize</a></div><div class="ttdeci">u32 filesize</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00079">mcman-internal.h:79</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, <a class="el" href="mcman-internal_8h_source.html#l00079">MC_FHANDLE::filesize</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="mcman-internal_8h_source.html#l00075">MC_FHANDLE::port</a>, <a class="el" href="mcman-internal_8h_source.html#l00078">MC_FHANDLE::position</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="fcntl_8h_source.html#l00016">SEEK_CUR</a>, <a class="el" href="fcntl_8h_source.html#l00017">SEEK_END</a>, <a class="el" href="fcntl_8h_source.html#l00015">SEEK_SET</a>, <a class="el" href="mcman-internal_8h_source.html#l00076">MC_FHANDLE::slot</a>, and <a class="el" href="mcman-internal_8h_source.html#l00069">MC_FHANDLE::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00251">mc_lseek()</a>.</p>

</div>
</div>
<a id="a8c036d7e95572e7310691d79b8a5c217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c036d7e95572e7310691d79b8a5c217">&#9670;&nbsp;</a></span>McSetDirEntryState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McSetDirEntryState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cluster</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fsindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02177">2177</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;{</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, i, fat_index;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        <a class="code" href="structMcFsEntry.html">McFsEntry</a> *fse;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordtype">int</span> fat_entry;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a53473e878971e2da32e3c57bc576fb5f">McReadDirEntry</a>(port, slot, cluster, fsindex, &amp;fse);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        <span class="keywordflow">if</span> (fse-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[0] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                <span class="keywordflow">if</span> ((fse-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[1] == 0) || (fse-&gt;<a class="code" href="structMcFsEntry.html#a3932d456852eadfafc708edad1c361d5">name</a>[1] == <span class="charliteral">&#39;.&#39;</span>))</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aeffadc31004bcc7a85c3338514045a95">sceMcResNoEntry</a>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        i = 0;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[i].<a class="code" href="IEEE1394__bd_2src_2sbp2__driver_8c.html#ae05ca492ff4accc0e319f6cf3084c5e9">status</a> == 0)</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[i].port != port) || (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[i].slot != slot))</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[i].field_20 != cluster)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[i].field_24 == fsindex)</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        } <span class="keywordflow">while</span> (++i &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        <span class="keywordflow">if</span> (flags == 0)</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> = fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> &amp; (<a class="code" href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a> - 1);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> = fse-&gt;<a class="code" href="structMcFsEntry.html#a48c9c8582bc60130ad1345fb00b878e5">mode</a> | <a class="code" href="libmc-common_8h.html#a62aa532259074cefcf1494257bf553b3">sceMcFileAttrExists</a>;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160; </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a6f097135e77088aeb4dd556542c1cf4c">Mc1stCacheEntSetWrFlagOff</a>();</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        fat_index = fse-&gt;<a class="code" href="structMcFsEntry.html#aac4dcbe84c15089971b52f445865eff3">cluster</a>;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160; </div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <span class="keywordflow">if</span> (fat_index &gt;= 0) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                <span class="keywordflow">if</span> (fat_index &lt; mcdi-&gt;unknown2)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#a3d7f6da343e7ffb5d3e647c7315cda8f">unknown2</a> = fat_index;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                mcdi-&gt;<a class="code" href="structMCDevInfo.html#a7ec3e86c5c3353a4a64b2b0921af7904">unknown5</a> = -1;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160; </div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae82da60cd38fc82c43c968d3a2783fbc">McGetFATentry</a>(port, slot, fat_index, &amp;fat_entry);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                        <span class="keywordflow">if</span> (flags == 0) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                                fat_entry &amp;= 0x7fffffff;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                                <span class="keywordflow">if</span> (fat_index &lt; mcdi-&gt;unknown2)</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                                        mcdi-&gt;<a class="code" href="structMCDevInfo.html#a3d7f6da343e7ffb5d3e647c7315cda8f">unknown2</a> = fat_entry;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                        }</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                                fat_entry |= 0x80000000;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c9ed6cbee4685e243590768ee13af29">McSetFATentry</a>(port, slot, fat_index, fat_entry);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                        fat_index = fat_entry &amp; 0x7fffffff;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                } <span class="keywordflow">while</span> (fat_index != 0x7fffffff);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        }</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160; </div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;}</div>
<div class="ttc" id="astructMCDevInfo_html_a3d7f6da343e7ffb5d3e647c7315cda8f"><div class="ttname"><a href="structMCDevInfo.html#a3d7f6da343e7ffb5d3e647c7315cda8f">MCDevInfo::unknown2</a></div><div class="ttdeci">u32 unknown2</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00209">mcman-internal.h:209</a></div></div>
<div class="ttc" id="astructMCDevInfo_html_a7ec3e86c5c3353a4a64b2b0921af7904"><div class="ttname"><a href="structMCDevInfo.html#a7ec3e86c5c3353a4a64b2b0921af7904">MCDevInfo::unknown5</a></div><div class="ttdeci">int unknown5</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00213">mcman-internal.h:213</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="libmc-common_8h_source.html#l00056">McFsEntry::cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03271">Mc1stCacheEntSetWrFlagOff()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03831">McGetFATentry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03704">McReadDirEntry()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03798">McSetFATentry()</a>, <a class="el" href="libmc-common_8h_source.html#l00052">McFsEntry::mode</a>, <a class="el" href="libmc-common_8h_source.html#l00061">McFsEntry::name</a>, <a class="el" href="libmc-common_8h_source.html#l00194">sceMcFileAttrExists</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00145">sceMcResNoEntry</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="IEEE1394__bd_2src_2sbp2__driver_8c_source.html#l00042">status</a>, <a class="el" href="mcman-internal_8h_source.html#l00209">MCDevInfo::unknown2</a>, and <a class="el" href="mcman-internal_8h_source.html#l00213">MCDevInfo::unknown5</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01281">mcman_delete2()</a>, and <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>.</p>

</div>
</div>
<a id="a0c9ed6cbee4685e243590768ee13af29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9ed6cbee4685e243590768ee13af29">&#9670;&nbsp;</a></span>McSetFATentry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McSetFATentry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fat_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fat_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03798">3798</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;{</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r, ifc_index, indirect_index, indirect_offset, fat_offset;</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        <a class="code" href="structMcCacheEntry.html">McCacheEntry</a> *mce;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160; </div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;        <span class="comment">//DPRINTF(&quot;mcman: McSetFATentry port%d slot%d fat_index %x fat_entry %x\n&quot;, port, slot, fat_index, fat_entry);</span></div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160; </div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;        indirect_index = fat_index / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        fat_offset = fat_index % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        ifc_index = indirect_index / mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;        indirect_offset = indirect_index % mcdi-&gt;<a class="code" href="structMCDevInfo.html#ad1f3a3595a90ff3b47f35d9cabb40afc">FATentries_per_cluster</a>;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160; </div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port, slot, mcdi-&gt;<a class="code" href="structMCDevInfo.html#a843bdfd0351615d64205fc7c04cf9827">ifc_list</a>[ifc_index], &amp;mce);</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                <span class="keywordflow">return</span> -75;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160; </div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        <a class="code" href="structMcFatCluster.html">McFatCluster</a> *fc = (<a class="code" href="structMcFatCluster.html">McFatCluster</a> *)mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>;</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a4c0e53f67c008297befbeefe1a4e4d57">McReadCluster</a>(port, slot, fc-&gt;<a class="code" href="structMcFatCluster.html#aa57c6965624bde94d5f943d11b72d1ca">entry</a>[indirect_offset], &amp;mce);</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;                <span class="keywordflow">return</span> -76;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;        fc = (<a class="code" href="structMcFatCluster.html">McFatCluster</a> *)mce-&gt;<a class="code" href="structMcCacheEntry.html#a93e3bba0de65676eece3c0684bf04617">cl_data</a>;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160; </div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;        fc-&gt;<a class="code" href="structMcFatCluster.html#aa57c6965624bde94d5f943d11b72d1ca">entry</a>[fat_offset] = fat_entry;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;        mce-&gt;<a class="code" href="structMcCacheEntry.html#aff96d500fdd31b598b98b12cc0fc5f69">wr_flag</a> = 1;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160; </div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="libmc-common_8h_source.html#l00067">McCacheEntry::cl_data</a>, <a class="el" href="mcman-internal_8h_source.html#l00057">McFatCluster::entry</a>, <a class="el" href="mcman-internal_8h_source.html#l00204">MCDevInfo::FATentries_per_cluster</a>, <a class="el" href="mcman-internal_8h_source.html#l00198">MCDevInfo::ifc_list</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03648">McReadCluster()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00069">McCacheEntry::wr_flag</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00139">_start()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01606">mcman_fatWseek()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00040">mcman_format2()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00668">mcman_open2()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03986">McReplaceBadBlock()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02177">McSetDirEntryState()</a>.</p>

</div>
</div>
<a id="ac81c65bf6589bfdb29fc6707a805972a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81c65bf6589bfdb29fc6707a805972a">&#9670;&nbsp;</a></span>McSetFileInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McSetFileInfo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsceMcTblGetDir.html">sceMcTblGetDir</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00977">977</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;{</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#af7f77d3e4c2b0959184acd554d38ba78">mcman_setinfo2</a>(port, slot, filename, <a class="code" href="structinfo.html">info</a>, flags);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a1361e211b001d13fddab79a38ac8abfa">mcman_setinfo1</a>(port, slot, filename, <a class="code" href="structinfo.html">info</a>, flags);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> (r == <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#aa74026cdd09cf20877d92bec06114650">McFlushCache</a>(port, slot);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a1361e211b001d13fddab79a38ac8abfa"><div class="ttname"><a href="mcman-internal_8h.html#a1361e211b001d13fddab79a38ac8abfa">mcman_setinfo1</a></div><div class="ttdeci">int mcman_setinfo1(int port, int slot, char *filename, sceMcTblGetDir *info, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00450">ps1mc_fio.c:450</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_af7f77d3e4c2b0959184acd554d38ba78"><div class="ttname"><a href="mcman-internal_8h.html#af7f77d3e4c2b0959184acd554d38ba78">mcman_setinfo2</a></div><div class="ttdeci">int mcman_setinfo2(int port, int slot, char *filename, sceMcTblGetDir *info, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00378">ps2mc_fio.c:378</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03311">McFlushCache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00450">mcman_setinfo1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00378">mcman_setinfo2()</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00417">mc_chstat()</a>.</p>

</div>
</div>
<a id="af511671b444f7a9e3952c3afbaeb452b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af511671b444f7a9e3952c3afbaeb452b">&#9670;&nbsp;</a></span>McSetPS1CardFlag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void McSetPS1CardFlag </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00300">300</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="cdfs__iop_8h.html#a7d7915a0f57c30931f76f4a981e64f6e">DPRINTF</a>(<span class="stringliteral">&quot;mcman: McSetPS1CardFlag flag %x\n&quot;</span>, flag);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a1426604b58c346e00ce403a9ebd83a71">PS1CardFlag</a> = flag;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cdfs__iop_8h_source.html#l00007">DPRINTF</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00029">PS1CardFlag</a>.</p>

</div>
</div>
<a id="ac81321058fcccbe2a581ee2f7b934ba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81321058fcccbe2a581ee2f7b934ba6">&#9670;&nbsp;</a></span>McUnformat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McUnformat </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01079">1079</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;{</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(port, slot);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">if</span> (r &lt; -2)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardtype == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a4d8eb36415804daecea7814568452202">mcman_unformat2</a>(port, slot);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#ab94b12785a0c1c0ef457caebd51be6b4">mcman_unformat1</a>(port, slot);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].<a class="code" href="structMCDevInfo.html#a6cd6500884a375055843773df49e69ec">cardform</a> = 0;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(port, slot);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(port, slot);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a4d8eb36415804daecea7814568452202"><div class="ttname"><a href="mcman-internal_8h.html#a4d8eb36415804daecea7814568452202">mcman_unformat2</a></div><div class="ttdeci">int mcman_unformat2(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l01343">ps2mc_fio.c:1343</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_ab94b12785a0c1c0ef457caebd51be6b4"><div class="ttname"><a href="mcman-internal_8h.html#ab94b12785a0c1c0ef457caebd51be6b4">mcman_unformat1</a></div><div class="ttdeci">int mcman_unformat1(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00704">ps1mc_fio.c:704</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00206">MCDevInfo::cardform</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00704">mcman_unformat1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01343">mcman_unformat2()</a>, and <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>.</p>

</div>
</div>
<a id="a493d771509ef67c3fc09eb42b6b959d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a493d771509ef67c3fc09eb42b6b959d6">&#9670;&nbsp;</a></span>McWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00840">840</a> of file <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;{</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *fh;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)fd &lt; <a class="code" href="mcman-internal_8h.html#ac8246c545b2f4defc9b0439a212abc32">MAX_FDHANDLES</a>))</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        fh = (<a class="code" href="structMC__FHANDLE.html">MC_FHANDLE</a> *)&amp;<a class="code" href="memorycard_2mcman_2src_2main_8c.html#aad50f4e805d5515a50c0d09569551bee">mcman_fdhandles</a>[fd];</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a>)</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">if</span> (!fh-&gt;<a class="code" href="structMC__FHANDLE.html#adbd327d577f77b8aaab2dc4eb6d1d5c8">wrflag</a>)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad1ac062182359bdef63f76c4c6f24322">sceMcResDeniedPermit</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        r = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#ae0657a5d9d48dfabf05aa59a97613d3b">McDetectCard</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">if</span> (r != <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="memorycard_2mcman_2src_2main_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>][fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>].<a class="code" href="structMCDevInfo.html#ab36560e2be64c4bd87b2eb27d686ab8b">cardtype</a> == <a class="code" href="libmc-common_8h.html#a9d6f83eca57421bada8331386e4b90d4">sceMcTypePS2</a>)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#afb880387c7b3f316e8f82d434de61b6d">mcman_write2</a>(fd, buf, length);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                r = <a class="code" href="mcman-internal_8h.html#a69e19ab468448f247686461e42edef77">mcman_write1</a>(fd, buf, length);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                fh-&gt;<a class="code" href="structMC__FHANDLE.html#af077edced7fc87ecd7ed3fb0e54322a0">status</a> = 0;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">if</span> (r &lt; -9) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7ac6618eac9091c2b6a59f23710d4877">mcman_invhandles</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#acb89a59ea3e644ee7234b4fe1aa6bc73">mcman_clearcache</a>(fh-&gt;<a class="code" href="structMC__FHANDLE.html#a7040bbf79b76f74a552e09d9671253ea">port</a>, fh-&gt;<a class="code" href="structMC__FHANDLE.html#ace18f4cd5a26d5aac905fd245a624a95">slot</a>);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="ttc" id="amcman-internal_8h_html_a69e19ab468448f247686461e42edef77"><div class="ttname"><a href="mcman-internal_8h.html#a69e19ab468448f247686461e42edef77">mcman_write1</a></div><div class="ttdeci">int mcman_write1(int fd, void *buffer, int nbyte)</div><div class="ttdef"><b>Definition:</b> <a href="ps1mc__fio_8c_source.html#l00288">ps1mc_fio.c:288</a></div></div>
<div class="ttc" id="amcman-internal_8h_html_afb880387c7b3f316e8f82d434de61b6d"><div class="ttname"><a href="mcman-internal_8h.html#afb880387c7b3f316e8f82d434de61b6d">mcman_write2</a></div><div class="ttdeci">int mcman_write2(int fd, void *buffer, int nbyte)</div><div class="ttdef"><b>Definition:</b> <a href="ps2mc__fio_8c_source.html#l00547">ps2mc_fio.c:547</a></div></div>
<div class="ttc" id="astructMC__FHANDLE_html_adbd327d577f77b8aaab2dc4eb6d1d5c8"><div class="ttname"><a href="structMC__FHANDLE.html#adbd327d577f77b8aaab2dc4eb6d1d5c8">MC_FHANDLE::wrflag</a></div><div class="ttdeci">u8 wrflag</div><div class="ttdef"><b>Definition:</b> <a href="mcman-internal_8h_source.html#l00070">mcman-internal.h:70</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00200">MCDevInfo::cardtype</a>, <a class="el" href="mcman-internal_8h_source.html#l00089">MAX_FDHANDLES</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00483">McDetectCard()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03188">mcman_clearcache()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00055">mcman_fdhandles</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00450">mcman_invhandles()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00288">mcman_write1()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l00547">mcman_write2()</a>, <a class="el" href="mcman-internal_8h_source.html#l00075">MC_FHANDLE::port</a>, <a class="el" href="libmc-common_8h_source.html#l00146">sceMcResDeniedPermit</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="libmc-common_8h_source.html#l00159">sceMcTypePS2</a>, <a class="el" href="mcman-internal_8h_source.html#l00076">MC_FHANDLE::slot</a>, <a class="el" href="mcman-internal_8h_source.html#l00069">MC_FHANDLE::status</a>, and <a class="el" href="mcman-internal_8h_source.html#l00070">MC_FHANDLE::wrflag</a>.</p>

<p class="reference">Referenced by <a class="el" href="mcdev_8c_source.html#l00275">mc_write()</a>.</p>

</div>
</div>
<a id="aa47716ae6ef31281e5e3fea6fa2f0f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47716ae6ef31281e5e3fea6fa2f0f27">&#9670;&nbsp;</a></span>McWritePage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McWritePage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pagebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>eccbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcsio2_8c_source.html#l00454">454</a> of file <a class="el" href="mcsio2_8c_source.html">mcsio2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>, count, retries;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p_pagebuf = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)pagebuf;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p = <a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>.<a class="code" href="structsio2__transfer__data__t.html#a78be895b3d175e9f0256562ac6a705ba">out_dma</a>.<a class="code" href="struct__sio2__dma__arg.html#a02542ae6653ded736fa0d1522ffb0ad9">addr</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        count = (<a class="code" href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].<a class="code" href="structMCDevInfo.html#a4f29dbc160f4d79199476e7c381ebe65">pagesize</a> + 127) &gt;&gt; 7;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        retries = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordflow">if</span> (retries &gt; 0)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <a class="code" href="mcsio2_8c.html#aa3033ef6b981abce9a1ca8fe1a337dc9">mcman_cardchanged</a>(port, slot);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xffffffff, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0x03, (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)&amp;page);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = 0;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt; count) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0x0a, (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)&amp;p_pagebuf[<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt;&lt; 7]);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>++;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardflags &amp; <a class="code" href="mcman-internal_8h.html#ab59a87592b26819b84e35fdb643b8038">CF_USE_ECC</a>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="comment">// if memcard have ECC support</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0x0e, eccbuf);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xfffffffe, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <a class="code" href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a>(port, slot, &amp;<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>.<a class="code" href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">stat6c</a> &amp; 0xF000) != 0x1000) || (p[8] != 0x5a))</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> = 0;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt; count) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        <span class="keywordflow">if</span> (p[0x94 + 128 + 1 + ((<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> + (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt;&lt; 3)) &lt;&lt; 4)] != 0x5a)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>++;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt; count)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot].cardflags &amp; <a class="code" href="mcman-internal_8h.html#ab59a87592b26819b84e35fdb643b8038">CF_USE_ECC</a>) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="comment">// if memcard have ECC support</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a>++;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">if</span> (p[5 + ((<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> + (<a class="code" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index</a> &lt;&lt; 3)) &lt;&lt; 4) + <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a7a8b407da35ed7809b9170cbb42a256c">mcman_sparesize</a>(port, slot)] != 0x5a)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xffffffff, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0x0c, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <a class="code" href="mcsio2_8c.html#a194c0ca5cb0baff41abb8fad923d0f39">sio2packet_add</a>(port, slot, 0xfffffffe, <a class="code" href="defs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <a class="code" href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a>(port, slot, &amp;<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="mcsio2_8c.html#ab0940f6286076af7e25cc270c9aa51ae">mcman_sio2packet</a>.<a class="code" href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">stat6c</a> &amp; 0xF000) != 0x1000) || (p[3] != 0x5a))</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        } <span class="keywordflow">while</span> (++retries &lt; 5);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (p[3] == 0x66)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ac0b46013fb0840bb16178bd917331e16">sceMcResFailReplace</a>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ac897ef18b31829dbf79db1cf2be00151">sceMcResNoFormat</a>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="ttc" id="amcsio2_8c_html_aa3033ef6b981abce9a1ca8fe1a337dc9"><div class="ttname"><a href="mcsio2_8c.html#aa3033ef6b981abce9a1ca8fe1a337dc9">mcman_cardchanged</a></div><div class="ttdeci">int mcman_cardchanged(int port, int slot)</div><div class="ttdef"><b>Definition:</b> <a href="mcsio2_8c_source.html#l00344">mcsio2.c:344</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="sio2man_8h_source.html#l00023">_sio2_dma_arg::addr</a>, <a class="el" href="mcman-internal_8h_source.html#l00048">CF_USE_ECC</a>, <a class="el" href="sysclib_8h.html#a1d3748ca570dcb09a2fb28e8015107dd">index()</a>, <a class="el" href="mcsio2_8c_source.html#l00344">mcman_cardchanged()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="mcsio2_8c_source.html#l00018">mcman_sio2packet</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00060">mcman_sio2transfer</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l01290">mcman_sparesize()</a>, <a class="el" href="defs_8h_source.html#l00022">NULL</a>, <a class="el" href="sio2man_8h_source.html#l00046">sio2_transfer_data_t::out_dma</a>, <a class="el" href="mcman-internal_8h_source.html#l00187">MCDevInfo::pagesize</a>, <a class="el" href="libmc-common_8h_source.html#l00149">sceMcResFailReplace</a>, <a class="el" href="libmc-common_8h_source.html#l00143">sceMcResNoFormat</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="mcsio2_8c_source.html#l00073">sio2packet_add()</a>, and <a class="el" href="sio2man_8h_source.html#l00029">sio2_transfer_data_t::stat6c</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02324">McCheckBlock()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02249">mcman_checkBackupBlocks()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03927">mcman_fillbackupblock1()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>, <a class="el" href="ps2mc__fio_8c_source.html#l01343">mcman_unformat2()</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02056">mcman_writecluster()</a>.</p>

</div>
</div>
<a id="a94c12e85c579c5437e8a62166fbd2b39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c12e85c579c5437e8a62166fbd2b39">&#9670;&nbsp;</a></span>McWritePS1PDACard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int McWritePS1PDACard </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mcsio2_8c_source.html#l00997">997</a> of file <a class="el" href="mcsio2_8c_source.html">mcsio2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;{</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keyword">register</span> <span class="keywordtype">int</span> i, retries;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keyword">register</span> <a class="code" href="structMCDevInfo.html">MCDevInfo</a> *mcdi = &amp;<a class="code" href="mcsio2_8c.html#a46e2957e4783a80e41b50446e082e3a9">mcman_devinfos</a>[port][slot];</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *p;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="comment">//DPRINTF(&quot;mcman: McWritePS1PDACard port%d slot%d page %x\n&quot;, port, slot, page);</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[0] = 0;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[0] = (((port &amp; 1) + 2) &amp; 3) | 0x02288a40;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#a5bc0f31e88a01ab064c200a83122bed2">in_size</a> = 138;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#a4823ba2ef20968e96c0221bb52f567ba">out_size</a> = 138;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#abc0733154ad27cecb0323b5b54922d1b">regdata</a>[1] = 0;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <span class="keywordflow">if</span> (mcdi-&gt;<a class="code" href="structMCDevInfo.html#a694bbfe1e40b2d55ee91486ab296b455">bad_block_list</a>[i] == page)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                        page += 36;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[0] = 0x81;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[1] = 0x57;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[4] = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>)(page &gt;&gt; 8);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[5] = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>)page;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        p = (<a class="code" href="tamtypes_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> *)buf;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; 128; i++)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[6 + i] = p[i];</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[4 + 130] = <a class="code" href="memorycard_2mcman_2src_2main_8c.html#adbd9ca7b6ffeeee053571bea361093b5">mcman_calcEDC</a>(&amp;<a class="code" href="mcsio2_8c.html#abdca8b1e09d3fc84c519d3ab63400b14">mcman_sio2inbufs_PS1PDA</a>[4], 130);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        retries = 0;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a> = (<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)(<a class="code" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter</a>(<a class="code" href="mcsio2_8c.html#a9284667b2d59e637757cd891422048f2">timer_ID</a>) - <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                <a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a> hi, lo;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                <a class="code" href="memorycard_2mcman_2src_2main_8c.html#a0c867a1628d8bddc8872df0229fdd8eb">long_multiply</a>(<a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a>, 0x3e0f83e1, &amp;hi, &amp;lo);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="tamtypes_8h.html#a2caf5cd7bcdbe1eefa727f44ffb10bac">u32</a>)((hi &gt;&gt; 3) &lt; <a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a>))</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                        <a class="code" href="thbase_8h.html#a9e662b5867cf57e38015ced97ae413b6">DelayThread</a>(<a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a> - (hi &gt;&gt; 3));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <a class="code" href="mcsio2_8c.html#a8416eb63879f0e1429d730a897a84f4d">mcman_sio2transfer</a>(port, slot, &amp;<a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                <a class="code" href="mcsio2_8c.html#a7abe6e4b55c6bf8a517bc0e11c5069a9">mcman_timercount</a> = <a class="code" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter</a>(<a class="code" href="mcsio2_8c.html#a9284667b2d59e637757cd891422048f2">timer_ID</a>);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <a class="code" href="mcsio2_8c.html#aee80af0901364e6f0bb9570a0a5402f0">mcman_timerthick</a> = 20000;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="mcsio2_8c.html#a1593c57164d4f5e8dbcc305ec833ca8a">mcman_sio2packet_PS1PDA</a>.<a class="code" href="structsio2__transfer__data__t.html#acda7b765f14f63333758db5fea5cb768">stat6c</a> &amp; 0xf000) == 0x1000) \</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[2] == 0x5a) \</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                        &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[3] == 0x5d) \</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                                                &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[137] == 0x47)) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        } <span class="keywordflow">while</span> (++retries &lt; 5);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">if</span> (retries &gt;= 5)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aeffadc31004bcc7a85c3338514045a95">sceMcResNoEntry</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[1] != 0) &amp;&amp; (<a class="code" href="mcsio2_8c.html#a0ee7c244a0605c9a5381e08b50906566">mcman_sio2outbufs_PS1PDA</a>[1] != 8))</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#ad67a30a8c4dab1e7e96f0cc29ada5e0f">sceMcResFullDevice</a>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libmc-common_8h.html#aed3a052eb49248a03c5c3b4869086914">sceMcResSucceed</a>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mcman-internal_8h_source.html#l00199">MCDevInfo::bad_block_list</a>, <a class="el" href="thbase_8h.html#a9e662b5867cf57e38015ced97ae413b6">DelayThread()</a>, <a class="el" href="timrman_8h.html#a58d678065dc69807e0ee2c1f4bc2e6a8">GetTimerCounter()</a>, <a class="el" href="sio2man_8h_source.html#l00040">sio2_transfer_data_t::in_size</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00100">long_multiply()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00357">mcman_calcEDC()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00056">mcman_devinfos</a>, <a class="el" href="mcsio2_8c_source.html#l00023">mcman_sio2inbufs_PS1PDA</a>, <a class="el" href="mcsio2_8c_source.html#l00024">mcman_sio2outbufs_PS1PDA</a>, <a class="el" href="mcsio2_8c_source.html#l00022">mcman_sio2packet_PS1PDA</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00060">mcman_sio2transfer</a>, <a class="el" href="mcsio2_8c_source.html#l00026">mcman_timercount</a>, <a class="el" href="mcsio2_8c_source.html#l00027">mcman_timerthick</a>, <a class="el" href="sio2man_8h_source.html#l00041">sio2_transfer_data_t::out_size</a>, <a class="el" href="sio2man_8h_source.html#l00036">sio2_transfer_data_t::regdata</a>, <a class="el" href="libmc-common_8h_source.html#l00144">sceMcResFullDevice</a>, <a class="el" href="libmc-common_8h_source.html#l00145">sceMcResNoEntry</a>, <a class="el" href="libmc-common_8h_source.html#l00141">sceMcResSucceed</a>, <a class="el" href="sio2man_8h_source.html#l00029">sio2_transfer_data_t::stat6c</a>, and <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l00028">timer_ID</a>.</p>

<p class="reference">Referenced by <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03103">mcman_fillPS1backuparea()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l03339">mcman_flushcacheentry()</a>, <a class="el" href="ps1mc__fio_8c_source.html#l00025">mcman_format1()</a>, <a class="el" href="mcsio2_8c_source.html#l00893">mcman_probePS1Card()</a>, <a class="el" href="memorycard_2mcman_2src_2main_8c_source.html#l02937">mcman_PS1pagetest()</a>, and <a class="el" href="ps1mc__fio_8c_source.html#l00704">mcman_unformat1()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0981ace215aa2029f526b70c145b9fbe.html">iop</a></li><li class="navelem"><a class="el" href="dir_5805bfcfbe100e4767f47461b3e6402b.html">memorycard</a></li><li class="navelem"><a class="el" href="dir_ae48e1b29bfa2db4ecbd893188b24955.html">mcman</a></li><li class="navelem"><a class="el" href="dir_55de3dde79234ee6800af66dd2b2efb1.html">include</a></li><li class="navelem"><a class="el" href="mcman_8h.html">mcman.h</a></li>
    <li class="footer">Generated on Thu Feb 11 2021 11:42:44 for ps2sdk by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
